const history = require('connect-history-api-fallback');
const path = require('path');

const basePath = '/' + path.basename(process.cwd())

module.exports.pathsMiddlewareVerbose = history({
  index: basePath + '/index.html',
  verbose: true,
  rewrites: [
    { from: basePath + '/test', to: basePath + '/test' },
    { from: basePath + '/api', to: (context) => context.parsedUrl.path },
  ],
})

module.exports.pathsMiddlewareSilent = history({
  index: basePath + '/index.html',
  verbose: false,
  rewrites: [
    { from: basePath + '/test', to: basePath + '/test' },
    { from: basePath + '/api', to: (context) => context.parsedUrl.path },
  ],
})