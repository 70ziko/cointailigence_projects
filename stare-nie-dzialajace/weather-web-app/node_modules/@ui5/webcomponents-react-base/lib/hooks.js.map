{"version":3,"file":"hooks.js","sources":["../src/hooks/useConsolidatedRef.ts","../src/hooks/useI18nBundle.ts","../src/hooks/usePassThroughHtmlProps.ts","../src/hooks/useViewportRange.ts"],"sourcesContent":["import { RefObject, useEffect, useMemo, useRef } from 'react';\n\nexport const useConsolidatedRef = <T>(ref): RefObject<T> => {\n  const localRef: RefObject<T> = useRef(null);\n\n  const consolidatedRef = useMemo(() => {\n    if (!ref || typeof ref === 'function') {\n      return localRef;\n    }\n    return ref;\n  }, [ref]);\n\n  useEffect(() => {\n    if (typeof ref === 'function') {\n      // @ts-ignore\n      ref(consolidatedRef.current);\n    }\n  }, [consolidatedRef.current]);\n\n  return consolidatedRef;\n};\n","import { fetchI18nBundle, getI18nBundle } from '@ui5/webcomponents-base/dist/i18nBundle';\nimport { useEffect, useState } from 'react';\n\ntype TextWithDefault = { key: string; defaultText: string };\ntype TextWithPlaceholders = [TextWithDefault, ...string[]];\n\ninterface I18nBundle {\n  getText: (textObj: TextWithDefault, ...args: any) => string;\n}\n\nconst resolveTranslations = (bundle, texts) => {\n  return texts.map((text) => {\n    if (Array.isArray(text)) {\n      const [key, ...replacements] = text;\n      return bundle.getText(key, replacements);\n    }\n    return bundle.getText(text);\n  });\n};\n\nexport const useI18nText = (bundleName: string, ...texts: (TextWithDefault | TextWithPlaceholders)[]): string[] => {\n  const i18nBundle: I18nBundle = getI18nBundle(bundleName);\n  const [translations, setTranslations] = useState(resolveTranslations(i18nBundle, texts));\n\n  useEffect(() => {\n    const fetchAndLoadBundle = async () => {\n      await fetchI18nBundle(bundleName);\n      setTranslations((prev) => {\n        const next = resolveTranslations(i18nBundle, texts);\n        if (prev.length === next.length && prev.every((translation, index) => next[index] === translation)) {\n          return prev;\n        }\n        return next;\n      });\n    };\n    fetchAndLoadBundle();\n  }, [fetchI18nBundle, bundleName, texts]);\n\n  return translations;\n};\n","const PROP_WHITELIST = /^(aria-|data-|id$|on[A-Z])/;\n\nexport const usePassThroughHtmlProps = (props: Record<string, any>, propBlackList: string[] = []) => {\n  const componentPropBlacklist = new Set(propBlackList);\n\n  const returnVal: Record<string, unknown> = {};\n  for (const name in props) {\n    if (PROP_WHITELIST.test(name) && !componentPropBlacklist.has(name)) {\n      returnVal[name] = props[name];\n    }\n  }\n\n  return returnVal;\n};\n","import { Device } from '@ui5/webcomponents-react-base/lib/Device';\nimport { useEffect, useState, useRef } from 'react';\n\nexport const useViewportRange = (rangeSet) => {\n  const [currentRange, setCurrentRange] = useState(Device.media.getCurrentRange(rangeSet, window.innerWidth).name);\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    const handler = ({ name: range }) => {\n      if (isMounted.current === true) {\n        setCurrentRange(range);\n      }\n    };\n    Device.media.attachHandler(handler, null, 'StdExt');\n    return () => {\n      isMounted.current = false;\n      Device.resize.detachHandler(handler, null);\n    };\n  }, [setCurrentRange, isMounted]);\n\n  return currentRange;\n};\n"],"names":["useConsolidatedRef","ref","localRef","useRef","consolidatedRef","useMemo","useEffect","current","resolveTranslations","bundle","texts","map","text","Array","isArray","key","replacements","getText","useI18nText","bundleName","i18nBundle","getI18nBundle","useState","translations","setTranslations","fetchAndLoadBundle","fetchI18nBundle","prev","next","length","every","translation","index","PROP_WHITELIST","usePassThroughHtmlProps","props","propBlackList","componentPropBlacklist","Set","returnVal","name","test","has","useViewportRange","rangeSet","Device","media","getCurrentRange","window","innerWidth","currentRange","setCurrentRange","isMounted","handler","range","attachHandler","resize","detachHandler"],"mappings":"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"}