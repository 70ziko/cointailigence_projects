{"version":3,"file":"ObjectPage.js","sources":["../src/components/ObjectPage/CollapsedAvatar.tsx","../src/components/ObjectPage/ObjectPage.jss.ts","../src/internal/stopPropagation.ts","../src/webComponents/StandardListItem/index.tsx","../src/components/ObjectPage/ObjectPageAnchorButton.tsx","../src/components/ObjectPage/ObjectPageUtils.ts","../src/components/ObjectPage/ObjectPageAnchorBar.tsx","../src/components/ObjectPage/ObjectPageHeader.tsx","../src/components/ObjectPage/useObserveHeights.ts","../src/components/ObjectPage/index.tsx"],"sourcesContent":["import { createComponentStyles } from '@ui5/webcomponents-react-base/lib/createComponentStyles';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { AvatarSize } from '@ui5/webcomponents-react/lib/AvatarSize';\nimport React, { ReactElement, useEffect, useMemo, useRef, useState } from 'react';\n\nconst styles = {\n  base: {\n    margin: 'var(--_ui5wcr_ObjectPage_avatar_margin)', // defined in ObjectPage JSS\n    opacity: 0\n  },\n  hidden: {\n    opacity: 0\n  },\n  visible: {\n    transition: 'opacity 0.5s',\n    opacity: 1\n  },\n  imageContainer: {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n    maxHeight: '3rem',\n    width: '3rem',\n    maxWidth: '3rem'\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  }\n};\n\nconst useStyles = createComponentStyles(styles, {\n  name: 'CollapsedAvatar'\n});\n\nexport interface CollapsedAvatarPropTypes {\n  image?: string | ReactElement;\n  imageShapeCircle?: boolean;\n}\n\nexport const CollapsedAvatar = (props: CollapsedAvatarPropTypes) => {\n  const { image, imageShapeCircle } = props;\n  const classes = useStyles();\n  const [isMounted, setIsMounted] = useState(false);\n  const domRef = useRef();\n\n  const avatarContent = useMemo(() => {\n    if (!image) return null;\n\n    if (typeof image === 'string') {\n      return (\n        <span\n          className={classes.imageContainer}\n          style={{ borderRadius: imageShapeCircle ? '50%' : 0, overflow: 'hidden' }}\n        >\n          <img className={classes.image} src={image} alt=\"Object Page Image\" />\n        </span>\n      );\n    } else {\n      return React.cloneElement(image, {\n        size: AvatarSize.S,\n        // @ts-ignore\n        className: image.props?.className\n          ? `${classes.imageContainer} ${image.props?.className}`\n          : classes.imageContainer\n      } as unknown);\n    }\n  }, [image, imageShapeCircle]);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const containerClasses = StyleClassHelper.of(classes.base);\n  if (isMounted) {\n    containerClasses.put(classes.visible);\n  } else {\n    containerClasses.put(classes.hidden);\n  }\n\n  return (\n    <div ref={domRef} className={containerClasses.valueOf()}>\n      {avatarContent}\n    </div>\n  );\n};\n","import { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\n\nexport const ObjectPageCssVariables = {\n  anchorFloat: '--_ui5wcr_ObjectPage_actions_float',\n  anchorLeft: '--_ui5wcr_ObjectPage_actions_left',\n  anchorRight: '--_ui5wcr_ObjectPage_actions_right',\n  avatarMargin: '--_ui5wcr_ObjectPage_avatar_margin',\n  lastSectionMargin: '--_ui5wcr_ObjectPage_last_section_margin_bottom'\n};\n\nconst styles = {\n  objectPage: {\n    width: '100%',\n    height: '100%',\n    maxHeight: '100vh',\n    position: 'relative',\n    whiteSpace: 'normal',\n    fontFamily: ThemingParameters.sapFontFamily,\n    backgroundColor: ThemingParameters.sapBackgroundColor,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n    [ObjectPageCssVariables.lastSectionMargin]: 0,\n    '& section[id*=\"ObjectPageSection-\"] > div[role=\"heading\"]': {\n      display: 'none'\n    },\n    // explanation why first-child selector is not sufficient here:\n    // https://stackoverflow.com/questions/7128406/css-select-the-first-child-from-elements-with-particular-attribute\n    '& section[id*=\"ObjectPageSection-\"] ~ section[id*=\"ObjectPageSection-\"] > div[role=\"heading\"]': {\n      display: 'block'\n    },\n    '& section[data-component-name=\"ObjectPageSection\"]:last-child': {\n      marginBottom: `var(${ObjectPageCssVariables.lastSectionMargin})`\n    }\n  },\n  '@global html': {\n    [ObjectPageCssVariables.anchorFloat]: 'right',\n    [ObjectPageCssVariables.anchorRight]: '1.25rem',\n    [ObjectPageCssVariables.anchorLeft]: 'unset',\n    [ObjectPageCssVariables.avatarMargin]: '0 1rem 0 0'\n  },\n  '@global [dir=\"rtl\"]': {\n    [ObjectPageCssVariables.anchorFloat]: 'left',\n    [ObjectPageCssVariables.anchorRight]: 'unset',\n    [ObjectPageCssVariables.anchorLeft]: '1.25rem',\n    [ObjectPageCssVariables.avatarMargin]: '0 0 0 1rem'\n  },\n  iconTabBarMode: {\n    '& section[data-component-name=\"ObjectPageSection\"] > div[role=\"heading\"]': {\n      display: 'none'\n    }\n  },\n  noHeader: {\n    '& $header': {\n      display: 'none'\n    },\n    '& $contentHeader': {\n      display: 'none'\n    }\n  },\n  headerCollapsed: {\n    '& $contentHeader': {\n      display: 'none'\n    }\n  },\n  // header\n  header: {\n    flexShrink: 0,\n    backgroundColor: ThemingParameters.sapObjectHeader_Background,\n    position: 'sticky',\n    top: 0,\n    zIndex: 2\n  },\n  contentHeader: {\n    backgroundColor: ThemingParameters.sapObjectHeader_Background,\n    position: 'sticky',\n    paddingBottom: '0.25rem',\n    maxHeight: '500px',\n    overflow: 'hidden',\n    paddingLeft: '2rem'\n  },\n  anchorBar: {\n    position: 'sticky',\n    zIndex: 2,\n    '--_ui5_tc_header_box_shadow': 'inset 0px -1px 0 0px rgba(0,0,0,0.15)'\n  },\n  titleBar: {\n    padding: '0.5rem 2rem',\n    display: 'block',\n    position: 'relative'\n  },\n  container: {\n    flex: '1 1 70%',\n    boxSizing: 'border-box'\n  },\n  title: {\n    padding: '0.3125rem 0 0 0'\n  },\n  subTitle: {\n    verticalAlign: 'baseline',\n    padding: '0 0 0.5rem 0.5rem'\n  },\n  actions: {\n    position: 'absolute',\n    top: '0',\n    paddingTop: '0.75rem',\n    zIndex: 1,\n    right: `var(${ObjectPageCssVariables.anchorRight})`,\n    left: `var(${ObjectPageCssVariables.anchorLeft})`,\n    display: 'inline-block',\n    float: `var(${ObjectPageCssVariables.anchorFloat})`,\n    verticalAlign: 'top',\n    '& > *': {\n      marginLeft: '0.5rem',\n      padding: 0\n    }\n  },\n  titleInHeaderContent: {\n    '& $subTitle': {\n      padding: '0.5rem 0'\n    },\n    '& $keyInfos': {\n      alignSelf: 'unset'\n    },\n    '& contentHeader': {\n      paddingTop: 0,\n      '& > *': {\n        display: 'flex',\n        verticalAlign: 'top',\n        '&:not(:first-child)': {\n          marginRight: '2rem',\n          marginBottom: '1rem'\n        }\n      }\n    }\n  },\n  headerCustomContent: {\n    display: 'inline-block',\n    verticalAlign: 'top',\n    '& > *': {\n      float: 'left',\n      marginRight: '2rem',\n      marginBottom: '1rem',\n      lineHeight: '1.5rem'\n    },\n    '&:after': {\n      clear: 'both'\n    }\n  },\n  headerCustomContentItem: {\n    marginLeft: '1rem'\n  },\n\n  headerImage: {\n    minWidth: '5rem',\n    maxWidth: '5rem',\n    maxHeight: '5rem',\n    display: 'inline-block',\n    marginRight: '2rem',\n    marginBottom: '1rem'\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  },\n  keyInfos: {\n    '& > *': {\n      marginLeft: '1rem'\n    },\n    display: 'flex',\n    flexDirection: 'row',\n    alignSelf: 'center'\n  },\n  avatar: {\n    margin: `var(${ObjectPageCssVariables.avatarMargin})`\n  }\n};\n\nexport default styles;\n","export const stopPropagation = (e) => {\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n};\n","import { ListItemTypes } from '@ui5/webcomponents-react/lib/ListItemTypes';\nimport { ValueState } from '@ui5/webcomponents-react/lib/ValueState';\nimport { withWebComponent, WithWebComponentPropTypes } from '@ui5/webcomponents-react/lib/withWebComponent';\nimport '@ui5/webcomponents/dist/StandardListItem';\nimport { FC, ReactNode } from 'react';\n\nexport interface StandardListItemPropTypes extends WithWebComponentPropTypes {\n  /**\n   * Defines the description displayed right under the item text, if such is present.\n   */\n  description?: string;\n  /**\n   * Defines the <code>icon</code> source URI. <br><br> <b>Note:</b> SAP-icons font provides numerous buil-in icons. To find all the available icons, see the <ui5-link target=\"_blank\" href=\"https://openui5.hana.ondemand.com/test-resources/sap/m/demokit/iconExplorer/webapp/index.html\" class=\"api-table-content-cell-link\">Icon Explorer</ui5-link>.\n   */\n  icon?: string;\n  /**\n   * Defines whether the <code>icon</code> should be displayed in the beginning of the list item or in the end. <br><br> <b>Note:</b> If <code>image</code> is set, the <code>icon</code> would be displayed after the <code>image</code>.\n   */\n  iconEnd?: boolean;\n  /**\n   * Defines the <code>image</code> source URI. <br><br> <b>Note:</b> The <code>image</code> would be displayed in the beginning of the list item.\n   */\n  image?: string;\n  /**\n   * Defines the <code>info</code>, displayed in the end of the list item.\n   */\n  info?: string;\n  /**\n   * Defines the state of the <code>info</code>. <br> Available options are: <code>\"None\"</code> (by default), <code>\"Success\"</code>, <code>\"Warning\"</code>, <code>\"Information\"</code> and <code>\"Erorr\"</code>.\n   */\n  infoState?: ValueState;\n  /**\n   * Defines the visual indication and behavior of the list items. Available options are <code>Active</code> (by default), <code>Inactive</code> and <code>Detail</code>. <br><br> <b>Note:</b> When set to <code>Active</code>, the item will provide visual response upon press and hover, while with type <code>Inactive</code> and <code>Detail</code> - will not.\n   */\n  type?: ListItemTypes;\n  /**\n   * Defines the selected state of the <code>ListItem</code>.\n   */\n  selected?: boolean;\n  /**\n   * Defines the text of the <code>ui5-li</code>. <br><br> <b>Note:</b> –êlthough this slot accepts HTML Elements, it is strongly recommended that you only use text in order to preserve the intended design.\n   */\n  children?: ReactNode | ReactNode[];\n  /**\n   * Fired when the user clicks on the detail button when type is <code>Detail</code>.\n   */\n  onDetailClick?: (event: CustomEvent<{}>) => void;\n}\n\n/**\n * <a href=\"https://sap.github.io/ui5-webcomponents/playground/components/StandardListItem\" target=\"_blank\">UI5 Web Components Playground</a>\n */\nconst StandardListItem: FC<StandardListItemPropTypes> = withWebComponent<StandardListItemPropTypes>(\n  'ui5-li',\n  ['description', 'icon', 'image', 'info', 'infoState', 'type'],\n  ['iconEnd', 'selected'],\n  [],\n  ['detail-click']\n);\n\nStandardListItem.displayName = 'StandardListItem';\n\nStandardListItem.defaultProps = {\n  iconEnd: false,\n  infoState: ValueState.None,\n  type: ListItemTypes.Active,\n  selected: false\n};\n\nexport { StandardListItem };\n","import '@ui5/webcomponents-icons/dist/icons/slim-arrow-down';\nimport { Tab } from '@ui5/webcomponents-react/lib/Tab';\nimport React, { FC, useEffect, useRef } from 'react';\n\ninterface ObjectPageAnchorPropTypes {\n  section: any;\n  onShowSubSectionPopover: (event: any, section: any) => void;\n  index: number;\n  selected: boolean;\n}\n\nexport const ObjectPageAnchorButton: FC<ObjectPageAnchorPropTypes> = (props: ObjectPageAnchorPropTypes) => {\n  const ref = useRef<HTMLElement>();\n  const { section, index, selected, onShowSubSectionPopover } = props;\n\n  let subSectionsAvailable = false;\n  if (section.props.children && section.props.children.filter) {\n    const subSections = section.props.children.filter((item) => item.props && item.props.isSubSection);\n    subSectionsAvailable = subSections.length > 0;\n  }\n\n  useEffect(() => {\n    if (subSectionsAvailable) {\n      try {\n        const element = ref.current?.parentElement?.shadowRoot?.querySelector(\n          `.ui5-tc__headerList li[aria-posinset=\"${index + 1}\"] .ui5-tab-strip-itemContent`\n        );\n\n        if (element && !element.querySelector('ui5-icon')) {\n          const icon = document.createElement('ui5-icon');\n          (icon as any).name = 'slim-arrow-down';\n          icon.style.verticalAlign = 'text-bottom';\n          icon.style.pointerEvents = 'all';\n          icon.addEventListener('click', (e) => {\n            e.stopImmediatePropagation();\n            e.preventDefault();\n            e.stopPropagation();\n            onShowSubSectionPopover(e, section);\n          });\n          element.appendChild(icon);\n        }\n      } catch (e) {\n        // empty catch block, mainly required for tests\n      }\n    }\n  }, [subSectionsAvailable, ref, onShowSubSectionPopover, section]);\n\n  return (\n    <Tab\n      ref={ref}\n      data-index={index}\n      data-section-id={section.props.id}\n      text={section.props.title}\n      selected={selected}\n    />\n  );\n};\n","import { Children, ReactElement, ReactNode, RefObject } from 'react';\n\nexport const safeGetChildrenArray = <T = Exclude<ReactNode, boolean | null | undefined>>(children: unknown): T[] =>\n  Children.toArray(children).filter(Boolean) as T[];\n\nexport const getSectionById = (sections: ReactElement<any> | ReactElement<any>[], id) => {\n  return safeGetChildrenArray(sections).find((objectPageSection: ReactElement) => objectPageSection.props?.id === id);\n};\n\nexport const extractSectionIdFromHtmlId = (id: string) => {\n  return id.replace(/^ObjectPageSection-/, '');\n};\n\nexport const getLastObjectPageSection = (ref: RefObject<HTMLDivElement>): HTMLElement => {\n  const sections = ref.current.querySelectorAll<HTMLElement>('[id^=\"ObjectPageSection\"]');\n  if (!sections || sections.length < 1) {\n    return null;\n  }\n\n  return sections[sections.length - 1];\n};\n","import { addCustomCSS } from '@ui5/webcomponents-base/dist/Theming';\nimport '@ui5/webcomponents-icons/dist/icons/pushpin-off';\nimport '@ui5/webcomponents-icons/dist/icons/slim-arrow-down';\nimport '@ui5/webcomponents-icons/dist/icons/slim-arrow-up';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { List } from '@ui5/webcomponents-react/lib/List';\nimport { PlacementType } from '@ui5/webcomponents-react/lib/PlacementType';\nimport { Popover } from '@ui5/webcomponents-react/lib/Popover';\nimport { TabContainer } from '@ui5/webcomponents-react/lib/TabContainer';\nimport { ToggleButton } from '@ui5/webcomponents-react/lib/ToggleButton';\nimport React, { CSSProperties, forwardRef, ReactElement, RefObject, useCallback, useRef, useState } from 'react';\nimport { createUseStyles } from 'react-jss';\nimport { Ui5PopoverDomRef } from '../../interfaces/Ui5PopoverDomRef';\nimport { stopPropagation } from '../../internal/stopPropagation';\nimport { StandardListItem } from '../../webComponents/StandardListItem';\nimport { ObjectPageAnchorButton } from './ObjectPageAnchorButton';\nimport { safeGetChildrenArray } from './ObjectPageUtils';\nimport { createPortal } from 'react-dom';\n\naddCustomCSS(\n  'ui5-button',\n  `\n:host([data-ui5wcr-object-page-header-action]) .ui5-button-root {\n padding: 0;\n}`\n);\naddCustomCSS(\n  'ui5-togglebutton',\n  `\n:host([data-ui5wcr-object-page-header-action]) .ui5-button-root {\n padding: 0;\n}`\n);\n\nconst anchorBarStyles = {\n  anchorBarActionButton: {\n    position: 'absolute',\n    '--_ui5_button_compact_height': '1.375rem',\n    '--_ui5_button_base_height': '1.375rem',\n    '--_ui5_button_base_min_width': '1.375rem',\n    '--_ui5_button_base_min_compact_width': '1.375rem',\n    top: `-0.6875rem`,\n    marginLeft: `-0.6875rem`,\n    left: '50%',\n    '&:before, &:after': {\n      content: '\"\"',\n      position: 'absolute',\n      width: '4rem',\n      top: '50%',\n      height: '0.0625rem'\n    },\n    '&:before': {\n      right: '100%',\n      backgroundImage: `linear-gradient(to left, ${ThemingParameters.sapHighlightColor}, rgba(8,84,160,0))`\n    },\n    '&:after': {\n      backgroundImage: `linear-gradient(to right, ${ThemingParameters.sapHighlightColor}, rgba(8,84,160,0))`,\n      left: '100%'\n    }\n  },\n  anchorBarActionButtonExpandable: {},\n  anchorBarActionButtonPinnable: {},\n  anchorBarActionPinnableAndExandable: {\n    '&$anchorBarActionButtonPinnable': {\n      marginLeft: '0.25rem',\n      '&:before': {\n        backgroundImage: 'none'\n      }\n    },\n    '&$anchorBarActionButtonExpandable': {\n      marginLeft: '-1.75rem'\n    }\n  }\n};\n\nconst useStyles = createUseStyles(anchorBarStyles, { name: 'ObjectPageAnchorBar' });\n\ninterface Props {\n  sections: ReactElement | ReactElement[];\n  selectedSectionId: string;\n  handleOnSectionSelected: (e: unknown) => void;\n  handleOnSubSectionSelected: (e: unknown) => void;\n  showHideHeaderButton: boolean;\n  headerContentPinnable: boolean;\n  headerPinned: boolean;\n  headerContentHeight: number;\n  setHeaderPinned: (payload: any) => void;\n  style?: CSSProperties;\n  onToggleHeaderContentVisibility: (e: any) => void;\n  className: string;\n}\n\nconst ObjectPageAnchorBar = forwardRef((props: Props, ref: RefObject<HTMLElement>) => {\n  const {\n    sections,\n    selectedSectionId,\n    handleOnSectionSelected,\n    handleOnSubSectionSelected,\n    showHideHeaderButton,\n    headerContentPinnable,\n    onToggleHeaderContentVisibility,\n    headerPinned,\n    setHeaderPinned,\n    headerContentHeight,\n    style,\n    className\n  } = props;\n\n  const classes = useStyles();\n\n  const shouldRenderHideHeaderButton = showHideHeaderButton;\n  const shouldRenderHeaderPinnableButton = headerContentPinnable && headerContentHeight > 0;\n  const showBothActions = shouldRenderHeaderPinnableButton && shouldRenderHideHeaderButton;\n  const [popoverContent, setPopoverContent] = useState<ReactElement>(null);\n  const popoverRef = useRef<Ui5PopoverDomRef>(null);\n\n  const onPinHeader = useCallback(\n    (e) => {\n      setHeaderPinned(e.target.pressed);\n    },\n    [setHeaderPinned]\n  );\n\n  const onTabItemSelect = useCallback(\n    (event) => {\n      const { sectionId, index } = event.detail.tab.dataset;\n      // eslint-disable-next-line eqeqeq\n      const section = safeGetChildrenArray<ReactElement>(sections).find((el) => el.props.id == sectionId);\n      handleOnSectionSelected(\n        enrichEventWithDetails({} as any, {\n          ...section,\n          index\n        })\n      );\n    },\n    [sections]\n  );\n\n  const onShowSubSectionPopover = useCallback(\n    (e, section) => {\n      setPopoverContent(section);\n      popoverRef.current.openBy(e.target.parentElement);\n    },\n    [setPopoverContent, popoverRef]\n  );\n\n  const onSubSectionClick = useCallback(\n    (e) => {\n      const selectedId = e.detail.item.dataset.key;\n      const subSection = popoverContent.props.children\n        .filter((item) => item.props && item.props.isSubSection)\n        .find((item) => item.props.id === selectedId);\n      if (subSection) {\n        handleOnSubSectionSelected(enrichEventWithDetails(e, { section: popoverContent, subSection }));\n      }\n      popoverRef.current.close();\n    },\n    [handleOnSubSectionSelected, popoverRef, popoverContent]\n  );\n\n  return (\n    <section className={className} role=\"navigation\" style={style} ref={ref}>\n      <TabContainer collapsed fixed onTabSelect={onTabItemSelect} showOverflow>\n        {safeGetChildrenArray(sections).map((section: ReactElement, index) => {\n          return (\n            <ObjectPageAnchorButton\n              key={`Anchor-${section.props?.id}`}\n              section={section}\n              index={index}\n              selected={selectedSectionId === section.props?.id}\n              onShowSubSectionPopover={onShowSubSectionPopover}\n            />\n          );\n        })}\n      </TabContainer>\n      {shouldRenderHideHeaderButton && (\n        <Button\n          icon={headerContentHeight === 0 ? 'slim-arrow-down' : 'slim-arrow-up'}\n          onClick={onToggleHeaderContentVisibility}\n          className={`${classes.anchorBarActionButton} ${classes.anchorBarActionButtonExpandable} ${\n            showBothActions ? classes.anchorBarActionPinnableAndExandable : ''\n          }`}\n          data-ui5wcr-object-page-header-action=\"\"\n        />\n      )}\n      {shouldRenderHeaderPinnableButton && (\n        <ToggleButton\n          icon=\"pushpin-off\"\n          pressed={headerPinned}\n          onClick={onPinHeader}\n          className={`${classes.anchorBarActionButton} ${classes.anchorBarActionButtonPinnable} ${\n            showBothActions ? classes.anchorBarActionPinnableAndExandable : ''\n          }`}\n          data-ui5wcr-object-page-header-action=\"\"\n        />\n      )}\n      {createPortal(\n        <Popover placementType={PlacementType.Bottom} noArrow ref={popoverRef} onAfterClose={stopPropagation}>\n          <List onItemClick={onSubSectionClick}>\n            {popoverContent?.props?.children\n              .filter((item) => item.props && item.props.isSubSection)\n              .map((item) => (\n                <StandardListItem key={item.props.id} data-key={item.props.id}>\n                  {item.props.title}\n                </StandardListItem>\n              ))}\n          </List>\n        </Popover>,\n        document.body\n      )}\n    </section>\n  );\n});\n\nObjectPageAnchorBar.displayName = 'ObjectPageAnchorBar';\n\nexport { ObjectPageAnchorBar };\n","import { AvatarSize } from '@ui5/webcomponents-react/lib/AvatarSize';\nimport { FlexBox } from '@ui5/webcomponents-react/lib/FlexBox';\nimport { FlexBoxDirection } from '@ui5/webcomponents-react/lib/FlexBoxDirection';\nimport { Label } from '@ui5/webcomponents-react/lib/Label';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport { Toolbar } from '@ui5/webcomponents-react/lib/Toolbar';\nimport { ToolbarDesign } from '@ui5/webcomponents-react/lib/ToolbarDesign';\nimport { ToolbarSpacer } from '@ui5/webcomponents-react/lib/ToolbarSpacer';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/lib/ToolbarStyle';\nimport React, { CSSProperties, forwardRef, ReactElement, ReactNode, RefObject, useMemo } from 'react';\nimport { safeGetChildrenArray } from './ObjectPageUtils';\n\ninterface Props {\n  image: string | ReactElement;\n  imageShapeCircle: boolean;\n  classes: any;\n  showTitleInHeaderContent: boolean;\n  headerContentProp: ReactElement;\n  breadcrumbs: ReactNode;\n  keyInfos: ReactNode;\n  title: string;\n  subTitle: string;\n  headerPinned: boolean;\n  topHeaderHeight: number;\n  headerActions: ReactElement<unknown>[];\n}\n\nexport const ObjectPageHeader = forwardRef((props: Props, ref: RefObject<HTMLDivElement>) => {\n  const {\n    image,\n    classes,\n    imageShapeCircle,\n    showTitleInHeaderContent,\n    headerContentProp,\n    breadcrumbs,\n    title,\n    subTitle,\n    keyInfos,\n    headerPinned,\n    topHeaderHeight,\n    headerActions\n  } = props;\n\n  const avatar = useMemo(() => {\n    if (!image) {\n      return null;\n    }\n\n    if (typeof image === 'string') {\n      return (\n        <span\n          className={classes.headerImage}\n          style={{ borderRadius: imageShapeCircle ? '50%' : 0, overflow: 'hidden' }}\n        >\n          <img src={image} className={classes.image} alt=\"Company Logo\" />\n        </span>\n      );\n    } else {\n      return React.cloneElement(image, {\n        size: AvatarSize.L,\n        className: image.props?.className ? `${classes.headerImage} ${image.props?.className}` : classes.headerImage\n      } as unknown);\n    }\n  }, [image, classes.headerImage, classes.image, imageShapeCircle]);\n\n  const headerStyles = useMemo<CSSProperties>(() => {\n    if (headerPinned) {\n      return {\n        top: `${topHeaderHeight}px`,\n        zIndex: 1\n      };\n    }\n\n    return null;\n  }, [headerPinned, topHeaderHeight]);\n\n  let renderedHeaderContent = (\n    <>\n      {avatar}\n      {headerContentProp && <span className={classes.headerCustomContent}>{headerContentProp}</span>}\n    </>\n  );\n\n  if (showTitleInHeaderContent) {\n    let firstElement;\n    let contents = [];\n\n    if (headerContentProp?.type === React.Fragment) {\n      [firstElement, ...contents] = safeGetChildrenArray(headerContentProp.props.children);\n    } else {\n      firstElement = headerContentProp;\n    }\n    renderedHeaderContent = (\n      <>\n        <FlexBox>\n          {avatar}\n          <FlexBox direction={FlexBoxDirection.Column}>\n            <div>{breadcrumbs}</div>\n            <FlexBox>\n              <FlexBox direction={FlexBoxDirection.Column}>\n                <Title level={TitleLevel.H3} className={classes.title}>\n                  {title}\n                </Title>\n                <Label className={classes.subTitle}>{subTitle}</Label>\n                <span> {firstElement}</span>\n              </FlexBox>\n              <FlexBox>\n                {contents.map((c, index) => (\n                  <div key={`customContent-${index}`} className={classes.headerCustomContentItem}>\n                    {c}\n                  </div>\n                ))}\n              </FlexBox>\n              <div className={classes.keyInfos}>{keyInfos}</div>\n            </FlexBox>\n          </FlexBox>\n          <Toolbar toolbarStyle={ToolbarStyle.Clear} design={ToolbarDesign.Transparent}>\n            <ToolbarSpacer />\n            {headerActions}\n          </Toolbar>\n        </FlexBox>\n      </>\n    );\n  }\n\n  return (\n    <div style={headerStyles} className={classes.contentHeader} ref={ref}>\n      {renderedHeaderContent}\n    </div>\n  );\n});\n\nObjectPageHeader.displayName = 'ObjectPageHeader';\n","import { useEffect, useState } from 'react';\n\ndeclare const ResizeObserver;\n\nexport const useObserveHeights = (objectPage, topHeader, headerContentRef, anchorBarRef, { noHeader }) => {\n  const [topHeaderHeight, setTopHeaderHeight] = useState(0);\n  const [headerContentHeight, setHeaderContentHeight] = useState(0);\n  const [isIntersecting, setIsIntersecting] = useState(true);\n\n  useEffect(() => {\n    const headerIntersectionObserver = new IntersectionObserver(\n      ([header]) => {\n        if (header.isIntersecting) {\n          setIsIntersecting(true);\n          setHeaderContentHeight((header.target as HTMLElement).offsetHeight);\n        } else {\n          setIsIntersecting(false);\n          setHeaderContentHeight(0);\n        }\n      },\n      { rootMargin: `-${topHeaderHeight}px 0px 0px 0px`, root: objectPage.current, threshold: 0.3 }\n    );\n\n    if (headerContentRef.current) {\n      headerIntersectionObserver.observe(headerContentRef.current);\n    }\n\n    return () => {\n      headerIntersectionObserver.disconnect();\n    };\n  }, [topHeaderHeight, setHeaderContentHeight, headerContentRef, setIsIntersecting]);\n\n  // top header\n  useEffect(() => {\n    const headerContentResizeObserver = new ResizeObserver(([header]) => {\n      setTopHeaderHeight(header?.contentRect?.height ?? 0);\n    });\n    if (topHeader.current) {\n      headerContentResizeObserver.observe(topHeader.current);\n    }\n    return () => {\n      headerContentResizeObserver.disconnect();\n    };\n  }, [topHeader.current, setTopHeaderHeight]);\n\n  // header content\n  useEffect(() => {\n    const headerContentResizeObserver = new ResizeObserver(([headerContent]) => {\n      if (isIntersecting) {\n        setHeaderContentHeight(headerContent?.contentRect?.height ?? 0);\n      }\n    });\n\n    if (headerContentRef.current) {\n      headerContentResizeObserver.observe(headerContentRef.current);\n    }\n    return () => {\n      headerContentResizeObserver.disconnect();\n    };\n  }, [headerContentRef.current, setHeaderContentHeight, isIntersecting]);\n\n  const anchorBarHeight = anchorBarRef.current?.offsetHeight ?? 33;\n  const totalHeaderHeight = (noHeader ? 0 : topHeaderHeight + headerContentHeight) + anchorBarHeight;\n\n  return { topHeaderHeight, headerContentHeight, anchorBarHeight, totalHeaderHeight };\n};\n","import { createComponentStyles } from '@ui5/webcomponents-react-base/lib/createComponentStyles';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/lib/useConsolidatedRef';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/lib/usePassThroughHtmlProps';\nimport { enrichEventWithDetails, getScrollBarWidth } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { FlexBox } from '@ui5/webcomponents-react/lib/FlexBox';\nimport { FlexBoxAlignItems } from '@ui5/webcomponents-react/lib/FlexBoxAlignItems';\nimport { FlexBoxDirection } from '@ui5/webcomponents-react/lib/FlexBoxDirection';\nimport { GlobalStyleClasses } from '@ui5/webcomponents-react/lib/GlobalStyleClasses';\nimport { Label } from '@ui5/webcomponents-react/lib/Label';\nimport { ObjectPageMode } from '@ui5/webcomponents-react/lib/ObjectPageMode';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport { Toolbar } from '@ui5/webcomponents-react/lib/Toolbar';\nimport { ToolbarDesign } from '@ui5/webcomponents-react/lib/ToolbarDesign';\nimport { ToolbarSpacer } from '@ui5/webcomponents-react/lib/ToolbarSpacer';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/lib/ToolbarStyle';\nimport { CommonProps } from '@ui5/webcomponents-react/interfaces/CommonProps';\nimport debounce from 'lodash/debounce';\nimport React, {\n  ComponentType,\n  FC,\n  forwardRef,\n  ReactElement,\n  ReactNode,\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { ObjectPageSectionPropTypes } from '../ObjectPageSection';\nimport { ObjectPageSubSectionPropTypes } from '../ObjectPageSubSection';\nimport { CollapsedAvatar } from './CollapsedAvatar';\nimport styles, { ObjectPageCssVariables } from './ObjectPage.jss';\nimport { ObjectPageAnchorBar } from './ObjectPageAnchorBar';\nimport { ObjectPageHeader } from './ObjectPageHeader';\nimport {\n  extractSectionIdFromHtmlId,\n  getLastObjectPageSection,\n  getSectionById,\n  safeGetChildrenArray\n} from './ObjectPageUtils';\nimport { useObserveHeights } from './useObserveHeights';\n\ndeclare const ResizeObserver;\n\nconst SCROLL_BAR_WIDTH = 12;\n\nexport interface ObjectPagePropTypes extends CommonProps {\n  title?: string;\n  subTitle?: string;\n  image?: string | ReactElement<unknown>;\n  headerActions?: ReactElement<unknown>[];\n  headerContent?: ReactNode;\n  children?: ReactElement<ObjectPageSectionPropTypes> | ReactElement<ObjectPageSectionPropTypes>[];\n\n  selectedSectionId?: string;\n  selectedSubSectionId?: string;\n  onSelectedSectionChanged?: (\n    event: CustomEvent<{ selectedSectionIndex: number; selectedSectionId: string; section: ComponentType }>\n  ) => void;\n\n  breadcrumbs?: ReactNode;\n  keyInfos?: ReactNode;\n\n  // appearance\n  alwaysShowContentHeader?: boolean;\n  showTitleInHeaderContent?: boolean;\n  imageShapeCircle?: boolean;\n  mode?: ObjectPageMode;\n  noHeader?: boolean;\n  showHideHeaderButton?: boolean;\n  headerContentPinnable?: boolean;\n}\n\nconst useStyles = createComponentStyles(styles, { name: 'ObjectPage' });\n\nconst ObjectPage: FC<ObjectPagePropTypes> = forwardRef((props: ObjectPagePropTypes, ref: RefObject<HTMLDivElement>) => {\n  const {\n    title = '',\n    image = null,\n    subTitle = '',\n    headerActions = [],\n    mode = ObjectPageMode.Default,\n    imageShapeCircle = false,\n    className,\n    style,\n    tooltip,\n    slot,\n    showHideHeaderButton = false,\n    children,\n    onSelectedSectionChanged = () => {\n      /* noop */\n    },\n    selectedSectionId,\n    noHeader = false,\n    alwaysShowContentHeader,\n    showTitleInHeaderContent,\n    headerContentPinnable,\n    headerContent,\n    breadcrumbs,\n    keyInfos\n  } = props;\n\n  const firstSectionId = safeGetChildrenArray<ReactElement>(children)[0]?.props?.id;\n\n  const [internalSelectedSectionId, setInternalSelectedSectionId] = useState(selectedSectionId ?? firstSectionId);\n  const [selectedSubSectionId, setSelectedSubSectionId] = useState(props.selectedSubSectionId);\n  const [headerPinned, setHeaderPinned] = useState(alwaysShowContentHeader);\n  const isProgrammaticallyScrolled = useRef(false);\n\n  const objectPageRef: RefObject<HTMLDivElement> = useConsolidatedRef(ref);\n  const topHeaderRef: RefObject<HTMLDivElement> = useRef();\n  const headerContentRef: RefObject<HTMLDivElement> = useRef();\n  const anchorBarRef: RefObject<HTMLDivElement> = useRef();\n\n  const [scrollbarWidth, setScrollbarWidth] = useState(SCROLL_BAR_WIDTH);\n  const isMounted = useRef(false);\n\n  // observe heights of header parts\n  const { topHeaderHeight, headerContentHeight, anchorBarHeight, totalHeaderHeight } = useObserveHeights(\n    objectPageRef,\n    topHeaderRef,\n    headerContentRef,\n    anchorBarRef,\n    { noHeader }\n  );\n\n  // *****\n  // SECTION SELECTION\n  // ****\n\n  const scrollToSection = useCallback(\n    (sectionId) => {\n      if (!sectionId) {\n        return;\n      }\n      if (firstSectionId === sectionId) {\n        objectPageRef.current.scrollTo({ top: 0, behavior: 'smooth' });\n      } else {\n        const childOffset = objectPageRef.current.querySelector<HTMLElement>(`#ObjectPageSection-${sectionId}`)\n          ?.offsetTop;\n        if (!isNaN(childOffset)) {\n          objectPageRef.current.scrollTo({\n            top: childOffset - topHeaderHeight - anchorBarHeight - (headerPinned ? headerContentHeight : 0) + 45,\n            behavior: 'smooth'\n          });\n        }\n      }\n      isProgrammaticallyScrolled.current = false;\n    },\n    [firstSectionId, objectPageRef, topHeaderHeight, anchorBarHeight, headerPinned, headerContentHeight]\n  );\n\n  // change selected section when prop is changed (external change)\n  useEffect(() => {\n    isProgrammaticallyScrolled.current = true;\n    setInternalSelectedSectionId(selectedSectionId ?? firstSectionId);\n  }, [selectedSectionId, isProgrammaticallyScrolled, firstSectionId]);\n\n  // section was selected by clicking on the anchor bar buttons\n  const handleOnSectionSelected = useCallback(\n    (e) => {\n      isProgrammaticallyScrolled.current = true;\n      const newSelectionSection = e.detail.props?.id;\n      setInternalSelectedSectionId((oldSelectedSection) => {\n        if (oldSelectedSection === newSelectionSection) {\n          scrollToSection(newSelectionSection);\n        }\n        return newSelectionSection;\n      });\n      fireOnSelectedChangedEvent(e);\n    },\n    [onSelectedSectionChanged, setInternalSelectedSectionId, isProgrammaticallyScrolled, scrollToSection]\n  );\n\n  // do internal scrolling\n  useEffect(() => {\n    if (!isMounted.current) return;\n\n    if (mode === ObjectPageMode.Default && isProgrammaticallyScrolled.current === true) {\n      scrollToSection(internalSelectedSectionId);\n    }\n  }, [internalSelectedSectionId, isMounted, mode, isProgrammaticallyScrolled, scrollToSection]);\n\n  // Scrolling for Sub Section Selection\n  useEffect(() => {\n    if (selectedSubSectionId && isProgrammaticallyScrolled.current === true) {\n      const childOffset = objectPageRef.current.querySelector<HTMLElement>(\n        `div[id=\"ObjectPageSubSection-${selectedSubSectionId}\"]`\n      )?.offsetTop;\n      if (!isNaN(childOffset)) {\n        objectPageRef.current.scrollTo({\n          top: childOffset - topHeaderHeight - anchorBarHeight - (headerPinned ? headerContentHeight : 0) + 45,\n          behavior: 'smooth'\n        });\n      }\n\n      isProgrammaticallyScrolled.current = false;\n    }\n  }, [\n    selectedSubSectionId,\n    isProgrammaticallyScrolled,\n    topHeaderHeight,\n    anchorBarHeight,\n    headerPinned,\n    headerContentHeight\n  ]);\n\n  useEffect(() => {\n    setHeaderPinned(alwaysShowContentHeader);\n  }, [setHeaderPinned, alwaysShowContentHeader]);\n\n  const classes = useStyles();\n\n  useEffect(() => {\n    setSelectedSubSectionId(props.selectedSubSectionId);\n    if (props.selectedSubSectionId) {\n      isProgrammaticallyScrolled.current = true;\n      if (mode === ObjectPageMode.IconTabBar) {\n        let sectionId;\n        safeGetChildrenArray<ReactElement<ObjectPageSectionPropTypes>>(children).forEach((section) => {\n          if (React.isValidElement(section) && section.props && section.props.children) {\n            safeGetChildrenArray(section.props.children).forEach(\n              (subSection: ReactElement<ObjectPageSubSectionPropTypes>) => {\n                if (\n                  React.isValidElement(subSection) &&\n                  subSection.props &&\n                  subSection.props.id === props.selectedSubSectionId\n                ) {\n                  sectionId = section.props?.id;\n                }\n              }\n            );\n          }\n        });\n\n        if (sectionId) {\n          setInternalSelectedSectionId(sectionId);\n        }\n      }\n    }\n  }, [\n    props.selectedSubSectionId,\n    setInternalSelectedSectionId,\n    setSelectedSubSectionId,\n    children,\n    mode,\n    isProgrammaticallyScrolled\n  ]);\n\n  useEffect(() => {\n    const fillerDivObserver = new ResizeObserver(() => {\n      const maxHeight = Math.min(objectPageRef.current.clientHeight, window.innerHeight);\n      const availableScrollHeight = maxHeight - totalHeaderHeight;\n      const lastSectionDomRef = getLastObjectPageSection(objectPageRef);\n      const subSections = lastSectionDomRef.querySelectorAll('[id^=\"ObjectPageSubSection\"]');\n\n      let lastSubSectionHeight;\n      if (subSections.length > 0) {\n        lastSubSectionHeight = (subSections[subSections.length - 1] as HTMLElement).offsetHeight;\n      } else {\n        lastSubSectionHeight =\n          lastSectionDomRef.offsetHeight -\n          lastSectionDomRef.querySelector<HTMLElement>(\"[role='heading']\").offsetHeight;\n      }\n\n      let heightDiff = availableScrollHeight - lastSubSectionHeight;\n\n      heightDiff = heightDiff > 0 ? heightDiff : 0;\n      objectPageRef.current.style.setProperty(ObjectPageCssVariables.lastSectionMargin, `${heightDiff}px`);\n    });\n\n    fillerDivObserver.observe(objectPageRef.current);\n\n    return () => {\n      fillerDivObserver.disconnect();\n    };\n  }, [totalHeaderHeight, objectPageRef, children]);\n\n  const fireOnSelectedChangedEvent = debounce((e) => {\n    onSelectedSectionChanged(\n      enrichEventWithDetails(e, {\n        selectedSectionIndex: e.detail.index,\n        selectedSectionId: e.detail.props.id,\n        section: e.detail\n      })\n    );\n  }, 500);\n\n  const handleOnSubSectionSelected = useCallback(\n    (e) => {\n      isProgrammaticallyScrolled.current = true;\n      if (mode === ObjectPageMode.IconTabBar) {\n        const sectionId = e.detail.section.props?.id;\n        setInternalSelectedSectionId(sectionId);\n      }\n      const subSection = e.detail.subSection;\n      setSelectedSubSectionId(subSection.props.id);\n    },\n    [mode, setInternalSelectedSectionId, setSelectedSubSectionId, isProgrammaticallyScrolled]\n  );\n\n  const onToggleHeaderContentVisibility = useCallback(\n    (e) => {\n      const srcElement = e.target;\n      const shouldHideHeader = srcElement.icon === 'slim-arrow-up';\n      if (shouldHideHeader) {\n        objectPageRef.current.classList.add(classes.headerCollapsed);\n      } else {\n        objectPageRef.current.classList.remove(classes.headerCollapsed);\n      }\n\n      requestAnimationFrame(() => {\n        if (objectPageRef.current.scrollTop > 0 && !shouldHideHeader) {\n          const prevHeaderTop = headerContentRef.current.style.top;\n          headerContentRef.current.style.top = `${topHeaderHeight}px`;\n          const prevAnchorTop = anchorBarRef.current.style.top;\n          anchorBarRef.current.style.top = `${headerContentRef.current.offsetHeight + topHeaderHeight}px`;\n          objectPageRef.current.addEventListener(\n            'scroll',\n            (e) => {\n              if (prevHeaderTop ?? true) {\n                headerContentRef.current.style.top = prevHeaderTop;\n              } else {\n                headerContentRef.current.style.removeProperty('top');\n              }\n              if (prevAnchorTop ?? true) {\n                anchorBarRef.current.style.top = prevAnchorTop;\n              } else {\n                anchorBarRef.current.style.removeProperty('top');\n              }\n            },\n            { once: true }\n          );\n        }\n      });\n    },\n    [objectPageRef, classes.headerCollapsed, headerContentHeight, topHeaderHeight]\n  );\n\n  useEffect(() => {\n    requestAnimationFrame(() => {\n      const calculatedScrollBarWidth = getScrollBarWidth();\n      if (calculatedScrollBarWidth && calculatedScrollBarWidth !== 0 && calculatedScrollBarWidth !== SCROLL_BAR_WIDTH) {\n        setScrollbarWidth(calculatedScrollBarWidth);\n      }\n    });\n    isMounted.current = true;\n  }, [isMounted, setScrollbarWidth]);\n\n  const objectPageClasses = StyleClassHelper.of(classes.objectPage, GlobalStyleClasses.sapScrollBar);\n  if (className) {\n    objectPageClasses.put(className);\n  }\n\n  if (showTitleInHeaderContent) {\n    objectPageClasses.put(classes.titleInHeaderContent);\n  }\n\n  if (mode === ObjectPageMode.IconTabBar) {\n    objectPageClasses.put(classes.iconTabBarMode);\n  }\n\n  if (noHeader) {\n    objectPageClasses.put(classes.noHeader);\n  }\n\n  const scrollBarWidthPadding = useMemo(() => {\n    return {\n      paddingRight: `${scrollbarWidth}px`\n    };\n  }, [scrollbarWidth]);\n\n  const passThroughProps = usePassThroughHtmlProps(props, ['onSelectedSectionChanged']);\n\n  useEffect(() => {\n    const objectPageHeight = objectPageRef.current?.clientHeight ?? 1000;\n    const marginBottom = objectPageHeight - totalHeaderHeight;\n    const rootMargin = `-${totalHeaderHeight}px 0px -${marginBottom < 0 ? 0 : marginBottom}px 0px`;\n    const observer = new IntersectionObserver(\n      (elements) => {\n        elements.forEach((section) => {\n          if (section.isIntersecting && isProgrammaticallyScrolled.current === false) {\n            setInternalSelectedSectionId(extractSectionIdFromHtmlId(section.target.id));\n          }\n        });\n      },\n      {\n        root: objectPageRef.current,\n        rootMargin,\n        threshold: [0]\n      }\n    );\n\n    objectPageRef.current.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]').forEach((el) => {\n      observer.observe(el);\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [objectPageRef, children, totalHeaderHeight, setInternalSelectedSectionId, isProgrammaticallyScrolled]);\n\n  return (\n    <div\n      data-component-name=\"ObjectPage\"\n      slot={slot}\n      className={objectPageClasses.toString()}\n      style={style}\n      ref={objectPageRef}\n      title={tooltip}\n      {...passThroughProps}\n    >\n      <header\n        ref={topHeaderRef}\n        role=\"banner\"\n        aria-roledescription=\"Object Page header\"\n        style={scrollBarWidthPadding}\n        className={classes.header}\n      >\n        <header className={classes.titleBar}>\n          {(!showTitleInHeaderContent || headerContentHeight === 0) && (\n            <FlexBox alignItems={FlexBoxAlignItems.Center}>\n              {image && headerContentHeight === 0 && (\n                <div className={classes.avatar}>\n                  <CollapsedAvatar image={image} imageShapeCircle={imageShapeCircle} />\n                </div>\n              )}\n              <FlexBox direction={FlexBoxDirection.Column} className={classes.container}>\n                {breadcrumbs}\n                <FlexBox alignItems={FlexBoxAlignItems.Baseline}>\n                  <Title level={TitleLevel.H3} className={classes.title}>\n                    {title}\n                  </Title>\n                  <Label className={classes.subTitle}>{subTitle}</Label>\n                  <div className={classes.keyInfos}>{keyInfos}</div>\n                </FlexBox>\n              </FlexBox>\n              <Toolbar toolbarStyle={ToolbarStyle.Clear} design={ToolbarDesign.Transparent}>\n                <ToolbarSpacer />\n                {headerActions}\n              </Toolbar>\n            </FlexBox>\n          )}\n        </header>\n      </header>\n      <ObjectPageHeader\n        headerActions={headerActions}\n        image={image}\n        classes={classes}\n        imageShapeCircle={imageShapeCircle}\n        showTitleInHeaderContent={showTitleInHeaderContent}\n        headerContentProp={headerContent as ReactElement}\n        breadcrumbs={breadcrumbs}\n        keyInfos={keyInfos}\n        title={title}\n        subTitle={subTitle}\n        headerPinned={headerPinned}\n        topHeaderHeight={topHeaderHeight}\n        ref={headerContentRef}\n      />\n      <ObjectPageAnchorBar\n        sections={children}\n        selectedSectionId={internalSelectedSectionId}\n        handleOnSectionSelected={handleOnSectionSelected}\n        handleOnSubSectionSelected={handleOnSubSectionSelected}\n        headerContentPinnable={headerContentPinnable}\n        showHideHeaderButton={showHideHeaderButton && !noHeader}\n        headerPinned={headerPinned}\n        setHeaderPinned={setHeaderPinned}\n        headerContentHeight={headerContentHeight}\n        style={{ top: noHeader ? 0 : headerPinned ? topHeaderHeight + headerContentHeight : topHeaderHeight }}\n        onToggleHeaderContentVisibility={onToggleHeaderContentVisibility}\n        ref={anchorBarRef}\n        className={classes.anchorBar}\n      />\n      {mode === ObjectPageMode.IconTabBar ? getSectionById(children, internalSelectedSectionId) : children}\n    </div>\n  );\n});\n\nObjectPage.displayName = 'ObjectPage';\n\nexport { ObjectPage };\n"],"names":["styles","base","margin","opacity","hidden","visible","transition","imageContainer","display","verticalAlign","maxHeight","width","maxWidth","image","height","useStyles","createComponentStyles","name","CollapsedAvatar","props","imageShapeCircle","classes","useState","isMounted","setIsMounted","domRef","useRef","avatarContent","useMemo","borderRadius","overflow","React","cloneElement","size","AvatarSize","S","className","useEffect","containerClasses","StyleClassHelper","of","put","valueOf","ObjectPageCssVariables","anchorFloat","anchorLeft","anchorRight","avatarMargin","lastSectionMargin","objectPage","position","whiteSpace","fontFamily","ThemingParameters","sapFontFamily","backgroundColor","sapBackgroundColor","overflowX","overflowY","marginBottom","iconTabBarMode","noHeader","headerCollapsed","header","flexShrink","sapObjectHeader_Background","top","zIndex","contentHeader","paddingBottom","paddingLeft","anchorBar","titleBar","padding","container","flex","boxSizing","title","subTitle","actions","paddingTop","right","left","marginLeft","titleInHeaderContent","alignSelf","marginRight","headerCustomContent","lineHeight","clear","headerCustomContentItem","headerImage","minWidth","keyInfos","flexDirection","avatar","stopPropagation","e","stopImmediatePropagation","StandardListItem","withWebComponent","displayName","defaultProps","iconEnd","infoState","ValueState","None","type","ListItemTypes","Active","selected","ObjectPageAnchorButton","ref","section","index","onShowSubSectionPopover","subSectionsAvailable","children","filter","subSections","item","isSubSection","length","element","current","parentElement","shadowRoot","querySelector","icon","document","createElement","style","pointerEvents","addEventListener","preventDefault","appendChild","id","safeGetChildrenArray","Children","toArray","Boolean","getSectionById","sections","find","objectPageSection","extractSectionIdFromHtmlId","replace","getLastObjectPageSection","querySelectorAll","addCustomCSS","anchorBarStyles","anchorBarActionButton","content","backgroundImage","sapHighlightColor","anchorBarActionButtonExpandable","anchorBarActionButtonPinnable","anchorBarActionPinnableAndExandable","createUseStyles","ObjectPageAnchorBar","forwardRef","selectedSectionId","handleOnSectionSelected","handleOnSubSectionSelected","showHideHeaderButton","headerContentPinnable","onToggleHeaderContentVisibility","headerPinned","setHeaderPinned","headerContentHeight","shouldRenderHideHeaderButton","shouldRenderHeaderPinnableButton","showBothActions","popoverContent","setPopoverContent","popoverRef","onPinHeader","useCallback","target","pressed","onTabItemSelect","event","detail","tab","dataset","sectionId","el","enrichEventWithDetails","openBy","onSubSectionClick","selectedId","key","subSection","close","map","createPortal","PlacementType","Bottom","body","ObjectPageHeader","showTitleInHeaderContent","headerContentProp","breadcrumbs","topHeaderHeight","headerActions","L","headerStyles","renderedHeaderContent","firstElement","contents","Fragment","FlexBoxDirection","Column","TitleLevel","H3","c","ToolbarStyle","Clear","ToolbarDesign","Transparent","useObserveHeights","topHeader","headerContentRef","anchorBarRef","setTopHeaderHeight","setHeaderContentHeight","isIntersecting","setIsIntersecting","headerIntersectionObserver","IntersectionObserver","offsetHeight","rootMargin","root","threshold","observe","disconnect","headerContentResizeObserver","ResizeObserver","contentRect","headerContent","anchorBarHeight","totalHeaderHeight","SCROLL_BAR_WIDTH","ObjectPage","mode","ObjectPageMode","Default","tooltip","slot","onSelectedSectionChanged","alwaysShowContentHeader","firstSectionId","internalSelectedSectionId","setInternalSelectedSectionId","selectedSubSectionId","setSelectedSubSectionId","isProgrammaticallyScrolled","objectPageRef","useConsolidatedRef","topHeaderRef","scrollbarWidth","setScrollbarWidth","scrollToSection","scrollTo","behavior","childOffset","offsetTop","isNaN","newSelectionSection","oldSelectedSection","fireOnSelectedChangedEvent","IconTabBar","forEach","isValidElement","fillerDivObserver","Math","min","clientHeight","window","innerHeight","availableScrollHeight","lastSectionDomRef","lastSubSectionHeight","heightDiff","setProperty","debounce","selectedSectionIndex","srcElement","shouldHideHeader","classList","add","remove","requestAnimationFrame","scrollTop","prevHeaderTop","prevAnchorTop","removeProperty","once","calculatedScrollBarWidth","getScrollBarWidth","objectPageClasses","GlobalStyleClasses","sapScrollBar","scrollBarWidthPadding","paddingRight","passThroughProps","usePassThroughHtmlProps","objectPageHeight","observer","elements","toString","FlexBoxAlignItems","Center","Baseline"],"mappings":"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"}