{"version":3,"file":"VariantManagement.js","sources":["../src/internal/stopPropagation.ts","../src/components/VariantManagement/index.tsx"],"sourcesContent":["export const stopPropagation = (e) => {\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n};\n","import '@ui5/webcomponents-icons/dist/icons/navigation-down-arrow';\nimport { createComponentStyles } from '@ui5/webcomponents-react-base/lib/createComponentStyles';\nimport { useI18nText } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/lib/usePassThroughHtmlProps';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { CANCEL } from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/lib/ButtonDesign';\nimport { List } from '@ui5/webcomponents-react/lib/List';\nimport { ListItemTypes } from '@ui5/webcomponents-react/lib/ListItemTypes';\nimport { ListMode } from '@ui5/webcomponents-react/lib/ListMode';\nimport { PlacementType } from '@ui5/webcomponents-react/lib/PlacementType';\nimport { ResponsivePopover } from '@ui5/webcomponents-react/lib/ResponsivePopover';\nimport { StandardListItem } from '@ui5/webcomponents-react/lib/StandardListItem';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport React, { FC, forwardRef, Ref, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { CommonProps } from '../../interfaces/CommonProps';\nimport { Ui5ResponsivePopoverDomRef } from '../../interfaces/Ui5ResponsivePopoverDomRef';\nimport { stopPropagation } from '../../internal/stopPropagation';\n\nexport interface VariantItem {\n  key: string;\n  label: string;\n}\n\nexport interface VariantManagementPropTypes extends Omit<CommonProps, 'onSelect'> {\n  /**\n   * Determines on which side the VariantManagement popover is placed at.\n   */\n  placement?: PlacementType;\n  /**\n   * Describes the title of the VariantManagement popover.\n   */\n  popupTitle?: string;\n  /**\n   * Selects the <code>variantItem</code> by its key.\n   */\n  selectedKey?: string;\n  /**\n   * Defines whether the VariantManagement should be closed if an item was selected.\n   */\n  closeOnItemSelect?: boolean;\n  /**\n   * Variant items displayed by the VariantManagement component.\n   */\n  variantItems: VariantItem[];\n  /**\n   * Describes the <code>heading</code> level of the variants.\n   */\n  level?: TitleLevel;\n  /**\n   * Defines whether the VariantManagement is disabled.\n   */\n  disabled?: boolean;\n  /**\n   * Fired after a variant has been selected.\n   */\n  onSelect?: (event: CustomEvent<{ item: HTMLElement; selectedItem: VariantItem }>) => void;\n}\n\nconst styles = {\n  container: {\n    display: 'flex',\n    alignItems: 'center',\n    textAlign: 'center',\n    cursor: 'pointer'\n  },\n  title: {\n    cursor: 'pointer',\n    color: ThemingParameters.sapButton_TextColor,\n    '&:hover': {\n      color: ThemingParameters.sapButton_Hover_TextColor\n    }\n  },\n  disabled: {\n    '& $title': {\n      color: ThemingParameters.sapGroup_TitleTextColor,\n      cursor: 'default',\n      '&:hover': {\n        color: 'ThemingParameters.sapGroup_TitleTextColor'\n      }\n    }\n  },\n  footer: {\n    margin: '0.4375rem 1rem 0.4325rem auto'\n  }\n};\n\nconst useStyles = createComponentStyles(styles, { name: 'VariantManagement' });\n\n/**\n * The `VariantManagement` component can be used to manage variants, such as FilterBar variants or AnalyticalTable variants.\n */\nconst VariantManagement: FC<VariantManagementPropTypes> = forwardRef(\n  (props: VariantManagementPropTypes, ref: Ref<HTMLDivElement>) => {\n    const {\n      variantItems,\n      popupTitle,\n      className,\n      style,\n      tooltip,\n      placement,\n      level,\n      onSelect,\n      closeOnItemSelect,\n      disabled\n    } = props;\n\n    const classes = useStyles();\n    const popoverRef = useRef<Ui5ResponsivePopoverDomRef>(null);\n\n    const [selectedKey, setSelectedKey] = useState(props.selectedKey ?? variantItems?.[0]?.key ?? null);\n\n    useEffect(() => {\n      if (props.selectedKey) {\n        setSelectedKey(props.selectedKey);\n      }\n    }, [props.selectedKey, setSelectedKey]);\n\n    const handleCancelButtonClick = useCallback(() => {\n      popoverRef.current.close();\n    }, [popoverRef]);\n\n    const handleOpenVariantManagement = useCallback(\n      (e) => {\n        popoverRef.current.open(e.target);\n      },\n      [popoverRef]\n    );\n\n    const [cancel] = useI18nText('@ui5/webcomponents-react', CANCEL);\n    const footerButtons = useMemo(() => {\n      return (\n        <Button className={classes.footer} onClick={handleCancelButtonClick} design={ButtonDesign.Emphasized}>\n          {cancel}\n        </Button>\n      );\n    }, [classes.footer, handleCancelButtonClick, cancel]);\n\n    const getItemByKey = (key) => {\n      return variantItems?.find((item) => item.key === key);\n    };\n\n    const selectedItem = getItemByKey(selectedKey) || variantItems[0];\n\n    const variantManagementClasses = StyleClassHelper.of(classes.container);\n\n    if (disabled) {\n      variantManagementClasses.put(classes.disabled);\n    }\n\n    if (className) {\n      variantManagementClasses.put(className);\n    }\n\n    const handleVariantItemSelect = useCallback(\n      (event) => {\n        const newSelectedKey = event.detail.item.dataset.key;\n        setSelectedKey(newSelectedKey);\n        onSelect(\n          enrichEventWithDetails(event, {\n            ...event.details,\n            selectedItem: getItemByKey(newSelectedKey) || variantItems[0]\n          })\n        );\n        if (closeOnItemSelect) {\n          handleCancelButtonClick();\n        }\n      },\n      [handleCancelButtonClick, closeOnItemSelect, selectedKey, variantItems, setSelectedKey]\n    );\n\n    const passThroughProps = usePassThroughHtmlProps(props, ['onSelect']);\n\n    if (!variantItems || variantItems.length < 1) {\n      return null;\n    }\n\n    return (\n      <div className={variantManagementClasses.valueOf()} style={style} title={tooltip} {...passThroughProps} ref={ref}>\n        <Title level={level} className={classes.title}>\n          {selectedItem.label}\n        </Title>\n        <Button\n          onClick={handleOpenVariantManagement}\n          design={ButtonDesign.Transparent}\n          icon=\"navigation-down-arrow\"\n          disabled={disabled}\n        />\n        {createPortal(\n          <ResponsivePopover\n            ref={popoverRef}\n            headerText={popupTitle}\n            placementType={placement}\n            footer={footerButtons}\n            onAfterClose={stopPropagation}\n          >\n            <List onItemClick={handleVariantItemSelect} mode={ListMode.SingleSelect}>\n              {variantItems.map((item) => (\n                <StandardListItem\n                  style={{ width: '300px' }}\n                  data-key={item.key}\n                  type={ListItemTypes.Active}\n                  key={item.key}\n                  selected={selectedKey === item.key}\n                >\n                  {item.label}\n                </StandardListItem>\n              ))}\n            </List>\n          </ResponsivePopover>,\n          document.body\n        )}\n      </div>\n    );\n  }\n);\n\nVariantManagement.defaultProps = {\n  popupTitle: 'Variants',\n  selectedKey: null,\n  onSelect: () => {},\n  closeOnItemSelect: true,\n  placement: PlacementType.Bottom,\n  level: TitleLevel.H4,\n  disabled: false,\n  variantItems: []\n};\nVariantManagement.displayName = 'VariantManagement';\n\nexport { VariantManagement };\n"],"names":["stopPropagation","e","stopImmediatePropagation","styles","container","display","alignItems","textAlign","cursor","title","color","ThemingParameters","sapButton_TextColor","sapButton_Hover_TextColor","disabled","sapGroup_TitleTextColor","footer","margin","useStyles","createComponentStyles","name","VariantManagement","forwardRef","props","ref","variantItems","popupTitle","className","style","tooltip","placement","level","onSelect","closeOnItemSelect","classes","popoverRef","useRef","useState","selectedKey","key","setSelectedKey","useEffect","handleCancelButtonClick","useCallback","current","close","handleOpenVariantManagement","open","target","useI18nText","CANCEL","cancel","footerButtons","useMemo","ButtonDesign","Emphasized","getItemByKey","find","item","selectedItem","variantManagementClasses","StyleClassHelper","of","put","handleVariantItemSelect","event","newSelectedKey","detail","dataset","enrichEventWithDetails","details","passThroughProps","usePassThroughHtmlProps","length","valueOf","label","Transparent","createPortal","ListMode","SingleSelect","map","width","ListItemTypes","Active","document","body","defaultProps","PlacementType","Bottom","TitleLevel","H4","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAO,IAAMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,CAAD,EAAO;AACpCA,EAAAA,CAAC,CAACD,eAAF;AACAC,EAAAA,CAAC,CAACC,wBAAF;AACD,CAHM;;ACgEP,IAAMC,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,OAAO,EAAE,MADA;AAETC,IAAAA,UAAU,EAAE,QAFH;AAGTC,IAAAA,SAAS,EAAE,QAHF;AAITC,IAAAA,MAAM,EAAE;AAJC,GADE;AAObC,EAAAA,KAAK,EAAE;AACLD,IAAAA,MAAM,EAAE,SADH;AAELE,IAAAA,KAAK,EAAEC,iBAAiB,CAACC,mBAFpB;AAGL,eAAW;AACTF,MAAAA,KAAK,EAAEC,iBAAiB,CAACE;AADhB;AAHN,GAPM;AAcbC,EAAAA,QAAQ,EAAE;AACR,gBAAY;AACVJ,MAAAA,KAAK,EAAEC,iBAAiB,CAACI,uBADf;AAEVP,MAAAA,MAAM,EAAE,SAFE;AAGV,iBAAW;AACTE,QAAAA,KAAK,EAAE;AADE;AAHD;AADJ,GAdG;AAuBbM,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE;AADF;AAvBK,CAAf;AA4BA,IAAMC,SAAS,GAAGC,qBAAqB,CAAChB,MAAD,EAAS;AAAEiB,EAAAA,IAAI,EAAE;AAAR,CAAT,CAAvC;AAEA;;;;IAGMC,iBAAiD,gBAAGC,UAAU,CAClE,UAACC,KAAD,EAAoCC,GAApC,EAAiE;AAAA;;AAAA,MAE7DC,YAF6D,GAY3DF,KAZ2D,CAE7DE,YAF6D;AAAA,MAG7DC,UAH6D,GAY3DH,KAZ2D,CAG7DG,UAH6D;AAAA,MAI7DC,SAJ6D,GAY3DJ,KAZ2D,CAI7DI,SAJ6D;AAAA,MAK7DC,KAL6D,GAY3DL,KAZ2D,CAK7DK,KAL6D;AAAA,MAM7DC,OAN6D,GAY3DN,KAZ2D,CAM7DM,OAN6D;AAAA,MAO7DC,SAP6D,GAY3DP,KAZ2D,CAO7DO,SAP6D;AAAA,MAQ7DC,KAR6D,GAY3DR,KAZ2D,CAQ7DQ,KAR6D;AAAA,MAS7DC,QAT6D,GAY3DT,KAZ2D,CAS7DS,QAT6D;AAAA,MAU7DC,iBAV6D,GAY3DV,KAZ2D,CAU7DU,iBAV6D;AAAA,MAW7DnB,QAX6D,GAY3DS,KAZ2D,CAW7DT,QAX6D;AAc/D,MAAMoB,OAAO,GAAGhB,SAAS,EAAzB;AACA,MAAMiB,UAAU,GAAGC,MAAM,CAA6B,IAA7B,CAAzB;;AAf+D,kBAiBzBC,QAAQ,+BAACd,KAAK,CAACe,WAAP,mEAAsBb,YAAtB,aAAsBA,YAAtB,yCAAsBA,YAAY,CAAG,CAAH,CAAlC,mDAAsB,eAAmBc,GAAzC,uCAAgD,IAAhD,CAjBiB;AAAA;AAAA,MAiBxDD,WAjBwD;AAAA,MAiB3CE,cAjB2C;;AAmB/DC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIlB,KAAK,CAACe,WAAV,EAAuB;AACrBE,MAAAA,cAAc,CAACjB,KAAK,CAACe,WAAP,CAAd;AACD;AACF,GAJQ,EAIN,CAACf,KAAK,CAACe,WAAP,EAAoBE,cAApB,CAJM,CAAT;AAMA,MAAME,uBAAuB,GAAGC,WAAW,CAAC,YAAM;AAChDR,IAAAA,UAAU,CAACS,OAAX,CAAmBC,KAAnB;AACD,GAF0C,EAExC,CAACV,UAAD,CAFwC,CAA3C;AAIA,MAAMW,2BAA2B,GAAGH,WAAW,CAC7C,UAAC1C,CAAD,EAAO;AACLkC,IAAAA,UAAU,CAACS,OAAX,CAAmBG,IAAnB,CAAwB9C,CAAC,CAAC+C,MAA1B;AACD,GAH4C,EAI7C,CAACb,UAAD,CAJ6C,CAA/C;;AA7B+D,qBAoC9Cc,WAAW,CAAC,0BAAD,EAA6BC,MAA7B,CApCmC;AAAA;AAAA,MAoCxDC,MApCwD;;AAqC/D,MAAMC,aAAa,GAAGC,OAAO,CAAC,YAAM;AAClC,wBACE,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAEnB,OAAO,CAAClB,MAA3B;AAAmC,MAAA,OAAO,EAAE0B,uBAA5C;AAAqE,MAAA,MAAM,EAAEY,YAAY,CAACC;AAA1F,OACGJ,MADH,CADF;AAKD,GAN4B,EAM1B,CAACjB,OAAO,CAAClB,MAAT,EAAiB0B,uBAAjB,EAA0CS,MAA1C,CAN0B,CAA7B;;AAQA,MAAMK,YAAY,GAAG,SAAfA,YAAe,CAACjB,GAAD,EAAS;AAC5B,WAAOd,YAAP,aAAOA,YAAP,uBAAOA,YAAY,CAAEgC,IAAd,CAAmB,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACnB,GAAL,KAAaA,GAAvB;AAAA,KAAnB,CAAP;AACD,GAFD;;AAIA,MAAMoB,YAAY,GAAGH,YAAY,CAAClB,WAAD,CAAZ,IAA6Bb,YAAY,CAAC,CAAD,CAA9D;AAEA,MAAMmC,wBAAwB,GAAGC,gBAAgB,CAACC,EAAjB,CAAoB5B,OAAO,CAAC9B,SAA5B,CAAjC;;AAEA,MAAIU,QAAJ,EAAc;AACZ8C,IAAAA,wBAAwB,CAACG,GAAzB,CAA6B7B,OAAO,CAACpB,QAArC;AACD;;AAED,MAAIa,SAAJ,EAAe;AACbiC,IAAAA,wBAAwB,CAACG,GAAzB,CAA6BpC,SAA7B;AACD;;AAED,MAAMqC,uBAAuB,GAAGrB,WAAW,CACzC,UAACsB,KAAD,EAAW;AACT,QAAMC,cAAc,GAAGD,KAAK,CAACE,MAAN,CAAaT,IAAb,CAAkBU,OAAlB,CAA0B7B,GAAjD;AACAC,IAAAA,cAAc,CAAC0B,cAAD,CAAd;AACAlC,IAAAA,QAAQ,CACNqC,sBAAsB,CAACJ,KAAD,kCACjBA,KAAK,CAACK,OADW;AAEpBX,MAAAA,YAAY,EAAEH,YAAY,CAACU,cAAD,CAAZ,IAAgCzC,YAAY,CAAC,CAAD;AAFtC,OADhB,CAAR;;AAMA,QAAIQ,iBAAJ,EAAuB;AACrBS,MAAAA,uBAAuB;AACxB;AACF,GAbwC,EAczC,CAACA,uBAAD,EAA0BT,iBAA1B,EAA6CK,WAA7C,EAA0Db,YAA1D,EAAwEe,cAAxE,CAdyC,CAA3C;AAiBA,MAAM+B,gBAAgB,GAAGC,uBAAuB,CAACjD,KAAD,EAAQ,CAAC,UAAD,CAAR,CAAhD;;AAEA,MAAI,CAACE,YAAD,IAAiBA,YAAY,CAACgD,MAAb,GAAsB,CAA3C,EAA8C;AAC5C,WAAO,IAAP;AACD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAEb,wBAAwB,CAACc,OAAzB,EAAhB;AAAoD,IAAA,KAAK,EAAE9C,KAA3D;AAAkE,IAAA,KAAK,EAAEC;AAAzE,KAAsF0C,gBAAtF;AAAwG,IAAA,GAAG,EAAE/C;AAA7G,mBACE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEO,KAAd;AAAqB,IAAA,SAAS,EAAEG,OAAO,CAACzB;AAAxC,KACGkD,YAAY,CAACgB,KADhB,CADF,eAIE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE7B,2BADX;AAEE,IAAA,MAAM,EAAEQ,YAAY,CAACsB,WAFvB;AAGE,IAAA,IAAI,EAAC,uBAHP;AAIE,IAAA,QAAQ,EAAE9D;AAJZ,IAJF,eAUG+D,YAAY,eACX,oBAAC,iBAAD;AACE,IAAA,GAAG,EAAE1C,UADP;AAEE,IAAA,UAAU,EAAET,UAFd;AAGE,IAAA,aAAa,EAAEI,SAHjB;AAIE,IAAA,MAAM,EAAEsB,aAJV;AAKE,IAAA,YAAY,EAAEpD;AALhB,kBAOE,oBAAC,IAAD;AAAM,IAAA,WAAW,EAAEgE,uBAAnB;AAA4C,IAAA,IAAI,EAAEc,QAAQ,CAACC;AAA3D,KACGtD,YAAY,CAACuD,GAAb,CAAiB,UAACtB,IAAD;AAAA,wBAChB,oBAAC,gBAAD;AACE,MAAA,KAAK,EAAE;AAAEuB,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,kBAAUvB,IAAI,CAACnB,GAFjB;AAGE,MAAA,IAAI,EAAE2C,aAAa,CAACC,MAHtB;AAIE,MAAA,GAAG,EAAEzB,IAAI,CAACnB,GAJZ;AAKE,MAAA,QAAQ,EAAED,WAAW,KAAKoB,IAAI,CAACnB;AALjC,OAOGmB,IAAI,CAACiB,KAPR,CADgB;AAAA,GAAjB,CADH,CAPF,CADW,EAsBXS,QAAQ,CAACC,IAtBE,CAVf,CADF;AAqCD,CA1HiE;AA6HpEhE,iBAAiB,CAACiE,YAAlB,GAAiC;AAC/B5D,EAAAA,UAAU,EAAE,UADmB;AAE/BY,EAAAA,WAAW,EAAE,IAFkB;AAG/BN,EAAAA,QAAQ,EAAE,oBAAM,EAHe;AAI/BC,EAAAA,iBAAiB,EAAE,IAJY;AAK/BH,EAAAA,SAAS,EAAEyD,aAAa,CAACC,MALM;AAM/BzD,EAAAA,KAAK,EAAE0D,UAAU,CAACC,EANa;AAO/B5E,EAAAA,QAAQ,EAAE,KAPqB;AAQ/BW,EAAAA,YAAY,EAAE;AARiB,CAAjC;AAUAJ,iBAAiB,CAACsE,WAAlB,GAAgC,mBAAhC;;;;"}