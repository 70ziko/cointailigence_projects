{"version":3,"file":"ObjectPage.js","sources":["../src/components/ObjectPage/CollapsedAvatar.tsx","../src/components/ObjectPage/ObjectPage.jss.ts","../src/internal/stopPropagation.ts","../src/webComponents/StandardListItem/index.tsx","../src/components/ObjectPage/ObjectPageAnchorButton.tsx","../src/components/ObjectPage/ObjectPageUtils.ts","../src/components/ObjectPage/ObjectPageAnchorBar.tsx","../src/components/ObjectPage/ObjectPageHeader.tsx","../src/components/ObjectPage/useObserveHeights.ts","../src/components/ObjectPage/index.tsx"],"sourcesContent":["import { createUseStyles } from 'react-jss';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { AvatarSize } from '@ui5/webcomponents-react/lib/AvatarSize';\nimport React, { ReactElement, useEffect, useMemo, useRef, useState } from 'react';\n\nconst styles = {\n  base: {\n    margin: 'var(--_ui5wcr_ObjectPage_avatar_margin)', // defined in ObjectPage JSS\n    opacity: 0\n  },\n  hidden: {\n    opacity: 0\n  },\n  visible: {\n    transition: 'opacity 0.5s',\n    opacity: 1\n  },\n  imageContainer: {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n    maxHeight: '3rem',\n    width: '3rem',\n    maxWidth: '3rem'\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  }\n};\n\nconst useStyles = createUseStyles(styles, {\n  name: 'CollapsedAvatar'\n});\n\nexport interface CollapsedAvatarPropTypes {\n  image?: string | ReactElement;\n  imageShapeCircle?: boolean;\n}\n\nexport const CollapsedAvatar = (props: CollapsedAvatarPropTypes) => {\n  const { image, imageShapeCircle } = props;\n  const classes = useStyles();\n  const [isMounted, setIsMounted] = useState(false);\n  const domRef = useRef();\n\n  const avatarContent = useMemo(() => {\n    if (!image) return null;\n\n    if (typeof image === 'string') {\n      return (\n        <span\n          className={classes.imageContainer}\n          style={{ borderRadius: imageShapeCircle ? '50%' : 0, overflow: 'hidden' }}\n        >\n          <img className={classes.image} src={image} alt=\"Object Page Image\" />\n        </span>\n      );\n    } else {\n      return React.cloneElement(image, {\n        size: AvatarSize.S,\n        // @ts-ignore\n        className: image.props?.className\n          ? `${classes.imageContainer} ${image.props?.className}`\n          : classes.imageContainer\n      } as unknown);\n    }\n  }, [image, imageShapeCircle]);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const containerClasses = StyleClassHelper.of(classes.base);\n  if (isMounted) {\n    containerClasses.put(classes.visible);\n  } else {\n    containerClasses.put(classes.hidden);\n  }\n\n  return (\n    <div ref={domRef} className={containerClasses.valueOf()}>\n      {avatarContent}\n    </div>\n  );\n};\n","import { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\n\nexport const ObjectPageCssVariables = {\n  anchorFloat: '--_ui5wcr_ObjectPage_actions_float',\n  anchorLeft: '--_ui5wcr_ObjectPage_actions_left',\n  anchorRight: '--_ui5wcr_ObjectPage_actions_right',\n  avatarMargin: '--_ui5wcr_ObjectPage_avatar_margin',\n  lastSectionMargin: '--_ui5wcr_ObjectPage_last_section_margin_bottom'\n};\n\nconst styles = {\n  objectPage: {\n    width: '100%',\n    height: '100%',\n    maxHeight: '100vh',\n    position: 'relative',\n    whiteSpace: 'normal',\n    fontFamily: ThemingParameters.sapFontFamily,\n    backgroundColor: ThemingParameters.sapBackgroundColor,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n    [ObjectPageCssVariables.lastSectionMargin]: 0,\n    '& section[id*=\"ObjectPageSection-\"] > div[role=\"heading\"]': {\n      display: 'none'\n    },\n    // explanation why first-child selector is not sufficient here:\n    // https://stackoverflow.com/questions/7128406/css-select-the-first-child-from-elements-with-particular-attribute\n    '& section[id*=\"ObjectPageSection-\"] ~ section[id*=\"ObjectPageSection-\"] > div[role=\"heading\"]': {\n      display: 'block'\n    },\n    '& section[data-component-name=\"ObjectPageSection\"]:last-child': {\n      marginBottom: `var(${ObjectPageCssVariables.lastSectionMargin})`\n    }\n  },\n  '@global html': {\n    [ObjectPageCssVariables.anchorFloat]: 'right',\n    [ObjectPageCssVariables.anchorRight]: '1.25rem',\n    [ObjectPageCssVariables.anchorLeft]: 'unset',\n    [ObjectPageCssVariables.avatarMargin]: '0 1rem 0 0'\n  },\n  '@global [dir=\"rtl\"]': {\n    [ObjectPageCssVariables.anchorFloat]: 'left',\n    [ObjectPageCssVariables.anchorRight]: 'unset',\n    [ObjectPageCssVariables.anchorLeft]: '1.25rem',\n    [ObjectPageCssVariables.avatarMargin]: '0 0 0 1rem'\n  },\n  iconTabBarMode: {\n    '& section[data-component-name=\"ObjectPageSection\"] > div[role=\"heading\"]': {\n      display: 'none'\n    }\n  },\n  noHeader: {\n    '& $header': {\n      display: 'none'\n    },\n    '& $contentHeader': {\n      display: 'none'\n    }\n  },\n  headerCollapsed: {\n    '& $contentHeader': {\n      display: 'none'\n    }\n  },\n  // header\n  header: {\n    flexShrink: 0,\n    backgroundColor: ThemingParameters.sapObjectHeader_Background,\n    position: 'sticky',\n    top: 0,\n    zIndex: 2\n  },\n  iEClass: {\n    position: 'fixed',\n    width: 'calc(100% - 18px)'\n  },\n  iEClassHeader: {\n    width: 'calc(100% - 18px - 2rem)'\n  },\n  iEBackgroundElement: {\n    position: 'fixed',\n    backgroundColor: ThemingParameters.sapObjectHeader_Background\n  },\n  contentHeader: {\n    backgroundColor: ThemingParameters.sapObjectHeader_Background,\n    position: 'sticky',\n    paddingBottom: '0.25rem',\n    maxHeight: '500px',\n    overflow: 'hidden',\n    paddingLeft: '2rem'\n  },\n  anchorBar: {\n    position: 'sticky',\n    zIndex: 2,\n    '--_ui5_tc_header_box_shadow': 'inset 0px -1px 0 0px rgba(0,0,0,0.15)'\n  },\n  titleBar: {\n    padding: '0.5rem 2rem',\n    display: 'block',\n    position: 'relative'\n  },\n  container: {\n    flex: '1 1 70%',\n    boxSizing: 'border-box'\n  },\n  title: {\n    padding: '0.3125rem 0 0 0'\n  },\n  subTitle: {\n    verticalAlign: 'baseline',\n    padding: '0 0 0.5rem 0.5rem'\n  },\n  actions: {\n    position: 'absolute',\n    top: '0',\n    paddingTop: '0.75rem',\n    zIndex: 1,\n    right: `var(${ObjectPageCssVariables.anchorRight})`,\n    left: `var(${ObjectPageCssVariables.anchorLeft})`,\n    display: 'inline-block',\n    float: `var(${ObjectPageCssVariables.anchorFloat})`,\n    verticalAlign: 'top',\n    '& > *': {\n      marginLeft: '0.5rem',\n      padding: 0\n    }\n  },\n  titleInHeaderContent: {\n    '& $subTitle': {\n      padding: '0.5rem 0'\n    },\n    '& $keyInfos': {\n      alignSelf: 'unset'\n    },\n    '& contentHeader': {\n      paddingTop: 0,\n      '& > *': {\n        display: 'flex',\n        verticalAlign: 'top',\n        '&:not(:first-child)': {\n          marginRight: '2rem',\n          marginBottom: '1rem'\n        }\n      }\n    }\n  },\n  headerCustomContent: {\n    display: 'inline-block',\n    verticalAlign: 'top',\n    '& > *': {\n      float: 'left',\n      marginRight: '2rem',\n      marginBottom: '1rem',\n      lineHeight: '1.5rem'\n    },\n    '&:after': {\n      clear: 'both'\n    }\n  },\n  headerCustomContentItem: {\n    marginLeft: '1rem'\n  },\n\n  headerImage: {\n    minWidth: '5rem',\n    maxWidth: '5rem',\n    maxHeight: '5rem',\n    display: 'inline-block',\n    marginRight: '2rem',\n    marginBottom: '1rem'\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  },\n  keyInfos: {\n    '& > *': {\n      marginLeft: '1rem'\n    },\n    display: 'flex',\n    flexDirection: 'row',\n    alignSelf: 'center'\n  },\n  avatar: {\n    margin: `var(${ObjectPageCssVariables.avatarMargin})`\n  }\n};\n\nexport default styles;\n","export const stopPropagation = (e) => {\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n};\n","import { ListItemTypes } from '@ui5/webcomponents-react/lib/ListItemTypes';\nimport { ValueState } from '@ui5/webcomponents-react/lib/ValueState';\nimport { withWebComponent, WithWebComponentPropTypes } from '@ui5/webcomponents-react/lib/withWebComponent';\nimport '@ui5/webcomponents/dist/StandardListItem';\nimport { FC, ReactNode } from 'react';\n\nexport interface StandardListItemPropTypes extends WithWebComponentPropTypes {\n  /**\n   * Defines the description displayed right under the item text, if such is present.\n   */\n  description?: string;\n  /**\n   * Defines the `icon` source URI.\n   *\n   * **Note:** SAP-icons font provides numerous buil-in icons. To find all the available icons, see the <ui5-link target=\"_blank\" href=\"https://openui5.hana.ondemand.com/test-resources/sap/m/demokit/iconExplorer/webapp/index.html\" class=\"api-table-content-cell-link\">Icon Explorer</ui5-link>.\n   */\n  icon?: string;\n  /**\n   * Defines whether the `icon` should be displayed in the beginning of the list item or in the end.\n   *\n   * **Note:** If `image` is set, the `icon` would be displayed after the `image`.\n   */\n  iconEnd?: boolean;\n  /**\n   * Defines the `image` source URI.\n   *\n   * **Note:** The `image` would be displayed in the beginning of the list item.\n   */\n  image?: string;\n  /**\n   * Defines the `info`, displayed in the end of the list item.\n   */\n  info?: string;\n  /**\n   * Defines the state of the `info`.\n   * Available options are: `\"None\"` (by default), `\"Success\"`, `\"Warning\"`, `\"Information\"` and `\"Erorr\"`.\n   */\n  infoState?: ValueState;\n  /**\n   * Defines the visual indication and behavior of the list items. Available options are `Active` (by default), `Inactive` and `Detail`.\n   *\n   * **Note:** When set to `Active`, the item will provide visual response upon press and hover, while with type `Inactive` and `Detail` - will not.\n   */\n  type?: ListItemTypes;\n  /**\n   * Defines the selected state of the `ListItem`.\n   */\n  selected?: boolean;\n  /**\n   * Defines the text of the `StandardListItem`.\n   *\n   * **Note:** Аlthough this slot accepts HTML Elements, it is strongly recommended that you only use text in order to preserve the intended design.\n   */\n  children?: ReactNode | ReactNode[];\n  /**\n   * Fired when the user clicks on the detail button when type is `Detail`.\n   */\n  onDetailClick?: (event: CustomEvent) => void;\n}\n\n/**\n * The `StandardListItem` represents the simplest type of item for a `StandardListItemst`. This is a list item, providing the most common use cases such as `text`, `image` and `icon`\n *\n * <a href=\"https://sap.github.io/ui5-webcomponents/playground/components/StandardListItem\" target=\"_blank\">UI5 Web Components Playground</a>\n */\nconst StandardListItem: FC<StandardListItemPropTypes> = withWebComponent<StandardListItemPropTypes>(\n  'ui5-li',\n  ['description', 'icon', 'image', 'info', 'infoState', 'type'],\n  ['iconEnd', 'selected'],\n  [],\n  ['detail-click']\n);\n\nStandardListItem.displayName = 'StandardListItem';\n\nStandardListItem.defaultProps = {\n  iconEnd: false,\n  infoState: ValueState.None,\n  type: ListItemTypes.Active,\n  selected: false\n};\n\nexport { StandardListItem };\n","import '@ui5/webcomponents-icons/dist/slim-arrow-down';\nimport { Tab } from '@ui5/webcomponents-react/lib/Tab';\nimport React, { FC, useEffect, useRef } from 'react';\n\ninterface ObjectPageAnchorPropTypes {\n  section: any;\n  onShowSubSectionPopover: (event: any, section: any) => void;\n  index: number;\n  selected: boolean;\n}\n\nexport const ObjectPageAnchorButton: FC<ObjectPageAnchorPropTypes> = (props: ObjectPageAnchorPropTypes) => {\n  const ref = useRef<HTMLElement>();\n  const { section, index, selected, onShowSubSectionPopover } = props;\n\n  let subSectionsAvailable = false;\n  if (section.props.children && section.props.children.filter) {\n    const subSections = section.props.children.filter((item) => item.props && item.props.isSubSection);\n    subSectionsAvailable = subSections.length > 0;\n  }\n\n  useEffect(() => {\n    if (subSectionsAvailable) {\n      try {\n        const element = ref.current?.parentElement?.shadowRoot?.querySelector(\n          `.ui5-tc__headerList li[aria-posinset=\"${index + 1}\"] .ui5-tab-strip-itemContent`\n        );\n\n        if (element && !element.querySelector('ui5-icon')) {\n          const icon = document.createElement('ui5-icon');\n          (icon as any).name = 'slim-arrow-down';\n          icon.style.verticalAlign = 'text-bottom';\n          icon.style.pointerEvents = 'all';\n          icon.addEventListener('click', (e) => {\n            e.stopImmediatePropagation();\n            e.preventDefault();\n            e.stopPropagation();\n            onShowSubSectionPopover(e, section);\n          });\n          element.appendChild(icon);\n        }\n      } catch (e) {\n        // empty catch block, mainly required for tests\n      }\n    }\n  }, [subSectionsAvailable, ref, onShowSubSectionPopover, section]);\n\n  return (\n    <Tab\n      ref={ref}\n      data-index={index}\n      data-section-id={section.props.id}\n      text={section.props.title}\n      selected={selected}\n    />\n  );\n};\n","import { Children, ReactElement, ReactNode, RefObject } from 'react';\n\nexport const safeGetChildrenArray = <T = Exclude<ReactNode, boolean | null | undefined>>(children: unknown): T[] =>\n  Children.toArray(children).filter(Boolean) as T[];\n\nexport const getSectionById = (sections: ReactElement<any> | ReactElement<any>[], id) => {\n  return safeGetChildrenArray(sections).find((objectPageSection: ReactElement) => objectPageSection.props?.id === id);\n};\n\nexport const extractSectionIdFromHtmlId = (id: string) => {\n  return id.replace(/^ObjectPageSection-/, '');\n};\n\nexport const getLastObjectPageSection = (ref: RefObject<HTMLDivElement>): HTMLElement => {\n  const sections = ref.current?.querySelectorAll<HTMLElement>('[id^=\"ObjectPageSection\"]');\n  if (!sections || sections.length < 1) {\n    return null;\n  }\n\n  return sections[sections.length - 1];\n};\n","import { addCustomCSS } from '@ui5/webcomponents-base/dist/Theming';\nimport '@ui5/webcomponents-icons/dist/pushpin-off';\nimport '@ui5/webcomponents-icons/dist/slim-arrow-down';\nimport '@ui5/webcomponents-icons/dist/slim-arrow-up';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { List } from '@ui5/webcomponents-react/lib/List';\nimport { PlacementType } from '@ui5/webcomponents-react/lib/PlacementType';\nimport { Popover } from '@ui5/webcomponents-react/lib/Popover';\nimport { TabContainer } from '@ui5/webcomponents-react/lib/TabContainer';\nimport { ToggleButton } from '@ui5/webcomponents-react/lib/ToggleButton';\nimport React, { CSSProperties, forwardRef, ReactElement, RefObject, useCallback, useRef, useState } from 'react';\nimport { createUseStyles } from 'react-jss';\nimport { Ui5PopoverDomRef } from '../../interfaces/Ui5PopoverDomRef';\nimport { stopPropagation } from '../../internal/stopPropagation';\nimport { StandardListItem } from '../../webComponents/StandardListItem';\nimport { ObjectPageAnchorButton } from './ObjectPageAnchorButton';\nimport { safeGetChildrenArray } from './ObjectPageUtils';\nimport { createPortal } from 'react-dom';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/lib/hooks';\nimport {\n  COLLAPSE_HEADER,\n  EXPAND_HEADER,\n  PIN_HEADER,\n  UNPIN_HEADER\n} from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\n\naddCustomCSS(\n  'ui5-button',\n  `\n  :host([data-ui5wcr-object-page-header-action]){\n    width: 1.375rem;\n    height: 1.375rem;\n    min-width: 1.375rem;\n  }\n  :host([data-ui5wcr-object-page-header-action]) .ui5-button-root {\n    padding: 0;\n  }`\n);\naddCustomCSS(\n  'ui5-togglebutton',\n  `\n  :host([data-ui5wcr-object-page-header-action]){\n    width: 1.375rem;\n    height: 1.375rem;\n    min-width: 1.375rem;\n  }\n  :host([data-ui5wcr-object-page-header-action]) .ui5-button-root {\n    padding: 0;\n  }`\n);\n\nconst anchorBarStyles = {\n  anchorBarActionButton: {\n    position: 'absolute',\n    top: `-0.6875rem`,\n    marginLeft: `-0.6875rem`,\n    left: '50%',\n    '&:before, &:after': {\n      content: '\"\"',\n      position: 'absolute',\n      width: '4rem',\n      top: '50%',\n      height: '0.0625rem'\n    },\n    '&:before': {\n      right: '100%',\n      backgroundImage: `linear-gradient(to left, ${ThemingParameters.sapHighlightColor}, rgba(8,84,160,0))`\n    },\n    '&:after': {\n      backgroundImage: `linear-gradient(to right, ${ThemingParameters.sapHighlightColor}, rgba(8,84,160,0))`,\n      left: '100%'\n    }\n  },\n  anchorBarActionButtonExpandable: {},\n  anchorBarActionButtonPinnable: {},\n  anchorBarActionPinnableAndExandable: {\n    '&$anchorBarActionButtonPinnable': {\n      marginLeft: '0.25rem',\n      '&:before': {\n        backgroundImage: 'none'\n      }\n    },\n    '&$anchorBarActionButtonExpandable': {\n      marginLeft: '-1.75rem'\n    }\n  }\n};\n\nconst useStyles = createUseStyles(anchorBarStyles, { name: 'ObjectPageAnchorBar' });\n\ninterface Props {\n  sections: ReactElement | ReactElement[];\n  selectedSectionId: string;\n  handleOnSectionSelected: (e: unknown) => void;\n  handleOnSubSectionSelected: (e: unknown) => void;\n  showHideHeaderButton: boolean;\n  headerContentPinnable: boolean;\n  headerPinned: boolean;\n  headerContentHeight: number;\n  setHeaderPinned: (payload: any) => void;\n  style?: CSSProperties;\n  onToggleHeaderContentVisibility: (e: any) => void;\n  className: string;\n}\n\nconst ObjectPageAnchorBar = forwardRef((props: Props, ref: RefObject<HTMLElement>) => {\n  const {\n    sections,\n    selectedSectionId,\n    handleOnSectionSelected,\n    handleOnSubSectionSelected,\n    showHideHeaderButton,\n    headerContentPinnable,\n    onToggleHeaderContentVisibility,\n    headerPinned,\n    setHeaderPinned,\n    headerContentHeight,\n    style,\n    className\n  } = props;\n\n  const classes = useStyles();\n\n  const shouldRenderHideHeaderButton = showHideHeaderButton;\n  const shouldRenderHeaderPinnableButton = headerContentPinnable && headerContentHeight > 0;\n  const showBothActions = shouldRenderHeaderPinnableButton && shouldRenderHideHeaderButton;\n  const [popoverContent, setPopoverContent] = useState<ReactElement>(null);\n  const popoverRef = useRef<Ui5PopoverDomRef>(null);\n\n  const onPinHeader = useCallback(\n    (e) => {\n      setHeaderPinned(e.target.pressed);\n    },\n    [setHeaderPinned]\n  );\n\n  const onTabItemSelect = useCallback(\n    (event) => {\n      const { sectionId, index } = event.detail.tab.dataset;\n      // eslint-disable-next-line eqeqeq\n      const section = safeGetChildrenArray<ReactElement>(sections).find((el) => el.props.id == sectionId);\n      handleOnSectionSelected(\n        enrichEventWithDetails({} as any, {\n          ...section,\n          index\n        })\n      );\n    },\n    [sections]\n  );\n\n  const onShowSubSectionPopover = useCallback(\n    (e, section) => {\n      setPopoverContent(section);\n      popoverRef.current.openBy(e.target.parentElement);\n    },\n    [setPopoverContent, popoverRef]\n  );\n\n  const onSubSectionClick = useCallback(\n    (e) => {\n      const selectedId = e.detail.item.dataset.key;\n      const subSection = popoverContent.props.children\n        .filter((item) => item.props && item.props.isSubSection)\n        .find((item) => item.props.id === selectedId);\n      if (subSection) {\n        handleOnSubSectionSelected(enrichEventWithDetails(e, { section: popoverContent, subSection }));\n      }\n      popoverRef.current.close();\n    },\n    [handleOnSubSectionSelected, popoverRef, popoverContent]\n  );\n\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n\n  return (\n    <section className={className} role=\"navigation\" style={style} ref={ref}>\n      <TabContainer collapsed fixed onTabSelect={onTabItemSelect} showOverflow>\n        {safeGetChildrenArray(sections).map((section: ReactElement, index) => {\n          return (\n            <ObjectPageAnchorButton\n              key={`Anchor-${section.props?.id}`}\n              section={section}\n              index={index}\n              selected={selectedSectionId === section.props?.id}\n              onShowSubSectionPopover={onShowSubSectionPopover}\n            />\n          );\n        })}\n      </TabContainer>\n      {shouldRenderHideHeaderButton && (\n        <Button\n          icon={headerContentHeight === 0 ? 'slim-arrow-down' : 'slim-arrow-up'}\n          onClick={onToggleHeaderContentVisibility}\n          className={`${classes.anchorBarActionButton} ${classes.anchorBarActionButtonExpandable} ${\n            showBothActions ? classes.anchorBarActionPinnableAndExandable : ''\n          }`}\n          data-ui5wcr-object-page-header-action=\"\"\n          tooltip={i18nBundle.getText(headerContentHeight === 0 ? EXPAND_HEADER : COLLAPSE_HEADER)}\n          aria-label={i18nBundle.getText(headerContentHeight === 0 ? EXPAND_HEADER : COLLAPSE_HEADER)}\n        />\n      )}\n      {shouldRenderHeaderPinnableButton && (\n        <ToggleButton\n          icon=\"pushpin-off\"\n          pressed={headerPinned}\n          onClick={onPinHeader}\n          className={`${classes.anchorBarActionButton} ${classes.anchorBarActionButtonPinnable} ${\n            showBothActions ? classes.anchorBarActionPinnableAndExandable : ''\n          }`}\n          data-ui5wcr-object-page-header-action=\"\"\n          tooltip={i18nBundle.getText(headerPinned ? UNPIN_HEADER : PIN_HEADER)}\n          aria-label={i18nBundle.getText(headerPinned ? UNPIN_HEADER : PIN_HEADER)}\n        />\n      )}\n      {createPortal(\n        <Popover placementType={PlacementType.Bottom} noArrow ref={popoverRef} onAfterClose={stopPropagation}>\n          <List onItemClick={onSubSectionClick}>\n            {popoverContent?.props?.children\n              .filter((item) => item.props && item.props.isSubSection)\n              .map((item) => (\n                <StandardListItem key={item.props.id} data-key={item.props.id}>\n                  {item.props.title}\n                </StandardListItem>\n              ))}\n          </List>\n        </Popover>,\n        document.body\n      )}\n    </section>\n  );\n});\n\nObjectPageAnchorBar.displayName = 'ObjectPageAnchorBar';\n\nexport { ObjectPageAnchorBar };\n","import { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { isIE } from '@ui5/webcomponents-react-base/lib/Device';\nimport { AvatarSize } from '@ui5/webcomponents-react/lib/AvatarSize';\nimport { FlexBox } from '@ui5/webcomponents-react/lib/FlexBox';\nimport { FlexBoxDirection } from '@ui5/webcomponents-react/lib/FlexBoxDirection';\nimport { Label } from '@ui5/webcomponents-react/lib/Label';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport { Toolbar } from '@ui5/webcomponents-react/lib/Toolbar';\nimport { ToolbarDesign } from '@ui5/webcomponents-react/lib/ToolbarDesign';\nimport { ToolbarSpacer } from '@ui5/webcomponents-react/lib/ToolbarSpacer';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/lib/ToolbarStyle';\nimport React, { CSSProperties, forwardRef, ReactElement, ReactNode, RefObject, useMemo } from 'react';\nimport { safeGetChildrenArray } from './ObjectPageUtils';\n\ninterface Props {\n  image: string | ReactElement;\n  imageShapeCircle: boolean;\n  classes: any;\n  showTitleInHeaderContent: boolean;\n  headerContentProp: ReactElement;\n  breadcrumbs: ReactNode;\n  keyInfos: ReactNode;\n  title: string;\n  subTitle: string;\n  headerPinned: boolean;\n  topHeaderHeight: number;\n  headerActions: ReactElement<unknown>[];\n}\n\nexport const ObjectPageHeader = forwardRef((props: Props, ref: RefObject<HTMLDivElement>) => {\n  const {\n    image,\n    classes,\n    imageShapeCircle,\n    showTitleInHeaderContent,\n    headerContentProp,\n    breadcrumbs,\n    title,\n    subTitle,\n    keyInfos,\n    headerPinned,\n    topHeaderHeight,\n    headerActions\n  } = props;\n\n  const avatar = useMemo(() => {\n    if (!image) {\n      return null;\n    }\n\n    if (typeof image === 'string') {\n      return (\n        <span\n          className={classes.headerImage}\n          style={{ borderRadius: imageShapeCircle ? '50%' : 0, overflow: 'hidden' }}\n        >\n          <img src={image} className={classes.image} alt=\"Company Logo\" />\n        </span>\n      );\n    } else {\n      return React.cloneElement(image, {\n        size: AvatarSize.L,\n        className: image.props?.className ? `${classes.headerImage} ${image.props?.className}` : classes.headerImage\n      } as unknown);\n    }\n  }, [image, classes.headerImage, classes.image, imageShapeCircle]);\n\n  const headerStyles = useMemo<CSSProperties>(() => {\n    if (headerPinned || isIE()) {\n      return {\n        top: `${topHeaderHeight}px`,\n        zIndex: 1\n      };\n    }\n\n    return null;\n  }, [headerPinned, topHeaderHeight]);\n\n  let renderedHeaderContent = (\n    <>\n      {avatar}\n      {headerContentProp && <span className={classes.headerCustomContent}>{headerContentProp}</span>}\n    </>\n  );\n\n  if (showTitleInHeaderContent) {\n    let firstElement;\n    let contents = [];\n\n    if (headerContentProp?.type === React.Fragment) {\n      [firstElement, ...contents] = safeGetChildrenArray(headerContentProp.props.children);\n    } else {\n      firstElement = headerContentProp;\n    }\n    renderedHeaderContent = (\n      <>\n        <FlexBox>\n          {avatar}\n          <FlexBox direction={FlexBoxDirection.Column}>\n            <div>{breadcrumbs}</div>\n            <FlexBox>\n              <FlexBox direction={FlexBoxDirection.Column}>\n                <Title level={TitleLevel.H3} className={classes.title}>\n                  {title}\n                </Title>\n                <Label className={classes.subTitle}>{subTitle}</Label>\n                <span> {firstElement}</span>\n              </FlexBox>\n              <FlexBox>\n                {contents.map((c, index) => (\n                  <div key={`customContent-${index}`} className={classes.headerCustomContentItem}>\n                    {c}\n                  </div>\n                ))}\n              </FlexBox>\n              <div className={classes.keyInfos}>{keyInfos}</div>\n            </FlexBox>\n          </FlexBox>\n          <Toolbar toolbarStyle={ToolbarStyle.Clear} design={ToolbarDesign.Transparent}>\n            <ToolbarSpacer />\n            {headerActions}\n          </Toolbar>\n        </FlexBox>\n      </>\n    );\n  }\n\n  const headerClasses = StyleClassHelper.of(classes.contentHeader);\n  if (isIE()) {\n    headerClasses.put(classes.iEClass);\n    headerClasses.put(classes.iEClassHeader);\n  }\n\n  return (\n    <div style={headerStyles} className={headerClasses.className} ref={ref}>\n      {renderedHeaderContent}\n    </div>\n  );\n});\n\nObjectPageHeader.displayName = 'ObjectPageHeader';\n","import { useEffect, useState } from 'react';\n\ndeclare const ResizeObserver;\n\nexport const useObserveHeights = (objectPage, topHeader, headerContentRef, anchorBarRef, { noHeader }) => {\n  const [topHeaderHeight, setTopHeaderHeight] = useState(0);\n  const [headerContentHeight, setHeaderContentHeight] = useState(0);\n  const [isIntersecting, setIsIntersecting] = useState(true);\n\n  useEffect(() => {\n    const headerIntersectionObserver = new IntersectionObserver(\n      ([header]) => {\n        if (header.isIntersecting) {\n          setIsIntersecting(true);\n          setHeaderContentHeight((header.target as HTMLElement).offsetHeight);\n        } else {\n          setIsIntersecting(false);\n          setHeaderContentHeight(0);\n        }\n      },\n      { rootMargin: `-${topHeaderHeight}px 0px 0px 0px`, root: objectPage.current, threshold: 0.3 }\n    );\n\n    if (headerContentRef.current) {\n      headerIntersectionObserver.observe(headerContentRef.current);\n    }\n\n    return () => {\n      headerIntersectionObserver.disconnect();\n    };\n  }, [topHeaderHeight, setHeaderContentHeight, headerContentRef, setIsIntersecting]);\n\n  // top header\n  useEffect(() => {\n    const headerContentResizeObserver = new ResizeObserver(([header]) => {\n      setTopHeaderHeight(header?.contentRect?.height ?? 0);\n    });\n    if (topHeader.current) {\n      headerContentResizeObserver.observe(topHeader.current);\n    }\n    return () => {\n      headerContentResizeObserver.disconnect();\n    };\n  }, [topHeader.current, setTopHeaderHeight]);\n\n  // header content\n  useEffect(() => {\n    const headerContentResizeObserver = new ResizeObserver(([headerContent]) => {\n      if (isIntersecting) {\n        setHeaderContentHeight(headerContent?.contentRect?.height ?? 0);\n      }\n    });\n\n    if (headerContentRef.current) {\n      headerContentResizeObserver.observe(headerContentRef.current);\n    }\n    return () => {\n      headerContentResizeObserver.disconnect();\n    };\n  }, [headerContentRef.current, setHeaderContentHeight, isIntersecting]);\n\n  const anchorBarHeight = anchorBarRef.current?.offsetHeight ?? 33;\n  const totalHeaderHeight = (noHeader ? 0 : topHeaderHeight + headerContentHeight) + anchorBarHeight;\n\n  return { topHeaderHeight, headerContentHeight, anchorBarHeight, totalHeaderHeight };\n};\n","import { isIE } from '@ui5/webcomponents-react-base/lib/Device';\nimport { createUseStyles } from 'react-jss';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/lib/useConsolidatedRef';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/lib/usePassThroughHtmlProps';\nimport { enrichEventWithDetails, getScrollBarWidth } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { FlexBox } from '@ui5/webcomponents-react/lib/FlexBox';\nimport { FlexBoxAlignItems } from '@ui5/webcomponents-react/lib/FlexBoxAlignItems';\nimport { FlexBoxDirection } from '@ui5/webcomponents-react/lib/FlexBoxDirection';\nimport { GlobalStyleClasses } from '@ui5/webcomponents-react/lib/GlobalStyleClasses';\nimport { Label } from '@ui5/webcomponents-react/lib/Label';\nimport { ObjectPageMode } from '@ui5/webcomponents-react/lib/ObjectPageMode';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport { Toolbar } from '@ui5/webcomponents-react/lib/Toolbar';\nimport { ToolbarDesign } from '@ui5/webcomponents-react/lib/ToolbarDesign';\nimport { ToolbarSpacer } from '@ui5/webcomponents-react/lib/ToolbarSpacer';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/lib/ToolbarStyle';\nimport { CommonProps } from '@ui5/webcomponents-react/interfaces/CommonProps';\nimport debounce from 'lodash/debounce';\nimport React, {\n  ComponentType,\n  FC,\n  forwardRef,\n  ReactElement,\n  ReactNode,\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { ObjectPageSectionPropTypes } from '../ObjectPageSection';\nimport { ObjectPageSubSectionPropTypes } from '../ObjectPageSubSection';\nimport { CollapsedAvatar } from './CollapsedAvatar';\nimport styles, { ObjectPageCssVariables } from './ObjectPage.jss';\nimport { ObjectPageAnchorBar } from './ObjectPageAnchorBar';\nimport { ObjectPageHeader } from './ObjectPageHeader';\nimport {\n  extractSectionIdFromHtmlId,\n  getLastObjectPageSection,\n  getSectionById,\n  safeGetChildrenArray\n} from './ObjectPageUtils';\nimport { useObserveHeights } from './useObserveHeights';\n\ndeclare const ResizeObserver;\n\nconst SCROLL_BAR_WIDTH = 12;\n\nexport interface ObjectPagePropTypes extends CommonProps {\n  /**\n   * Defines the title of the `ObjectPage`.\n   */\n  title?: string;\n  /**\n   * Defines the subheading of the `ObjectPage`.\n   */\n  subTitle?: string;\n  /**\n   * Defines the image of the `ObjectPage`. You can pass a path to an image or an `Avatar` component.\n   */\n  image?: string | ReactElement<unknown>;\n  /**\n   * Defines the actions in the header toolbar.\n   */\n  headerActions?: ReactElement<unknown>[];\n  /**\n   * The header content displays app-specific contextual information. You build the content using containers.\n   The containers are arranged inline with a left float. If the containers do not all fit on one line, those on the right wrap to the line below.\n   The header content is hidden by scrolling down the page or clicking the collapse indicator.\n   */\n  headerContent?: ReactNode;\n  /**\n   * Defines the content area of the `ObjectPage`. It consists of sections and subsections.<br />\n   * __Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `ObjectPageSection` and `ObjectPageSubSection` in order to preserve the intended design.\n   */\n  children?: ReactElement<ObjectPageSectionPropTypes> | ReactElement<ObjectPageSectionPropTypes>[];\n  /**\n   * Defines the ID of the currently `ObjectPageSection` section.\n   */\n  selectedSectionId?: string;\n  /**\n   * Defines the ID of the currently `ObjectPageSubSection` section.\n   */\n  selectedSubSectionId?: string;\n  /**\n   * Fired when the selected section changes.\n   */\n  onSelectedSectionChanged?: (\n    event: CustomEvent<{ selectedSectionIndex: number; selectedSectionId: string; section: ComponentType }>\n  ) => void;\n  /**\n   * Defines the breadcrumbs above the `ObjectPage` heading.<br />\n   * __Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `Breadcrumbs` in order to preserve the intended design.\n   */\n  breadcrumbs?: ReactNode;\n  /**\n   * Defines the key information section in the header of the `ObjectPage`.\n   */\n  keyInfos?: ReactNode;\n\n  // appearance\n  /**\n   * Defines whether the header is hidden by scrolling down.\n   */\n  alwaysShowContentHeader?: boolean;\n  /**\n   * Defines whether the title is displayed in the content section of the header or above the image.\n   */\n  showTitleInHeaderContent?: boolean;\n  /**\n   * Defines whether the image should be displayed in a circle or in a square.<br />\n   * __Note:__ If the `image` is not a `string`, this prop has no effect.\n   */\n  imageShapeCircle?: boolean;\n  /**\n   * Defines the `ObjectPage` mode.\n   *\n   * - \"Default\": All `ObjectPageSections` and `ObjectPageSubSections` are displayed on one page. Selecting tabs will scroll to the corresponding section.\n   * - \"IconTabBar\": All `ObjectPageSections` are displayed on separate pages. Selecting tabs will lead to the corresponding page.\n   */\n  mode?: ObjectPageMode;\n  /**\n   * Defines whether the header is displayed.\n   */\n  noHeader?: boolean;\n  /**\n   * Defines whether the pin button of the header is displayed.\n   */\n  showHideHeaderButton?: boolean;\n  /**\n   * Defines whether the header content is pinnable.\n   */\n  headerContentPinnable?: boolean;\n}\n\nconst useStyles = createUseStyles(styles, { name: 'ObjectPage' });\n\n/**\n * A component that allows apps to easily display information related to a business object.<br />\n * The `ObjectPage` is composed of a header (title and content) and block content wrapped in sections and subsections that structure the information.\n */\nconst ObjectPage: FC<ObjectPagePropTypes> = forwardRef((props: ObjectPagePropTypes, ref: RefObject<HTMLDivElement>) => {\n  const {\n    title,\n    image,\n    subTitle,\n    headerActions,\n    mode,\n    imageShapeCircle,\n    className,\n    style,\n    tooltip,\n    slot,\n    showHideHeaderButton,\n    children,\n    onSelectedSectionChanged,\n    selectedSectionId,\n    noHeader,\n    alwaysShowContentHeader,\n    showTitleInHeaderContent,\n    headerContentPinnable,\n    headerContent,\n    breadcrumbs,\n    keyInfos\n  } = props;\n\n  const firstSectionId = safeGetChildrenArray<ReactElement>(children)[0]?.props?.id;\n\n  const [internalSelectedSectionId, setInternalSelectedSectionId] = useState(selectedSectionId ?? firstSectionId);\n  const [selectedSubSectionId, setSelectedSubSectionId] = useState(props.selectedSubSectionId);\n  const [headerPinned, setHeaderPinned] = useState(alwaysShowContentHeader);\n  const isProgrammaticallyScrolled = useRef(false);\n\n  const objectPageRef: RefObject<HTMLDivElement> = useConsolidatedRef(ref);\n  const topHeaderRef: RefObject<HTMLDivElement> = useRef();\n  const headerContentRef: RefObject<HTMLDivElement> = useRef();\n  const anchorBarRef: RefObject<HTMLDivElement> = useRef();\n\n  const [scrollbarWidth, setScrollbarWidth] = useState(SCROLL_BAR_WIDTH);\n  const isMounted = useRef(false);\n\n  // observe heights of header parts\n  const { topHeaderHeight, headerContentHeight, anchorBarHeight, totalHeaderHeight } = useObserveHeights(\n    objectPageRef,\n    topHeaderRef,\n    headerContentRef,\n    anchorBarRef,\n    { noHeader }\n  );\n\n  // *****\n  // SECTION SELECTION\n  // ****\n\n  const scrollToSection = useCallback(\n    (sectionId) => {\n      if (!sectionId) {\n        return;\n      }\n      if (firstSectionId === sectionId) {\n        objectPageRef.current?.scrollTo({ top: 0, behavior: 'smooth' });\n      } else {\n        const childOffset = objectPageRef.current?.querySelector<HTMLElement>(`#ObjectPageSection-${sectionId}`)\n          ?.offsetTop;\n        if (!isNaN(childOffset)) {\n          objectPageRef.current?.scrollTo({\n            top: childOffset - topHeaderHeight - anchorBarHeight - (headerPinned ? headerContentHeight : 0) + 45,\n            behavior: 'smooth'\n          });\n        }\n      }\n      isProgrammaticallyScrolled.current = false;\n    },\n    [firstSectionId, objectPageRef, topHeaderHeight, anchorBarHeight, headerPinned, headerContentHeight]\n  );\n\n  // change selected section when prop is changed (external change)\n  useEffect(() => {\n    isProgrammaticallyScrolled.current = true;\n    setInternalSelectedSectionId(selectedSectionId ?? firstSectionId);\n  }, [selectedSectionId, isProgrammaticallyScrolled, firstSectionId]);\n\n  // section was selected by clicking on the anchor bar buttons\n  const handleOnSectionSelected = useCallback(\n    (e) => {\n      isProgrammaticallyScrolled.current = true;\n      const newSelectionSection = e.detail.props?.id;\n      setInternalSelectedSectionId((oldSelectedSection) => {\n        if (oldSelectedSection === newSelectionSection) {\n          scrollToSection(newSelectionSection);\n        }\n        return newSelectionSection;\n      });\n      fireOnSelectedChangedEvent(e);\n    },\n    [onSelectedSectionChanged, setInternalSelectedSectionId, isProgrammaticallyScrolled, scrollToSection]\n  );\n\n  // do internal scrolling\n  useEffect(() => {\n    if (!isMounted.current) return;\n\n    if (mode === ObjectPageMode.Default && isProgrammaticallyScrolled.current === true) {\n      scrollToSection(internalSelectedSectionId);\n    }\n  }, [internalSelectedSectionId, isMounted, mode, isProgrammaticallyScrolled, scrollToSection]);\n\n  // Scrolling for Sub Section Selection\n  useEffect(() => {\n    if (selectedSubSectionId && isProgrammaticallyScrolled.current === true) {\n      const childOffset = objectPageRef.current?.querySelector<HTMLElement>(\n        `div[id=\"ObjectPageSubSection-${selectedSubSectionId}\"]`\n      )?.offsetTop;\n      if (!isNaN(childOffset)) {\n        objectPageRef.current?.scrollTo({\n          top: childOffset - topHeaderHeight - anchorBarHeight - (headerPinned ? headerContentHeight : 0) + 45,\n          behavior: 'smooth'\n        });\n      }\n\n      isProgrammaticallyScrolled.current = false;\n    }\n  }, [\n    selectedSubSectionId,\n    isProgrammaticallyScrolled,\n    topHeaderHeight,\n    anchorBarHeight,\n    headerPinned,\n    headerContentHeight\n  ]);\n\n  useEffect(() => {\n    setHeaderPinned(alwaysShowContentHeader);\n  }, [setHeaderPinned, alwaysShowContentHeader]);\n\n  const classes = useStyles();\n\n  useEffect(() => {\n    setSelectedSubSectionId(props.selectedSubSectionId);\n    if (props.selectedSubSectionId) {\n      isProgrammaticallyScrolled.current = true;\n      if (mode === ObjectPageMode.IconTabBar) {\n        let sectionId;\n        safeGetChildrenArray<ReactElement<ObjectPageSectionPropTypes>>(children).forEach((section) => {\n          if (React.isValidElement(section) && section.props && section.props.children) {\n            safeGetChildrenArray(section.props.children).forEach(\n              (subSection: ReactElement<ObjectPageSubSectionPropTypes>) => {\n                if (\n                  React.isValidElement(subSection) &&\n                  subSection.props &&\n                  subSection.props.id === props.selectedSubSectionId\n                ) {\n                  sectionId = section.props?.id;\n                }\n              }\n            );\n          }\n        });\n\n        if (sectionId) {\n          setInternalSelectedSectionId(sectionId);\n        }\n      }\n    }\n  }, [\n    props.selectedSubSectionId,\n    setInternalSelectedSectionId,\n    setSelectedSubSectionId,\n    children,\n    mode,\n    isProgrammaticallyScrolled\n  ]);\n\n  useEffect(() => {\n    const fillerDivObserver = new ResizeObserver(() => {\n      let heightDiff = 0;\n\n      const maxHeight = Math.min(objectPageRef.current?.clientHeight, window.innerHeight);\n      const availableScrollHeight = maxHeight - totalHeaderHeight;\n      const lastSectionDomRef = getLastObjectPageSection(objectPageRef);\n\n      if (lastSectionDomRef) {\n        const subSections = lastSectionDomRef.querySelectorAll('[id^=\"ObjectPageSubSection\"]');\n\n        let lastSubSectionHeight;\n        if (subSections.length > 0) {\n          lastSubSectionHeight = (subSections[subSections.length - 1] as HTMLElement).offsetHeight;\n        } else {\n          lastSubSectionHeight =\n            lastSectionDomRef.offsetHeight -\n            lastSectionDomRef.querySelector<HTMLElement>(\"[role='heading']\").offsetHeight;\n        }\n\n        heightDiff = Math.max(0, availableScrollHeight - lastSubSectionHeight);\n\n        if (isNaN(heightDiff)) {\n          heightDiff = 0;\n        }\n      }\n\n      objectPageRef.current?.style.setProperty(ObjectPageCssVariables.lastSectionMargin, `${heightDiff}px`);\n    });\n\n    fillerDivObserver.observe(objectPageRef.current);\n\n    return () => {\n      fillerDivObserver.disconnect();\n    };\n  }, [totalHeaderHeight, objectPageRef, children]);\n\n  const fireOnSelectedChangedEvent = debounce((e) => {\n    onSelectedSectionChanged(\n      enrichEventWithDetails(e, {\n        selectedSectionIndex: e.detail.index,\n        selectedSectionId: e.detail.props.id,\n        section: e.detail\n      })\n    );\n  }, 500);\n\n  const handleOnSubSectionSelected = useCallback(\n    (e) => {\n      isProgrammaticallyScrolled.current = true;\n      if (mode === ObjectPageMode.IconTabBar) {\n        const sectionId = e.detail.section.props?.id;\n        setInternalSelectedSectionId(sectionId);\n      }\n      const subSection = e.detail.subSection;\n      setSelectedSubSectionId(subSection.props.id);\n    },\n    [mode, setInternalSelectedSectionId, setSelectedSubSectionId, isProgrammaticallyScrolled]\n  );\n\n  const onToggleHeaderContentVisibility = useCallback(\n    (e) => {\n      const srcElement = e.target;\n      const shouldHideHeader = srcElement.icon === 'slim-arrow-up';\n      if (shouldHideHeader) {\n        objectPageRef.current?.classList.add(classes.headerCollapsed);\n      } else {\n        objectPageRef.current?.classList.remove(classes.headerCollapsed);\n      }\n\n      requestAnimationFrame(() => {\n        if (objectPageRef.current?.scrollTop > 0 && !shouldHideHeader) {\n          const prevHeaderTop = headerContentRef.current.style.top;\n          headerContentRef.current.style.top = `${topHeaderHeight}px`;\n          const prevAnchorTop = anchorBarRef.current.style.top;\n          anchorBarRef.current.style.top = `${headerContentRef.current.offsetHeight + topHeaderHeight}px`;\n          objectPageRef.current?.addEventListener(\n            'scroll',\n            (e) => {\n              if (prevHeaderTop ?? true) {\n                headerContentRef.current.style.top = prevHeaderTop;\n              } else {\n                headerContentRef.current.style.removeProperty('top');\n              }\n              if (prevAnchorTop ?? true) {\n                anchorBarRef.current.style.top = prevAnchorTop;\n              } else {\n                anchorBarRef.current.style.removeProperty('top');\n              }\n            },\n            { once: true }\n          );\n        }\n      });\n    },\n    [objectPageRef, classes.headerCollapsed, headerContentHeight, topHeaderHeight]\n  );\n\n  useEffect(() => {\n    requestAnimationFrame(() => {\n      const calculatedScrollBarWidth = getScrollBarWidth();\n      if (calculatedScrollBarWidth && calculatedScrollBarWidth !== 0 && calculatedScrollBarWidth !== SCROLL_BAR_WIDTH) {\n        setScrollbarWidth(calculatedScrollBarWidth);\n      }\n    });\n    isMounted.current = true;\n  }, [isMounted, setScrollbarWidth]);\n\n  const objectPageClasses = StyleClassHelper.of(classes.objectPage, GlobalStyleClasses.sapScrollBar);\n  if (className) {\n    objectPageClasses.put(className);\n  }\n\n  if (showTitleInHeaderContent) {\n    objectPageClasses.put(classes.titleInHeaderContent);\n  }\n\n  if (mode === ObjectPageMode.IconTabBar) {\n    objectPageClasses.put(classes.iconTabBarMode);\n  }\n\n  if (noHeader) {\n    objectPageClasses.put(classes.noHeader);\n  }\n\n  const scrollBarWidthPadding = useMemo(() => {\n    return {\n      paddingRight: isIE() ? 0 : `${scrollbarWidth}px`\n    };\n  }, [scrollbarWidth]);\n\n  const passThroughProps = usePassThroughHtmlProps(props, ['onSelectedSectionChanged']);\n\n  useEffect(() => {\n    const objectPageHeight = objectPageRef.current?.clientHeight ?? 1000;\n    const marginBottom = objectPageHeight - totalHeaderHeight;\n    const rootMargin = `-${totalHeaderHeight}px 0px -${marginBottom < 0 ? 0 : marginBottom}px 0px`;\n    const observer = new IntersectionObserver(\n      (elements) => {\n        elements.forEach((section) => {\n          if (section.isIntersecting && isProgrammaticallyScrolled.current === false) {\n            setInternalSelectedSectionId(extractSectionIdFromHtmlId(section.target.id));\n          }\n        });\n      },\n      {\n        root: objectPageRef.current,\n        rootMargin,\n        threshold: [0]\n      }\n    );\n\n    objectPageRef.current?.querySelectorAll('section[data-component-name=\"ObjectPageSection\"]').forEach((el) => {\n      observer.observe(el);\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [objectPageRef, children, totalHeaderHeight, setInternalSelectedSectionId, isProgrammaticallyScrolled]);\n\n  const headerClasses = StyleClassHelper.of(classes.header);\n  const anchorBarClasses = StyleClassHelper.of(classes.anchorBar);\n  if (isIE()) {\n    headerClasses.put(classes.iEClass);\n    anchorBarClasses.put(classes.iEClass);\n  }\n\n  const anchorBarPositionTop = noHeader\n    ? 0\n    : headerPinned || isIE()\n    ? topHeaderHeight + headerContentHeight\n    : topHeaderHeight;\n\n  return (\n    <div\n      data-component-name=\"ObjectPage\"\n      slot={slot}\n      className={objectPageClasses.toString()}\n      style={style}\n      ref={objectPageRef}\n      title={tooltip}\n      {...passThroughProps}\n    >\n      <header\n        ref={topHeaderRef}\n        role=\"banner\"\n        aria-roledescription=\"Object Page header\"\n        style={scrollBarWidthPadding}\n        className={headerClasses.className}\n      >\n        <div className={classes.titleBar}>\n          {(!showTitleInHeaderContent || headerContentHeight === 0) && (\n            <FlexBox alignItems={FlexBoxAlignItems.Center}>\n              {image && headerContentHeight === 0 && (\n                <div className={classes.avatar}>\n                  <CollapsedAvatar image={image} imageShapeCircle={imageShapeCircle} />\n                </div>\n              )}\n              <FlexBox direction={FlexBoxDirection.Column} className={classes.container}>\n                {breadcrumbs}\n                <FlexBox alignItems={FlexBoxAlignItems.Baseline}>\n                  <Title level={TitleLevel.H3} className={classes.title}>\n                    {title}\n                  </Title>\n                  <Label className={classes.subTitle}>{subTitle}</Label>\n                  <div className={classes.keyInfos}>{keyInfos}</div>\n                </FlexBox>\n              </FlexBox>\n              <Toolbar toolbarStyle={ToolbarStyle.Clear} design={ToolbarDesign.Transparent}>\n                <ToolbarSpacer />\n                {headerActions}\n              </Toolbar>\n            </FlexBox>\n          )}\n        </div>\n      </header>\n      <ObjectPageHeader\n        headerActions={headerActions}\n        image={image}\n        classes={classes}\n        imageShapeCircle={imageShapeCircle}\n        showTitleInHeaderContent={showTitleInHeaderContent}\n        headerContentProp={headerContent as ReactElement}\n        breadcrumbs={breadcrumbs}\n        keyInfos={keyInfos}\n        title={title}\n        subTitle={subTitle}\n        headerPinned={headerPinned}\n        topHeaderHeight={topHeaderHeight}\n        ref={headerContentRef}\n      />\n      <ObjectPageAnchorBar\n        sections={children}\n        selectedSectionId={internalSelectedSectionId}\n        handleOnSectionSelected={handleOnSectionSelected}\n        handleOnSubSectionSelected={handleOnSubSectionSelected}\n        headerContentPinnable={headerContentPinnable}\n        showHideHeaderButton={showHideHeaderButton && !noHeader}\n        headerPinned={headerPinned}\n        setHeaderPinned={setHeaderPinned}\n        headerContentHeight={headerContentHeight}\n        style={{ top: anchorBarPositionTop }}\n        onToggleHeaderContentVisibility={onToggleHeaderContentVisibility}\n        ref={anchorBarRef}\n        className={anchorBarClasses.className}\n      />\n      {isIE() && (\n        <div\n          className={classes.iEBackgroundElement}\n          style={{\n            height: `${anchorBarPositionTop + anchorBarRef.current?.offsetHeight ?? 0}px`,\n            width: `calc(100% - ${\n              objectPageRef?.current?.clientHeight < objectPageRef?.current?.scrollHeight ? '18px' : '0px'\n            })`\n          }}\n        />\n      )}\n      {isIE() ? (\n        <div style={{ marginTop: `${anchorBarPositionTop + anchorBarRef.current?.offsetHeight ?? 0}px` }}>\n          {mode === ObjectPageMode.IconTabBar ? getSectionById(children, internalSelectedSectionId) : children}\n        </div>\n      ) : mode === ObjectPageMode.IconTabBar ? (\n        getSectionById(children, internalSelectedSectionId)\n      ) : (\n        children\n      )}\n    </div>\n  );\n});\n\nObjectPage.displayName = 'ObjectPage';\n\nObjectPage.defaultProps = {\n  title: '',\n  image: null,\n  subTitle: '',\n  headerActions: [],\n  mode: ObjectPageMode.Default,\n  imageShapeCircle: false,\n  showHideHeaderButton: false,\n  onSelectedSectionChanged: () => {\n    /* noop */\n  },\n  noHeader: false\n};\n\nexport { ObjectPage };\n"],"names":["styles","base","margin","opacity","hidden","visible","transition","imageContainer","display","verticalAlign","maxHeight","width","maxWidth","image","height","useStyles","createUseStyles","name","CollapsedAvatar","props","imageShapeCircle","classes","useState","isMounted","setIsMounted","domRef","useRef","avatarContent","useMemo","borderRadius","overflow","React","cloneElement","size","AvatarSize","S","className","useEffect","containerClasses","StyleClassHelper","of","put","valueOf","ObjectPageCssVariables","anchorFloat","anchorLeft","anchorRight","avatarMargin","lastSectionMargin","objectPage","position","whiteSpace","fontFamily","ThemingParameters","sapFontFamily","backgroundColor","sapBackgroundColor","overflowX","overflowY","marginBottom","iconTabBarMode","noHeader","headerCollapsed","header","flexShrink","sapObjectHeader_Background","top","zIndex","iEClass","iEClassHeader","iEBackgroundElement","contentHeader","paddingBottom","paddingLeft","anchorBar","titleBar","padding","container","flex","boxSizing","title","subTitle","actions","paddingTop","right","left","marginLeft","titleInHeaderContent","alignSelf","marginRight","headerCustomContent","lineHeight","clear","headerCustomContentItem","headerImage","minWidth","keyInfos","flexDirection","avatar","stopPropagation","e","stopImmediatePropagation","StandardListItem","withWebComponent","displayName","defaultProps","iconEnd","infoState","ValueState","None","type","ListItemTypes","Active","selected","ObjectPageAnchorButton","ref","section","index","onShowSubSectionPopover","subSectionsAvailable","children","filter","subSections","item","isSubSection","length","element","current","parentElement","shadowRoot","querySelector","icon","document","createElement","style","pointerEvents","addEventListener","preventDefault","appendChild","id","safeGetChildrenArray","Children","toArray","Boolean","getSectionById","sections","find","objectPageSection","extractSectionIdFromHtmlId","replace","getLastObjectPageSection","querySelectorAll","addCustomCSS","anchorBarStyles","anchorBarActionButton","content","backgroundImage","sapHighlightColor","anchorBarActionButtonExpandable","anchorBarActionButtonPinnable","anchorBarActionPinnableAndExandable","ObjectPageAnchorBar","forwardRef","selectedSectionId","handleOnSectionSelected","handleOnSubSectionSelected","showHideHeaderButton","headerContentPinnable","onToggleHeaderContentVisibility","headerPinned","setHeaderPinned","headerContentHeight","shouldRenderHideHeaderButton","shouldRenderHeaderPinnableButton","showBothActions","popoverContent","setPopoverContent","popoverRef","onPinHeader","useCallback","target","pressed","onTabItemSelect","event","detail","tab","dataset","sectionId","el","enrichEventWithDetails","openBy","onSubSectionClick","selectedId","key","subSection","close","i18nBundle","useI18nBundle","map","getText","EXPAND_HEADER","COLLAPSE_HEADER","UNPIN_HEADER","PIN_HEADER","createPortal","PlacementType","Bottom","body","ObjectPageHeader","showTitleInHeaderContent","headerContentProp","breadcrumbs","topHeaderHeight","headerActions","L","headerStyles","isIE","renderedHeaderContent","firstElement","contents","Fragment","FlexBoxDirection","Column","TitleLevel","H3","c","ToolbarStyle","Clear","ToolbarDesign","Transparent","headerClasses","useObserveHeights","topHeader","headerContentRef","anchorBarRef","setTopHeaderHeight","setHeaderContentHeight","isIntersecting","setIsIntersecting","headerIntersectionObserver","IntersectionObserver","offsetHeight","rootMargin","root","threshold","observe","disconnect","headerContentResizeObserver","ResizeObserver","contentRect","headerContent","anchorBarHeight","totalHeaderHeight","SCROLL_BAR_WIDTH","ObjectPage","mode","tooltip","slot","onSelectedSectionChanged","alwaysShowContentHeader","firstSectionId","internalSelectedSectionId","setInternalSelectedSectionId","selectedSubSectionId","setSelectedSubSectionId","isProgrammaticallyScrolled","objectPageRef","useConsolidatedRef","topHeaderRef","scrollbarWidth","setScrollbarWidth","scrollToSection","scrollTo","behavior","childOffset","offsetTop","isNaN","newSelectionSection","oldSelectedSection","fireOnSelectedChangedEvent","ObjectPageMode","Default","IconTabBar","forEach","isValidElement","fillerDivObserver","heightDiff","Math","min","clientHeight","window","innerHeight","availableScrollHeight","lastSectionDomRef","lastSubSectionHeight","max","setProperty","debounce","selectedSectionIndex","srcElement","shouldHideHeader","classList","add","remove","requestAnimationFrame","scrollTop","prevHeaderTop","prevAnchorTop","removeProperty","once","calculatedScrollBarWidth","getScrollBarWidth","objectPageClasses","GlobalStyleClasses","sapScrollBar","scrollBarWidthPadding","paddingRight","passThroughProps","usePassThroughHtmlProps","objectPageHeight","observer","elements","anchorBarClasses","anchorBarPositionTop","toString","FlexBoxAlignItems","Center","Baseline","scrollHeight","marginTop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAMA,MAAM,GAAG;AACbC,EAAAA,IAAI,EAAE;AACJC,IAAAA,MAAM,EAAE,yCADJ;AAC+C;AACnDC,IAAAA,OAAO,EAAE;AAFL,GADO;AAKbC,EAAAA,MAAM,EAAE;AACND,IAAAA,OAAO,EAAE;AADH,GALK;AAQbE,EAAAA,OAAO,EAAE;AACPC,IAAAA,UAAU,EAAE,cADL;AAEPH,IAAAA,OAAO,EAAE;AAFF,GARI;AAYbI,EAAAA,cAAc,EAAE;AACdC,IAAAA,OAAO,EAAE,cADK;AAEdC,IAAAA,aAAa,EAAE,QAFD;AAGdC,IAAAA,SAAS,EAAE,MAHG;AAIdC,IAAAA,KAAK,EAAE,MAJO;AAKdC,IAAAA,QAAQ,EAAE;AALI,GAZH;AAmBbC,EAAAA,KAAK,EAAE;AACLF,IAAAA,KAAK,EAAE,MADF;AAELG,IAAAA,MAAM,EAAE;AAFH;AAnBM,CAAf;AAyBA,IAAMC,SAAS,GAAGC,eAAe,CAAChB,MAAD,EAAS;AACxCiB,EAAAA,IAAI,EAAE;AADkC,CAAT,CAAjC;AASO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAqC;AAAA,MAC1DN,KAD0D,GAC9BM,KAD8B,CAC1DN,KAD0D;AAAA,MACnDO,gBADmD,GAC9BD,KAD8B,CACnDC,gBADmD;AAElE,MAAMC,OAAO,GAAGN,SAAS,EAAzB;;AAFkE,kBAGhCO,QAAQ,CAAC,KAAD,CAHwB;AAAA;AAAA,MAG3DC,SAH2D;AAAA,MAGhDC,YAHgD;;AAIlE,MAAMC,MAAM,GAAGC,MAAM,EAArB;AAEA,MAAMC,aAAa,GAAGC,OAAO,CAAC,YAAM;AAClC,QAAI,CAACf,KAAL,EAAY,OAAO,IAAP;;AAEZ,QAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,0BACE;AACE,QAAA,SAAS,EAAEQ,OAAO,CAACd,cADrB;AAEE,QAAA,KAAK,EAAE;AAAEsB,UAAAA,YAAY,EAAET,gBAAgB,GAAG,KAAH,GAAW,CAA3C;AAA8CU,UAAAA,QAAQ,EAAE;AAAxD;AAFT,sBAIE;AAAK,QAAA,SAAS,EAAET,OAAO,CAACR,KAAxB;AAA+B,QAAA,GAAG,EAAEA,KAApC;AAA2C,QAAA,GAAG,EAAC;AAA/C,QAJF,CADF;AAQD,KATD,MASO;AAAA;;AACL,0BAAOkB,KAAK,CAACC,YAAN,CAAmBnB,KAAnB,EAA0B;AAC/BoB,QAAAA,IAAI,EAAEC,UAAU,CAACC,CADc;AAE/B;AACAC,QAAAA,SAAS,EAAE,gBAAAvB,KAAK,CAACM,KAAN,sDAAaiB,SAAb,aACJf,OAAO,CAACd,cADJ,+BACsBM,KAAK,CAACM,KAD5B,kDACsB,cAAaiB,SADnC,IAEPf,OAAO,CAACd;AALmB,OAA1B,CAAP;AAOD;AACF,GArB4B,EAqB1B,CAACM,KAAD,EAAQO,gBAAR,CArB0B,CAA7B;AAuBAiB,EAAAA,SAAS,CAAC,YAAM;AACdb,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,MAAMc,gBAAgB,GAAGC,gBAAgB,CAACC,EAAjB,CAAoBnB,OAAO,CAACpB,IAA5B,CAAzB;;AACA,MAAIsB,SAAJ,EAAe;AACbe,IAAAA,gBAAgB,CAACG,GAAjB,CAAqBpB,OAAO,CAAChB,OAA7B;AACD,GAFD,MAEO;AACLiC,IAAAA,gBAAgB,CAACG,GAAjB,CAAqBpB,OAAO,CAACjB,MAA7B;AACD;;AAED,sBACE;AAAK,IAAA,GAAG,EAAEqB,MAAV;AAAkB,IAAA,SAAS,EAAEa,gBAAgB,CAACI,OAAjB;AAA7B,KACGf,aADH,CADF;AAKD,CA7CM;;;ACrCA,IAAMgB,sBAAsB,GAAG;AACpCC,EAAAA,WAAW,EAAE,oCADuB;AAEpCC,EAAAA,UAAU,EAAE,mCAFwB;AAGpCC,EAAAA,WAAW,EAAE,oCAHuB;AAIpCC,EAAAA,YAAY,EAAE,oCAJsB;AAKpCC,EAAAA,iBAAiB,EAAE;AALiB,CAA/B;AAQP,IAAMhD,QAAM,GAAG;AACbiD,EAAAA,UAAU;AACRtC,IAAAA,KAAK,EAAE,MADC;AAERG,IAAAA,MAAM,EAAE,MAFA;AAGRJ,IAAAA,SAAS,EAAE,OAHH;AAIRwC,IAAAA,QAAQ,EAAE,UAJF;AAKRC,IAAAA,UAAU,EAAE,QALJ;AAMRC,IAAAA,UAAU,EAAEC,iBAAiB,CAACC,aANtB;AAORC,IAAAA,eAAe,EAAEF,iBAAiB,CAACG,kBAP3B;AAQRC,IAAAA,SAAS,EAAE,QARH;AASRC,IAAAA,SAAS,EAAE;AATH,kCAUPf,sBAAsB,CAACK,iBAVhB,EAUoC,CAVpC,gCAWR,2DAXQ,EAWqD;AAC3DxC,IAAAA,OAAO,EAAE;AADkD,GAXrD,gCAgBR,+FAhBQ,EAgByF;AAC/FA,IAAAA,OAAO,EAAE;AADsF,GAhBzF,gCAmBR,+DAnBQ,EAmByD;AAC/DmD,IAAAA,YAAY,gBAAShB,sBAAsB,CAACK,iBAAhC;AADmD,GAnBzD,eADG;AAwBb,kEACGL,sBAAsB,CAACC,WAD1B,EACwC,OADxC,gCAEGD,sBAAsB,CAACG,WAF1B,EAEwC,SAFxC,gCAGGH,sBAAsB,CAACE,UAH1B,EAGuC,OAHvC,gCAIGF,sBAAsB,CAACI,YAJ1B,EAIyC,YAJzC,eAxBa;AA8Bb,6EACGJ,sBAAsB,CAACC,WAD1B,EACwC,MADxC,kCAEGD,sBAAsB,CAACG,WAF1B,EAEwC,OAFxC,kCAGGH,sBAAsB,CAACE,UAH1B,EAGuC,SAHvC,kCAIGF,sBAAsB,CAACI,YAJ1B,EAIyC,YAJzC,iBA9Ba;AAoCba,EAAAA,cAAc,EAAE;AACd,gFAA4E;AAC1EpD,MAAAA,OAAO,EAAE;AADiE;AAD9D,GApCH;AAyCbqD,EAAAA,QAAQ,EAAE;AACR,iBAAa;AACXrD,MAAAA,OAAO,EAAE;AADE,KADL;AAIR,wBAAoB;AAClBA,MAAAA,OAAO,EAAE;AADS;AAJZ,GAzCG;AAiDbsD,EAAAA,eAAe,EAAE;AACf,wBAAoB;AAClBtD,MAAAA,OAAO,EAAE;AADS;AADL,GAjDJ;AAsDb;AACAuD,EAAAA,MAAM,EAAE;AACNC,IAAAA,UAAU,EAAE,CADN;AAENT,IAAAA,eAAe,EAAEF,iBAAiB,CAACY,0BAF7B;AAGNf,IAAAA,QAAQ,EAAE,QAHJ;AAINgB,IAAAA,GAAG,EAAE,CAJC;AAKNC,IAAAA,MAAM,EAAE;AALF,GAvDK;AA8DbC,EAAAA,OAAO,EAAE;AACPlB,IAAAA,QAAQ,EAAE,OADH;AAEPvC,IAAAA,KAAK,EAAE;AAFA,GA9DI;AAkEb0D,EAAAA,aAAa,EAAE;AACb1D,IAAAA,KAAK,EAAE;AADM,GAlEF;AAqEb2D,EAAAA,mBAAmB,EAAE;AACnBpB,IAAAA,QAAQ,EAAE,OADS;AAEnBK,IAAAA,eAAe,EAAEF,iBAAiB,CAACY;AAFhB,GArER;AAyEbM,EAAAA,aAAa,EAAE;AACbhB,IAAAA,eAAe,EAAEF,iBAAiB,CAACY,0BADtB;AAEbf,IAAAA,QAAQ,EAAE,QAFG;AAGbsB,IAAAA,aAAa,EAAE,SAHF;AAIb9D,IAAAA,SAAS,EAAE,OAJE;AAKboB,IAAAA,QAAQ,EAAE,QALG;AAMb2C,IAAAA,WAAW,EAAE;AANA,GAzEF;AAiFbC,EAAAA,SAAS,EAAE;AACTxB,IAAAA,QAAQ,EAAE,QADD;AAETiB,IAAAA,MAAM,EAAE,CAFC;AAGT,mCAA+B;AAHtB,GAjFE;AAsFbQ,EAAAA,QAAQ,EAAE;AACRC,IAAAA,OAAO,EAAE,aADD;AAERpE,IAAAA,OAAO,EAAE,OAFD;AAGR0C,IAAAA,QAAQ,EAAE;AAHF,GAtFG;AA2Fb2B,EAAAA,SAAS,EAAE;AACTC,IAAAA,IAAI,EAAE,SADG;AAETC,IAAAA,SAAS,EAAE;AAFF,GA3FE;AA+FbC,EAAAA,KAAK,EAAE;AACLJ,IAAAA,OAAO,EAAE;AADJ,GA/FM;AAkGbK,EAAAA,QAAQ,EAAE;AACRxE,IAAAA,aAAa,EAAE,UADP;AAERmE,IAAAA,OAAO,EAAE;AAFD,GAlGG;AAsGbM,EAAAA,OAAO,EAAE;AACPhC,IAAAA,QAAQ,EAAE,UADH;AAEPgB,IAAAA,GAAG,EAAE,GAFE;AAGPiB,IAAAA,UAAU,EAAE,SAHL;AAIPhB,IAAAA,MAAM,EAAE,CAJD;AAKPiB,IAAAA,KAAK,gBAASzC,sBAAsB,CAACG,WAAhC,MALE;AAMPuC,IAAAA,IAAI,gBAAS1C,sBAAsB,CAACE,UAAhC,MANG;AAOPrC,IAAAA,OAAO,EAAE,cAPF;AAQP,2BAAcmC,sBAAsB,CAACC,WAArC,MARO;AASPnC,IAAAA,aAAa,EAAE,KATR;AAUP,aAAS;AACP6E,MAAAA,UAAU,EAAE,QADL;AAEPV,MAAAA,OAAO,EAAE;AAFF;AAVF,GAtGI;AAqHbW,EAAAA,oBAAoB,EAAE;AACpB,mBAAe;AACbX,MAAAA,OAAO,EAAE;AADI,KADK;AAIpB,mBAAe;AACbY,MAAAA,SAAS,EAAE;AADE,KAJK;AAOpB,uBAAmB;AACjBL,MAAAA,UAAU,EAAE,CADK;AAEjB,eAAS;AACP3E,QAAAA,OAAO,EAAE,MADF;AAEPC,QAAAA,aAAa,EAAE,KAFR;AAGP,+BAAuB;AACrBgF,UAAAA,WAAW,EAAE,MADQ;AAErB9B,UAAAA,YAAY,EAAE;AAFO;AAHhB;AAFQ;AAPC,GArHT;AAwIb+B,EAAAA,mBAAmB,EAAE;AACnBlF,IAAAA,OAAO,EAAE,cADU;AAEnBC,IAAAA,aAAa,EAAE,KAFI;AAGnB,aAAS;AACP,eAAO,MADA;AAEPgF,MAAAA,WAAW,EAAE,MAFN;AAGP9B,MAAAA,YAAY,EAAE,MAHP;AAIPgC,MAAAA,UAAU,EAAE;AAJL,KAHU;AASnB,eAAW;AACTC,MAAAA,KAAK,EAAE;AADE;AATQ,GAxIR;AAqJbC,EAAAA,uBAAuB,EAAE;AACvBP,IAAAA,UAAU,EAAE;AADW,GArJZ;AAyJbQ,EAAAA,WAAW,EAAE;AACXC,IAAAA,QAAQ,EAAE,MADC;AAEXnF,IAAAA,QAAQ,EAAE,MAFC;AAGXF,IAAAA,SAAS,EAAE,MAHA;AAIXF,IAAAA,OAAO,EAAE,cAJE;AAKXiF,IAAAA,WAAW,EAAE,MALF;AAMX9B,IAAAA,YAAY,EAAE;AANH,GAzJA;AAiKb9C,EAAAA,KAAK,EAAE;AACLF,IAAAA,KAAK,EAAE,MADF;AAELG,IAAAA,MAAM,EAAE;AAFH,GAjKM;AAqKbkF,EAAAA,QAAQ,EAAE;AACR,aAAS;AACPV,MAAAA,UAAU,EAAE;AADL,KADD;AAIR9E,IAAAA,OAAO,EAAE,MAJD;AAKRyF,IAAAA,aAAa,EAAE,KALP;AAMRT,IAAAA,SAAS,EAAE;AANH,GArKG;AA6KbU,EAAAA,MAAM,EAAE;AACNhG,IAAAA,MAAM,gBAASyC,sBAAsB,CAACI,YAAhC;AADA;AA7KK,CAAf;;ACVO,IAAMoD,eAAe,GAAG,SAAlBA,eAAkB,CAACC,CAAD,EAAO;AACpCA,EAAAA,CAAC,CAACD,eAAF;AACAC,EAAAA,CAAC,CAACC,wBAAF;AACD,CAHM;;AC4DP;AACA;AACA;AACA;AACA;AACA,IAAMC,gBAA+C,GAAGC,gBAAgB,CACtE,QADsE,EAEtE,CAAC,aAAD,EAAgB,MAAhB,EAAwB,OAAxB,EAAiC,MAAjC,EAAyC,WAAzC,EAAsD,MAAtD,CAFsE,EAGtE,CAAC,SAAD,EAAY,UAAZ,CAHsE,EAItE,EAJsE,EAKtE,CAAC,cAAD,CALsE,CAAxE;AAQAD,gBAAgB,CAACE,WAAjB,GAA+B,kBAA/B;AAEAF,gBAAgB,CAACG,YAAjB,GAAgC;AAC9BC,EAAAA,OAAO,EAAE,KADqB;AAE9BC,EAAAA,SAAS,EAAEC,UAAU,CAACC,IAFQ;AAG9BC,EAAAA,IAAI,EAAEC,aAAa,CAACC,MAHU;AAI9BC,EAAAA,QAAQ,EAAE;AAJoB,CAAhC;;AChEO,IAAMC,sBAAqD,GAAG,SAAxDA,sBAAwD,CAAC/F,KAAD,EAAsC;AACzG,MAAMgG,GAAG,GAAGzF,MAAM,EAAlB;AADyG,MAEjG0F,OAFiG,GAE3CjG,KAF2C,CAEjGiG,OAFiG;AAAA,MAExFC,KAFwF,GAE3ClG,KAF2C,CAExFkG,KAFwF;AAAA,MAEjFJ,QAFiF,GAE3C9F,KAF2C,CAEjF8F,QAFiF;AAAA,MAEvEK,uBAFuE,GAE3CnG,KAF2C,CAEvEmG,uBAFuE;AAIzG,MAAIC,oBAAoB,GAAG,KAA3B;;AACA,MAAIH,OAAO,CAACjG,KAAR,CAAcqG,QAAd,IAA0BJ,OAAO,CAACjG,KAAR,CAAcqG,QAAd,CAAuBC,MAArD,EAA6D;AAC3D,QAAMC,WAAW,GAAGN,OAAO,CAACjG,KAAR,CAAcqG,QAAd,CAAuBC,MAAvB,CAA8B,UAACE,IAAD;AAAA,aAAUA,IAAI,CAACxG,KAAL,IAAcwG,IAAI,CAACxG,KAAL,CAAWyG,YAAnC;AAAA,KAA9B,CAApB;AACAL,IAAAA,oBAAoB,GAAGG,WAAW,CAACG,MAAZ,GAAqB,CAA5C;AACD;;AAEDxF,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIkF,oBAAJ,EAA0B;AACxB,UAAI;AAAA;;AACF,YAAMO,OAAO,mBAAGX,GAAG,CAACY,OAAP,0EAAG,aAAaC,aAAhB,oFAAG,sBAA4BC,UAA/B,2DAAG,uBAAwCC,aAAxC,kDAC2Bb,KAAK,GAAG,CADnC,oCAAhB;;AAIA,YAAIS,OAAO,IAAI,CAACA,OAAO,CAACI,aAAR,CAAsB,UAAtB,CAAhB,EAAmD;AACjD,cAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAb;AACCF,UAAAA,IAAD,CAAclH,IAAd,GAAqB,iBAArB;AACAkH,UAAAA,IAAI,CAACG,KAAL,CAAW7H,aAAX,GAA2B,aAA3B;AACA0H,UAAAA,IAAI,CAACG,KAAL,CAAWC,aAAX,GAA2B,KAA3B;AACAJ,UAAAA,IAAI,CAACK,gBAAL,CAAsB,OAAtB,EAA+B,UAACpC,CAAD,EAAO;AACpCA,YAAAA,CAAC,CAACC,wBAAF;AACAD,YAAAA,CAAC,CAACqC,cAAF;AACArC,YAAAA,CAAC,CAACD,eAAF;AACAmB,YAAAA,uBAAuB,CAAClB,CAAD,EAAIgB,OAAJ,CAAvB;AACD,WALD;AAMAU,UAAAA,OAAO,CAACY,WAAR,CAAoBP,IAApB;AACD;AACF,OAlBD,CAkBE,OAAO/B,CAAP,EAAU;AAEX;AACF;AACF,GAxBQ,EAwBN,CAACmB,oBAAD,EAAuBJ,GAAvB,EAA4BG,uBAA5B,EAAqDF,OAArD,CAxBM,CAAT;AA0BA,sBACE,oBAAC,GAAD;AACE,IAAA,GAAG,EAAED,GADP;AAEE,kBAAYE,KAFd;AAGE,uBAAiBD,OAAO,CAACjG,KAAR,CAAcwH,EAHjC;AAIE,IAAA,IAAI,EAAEvB,OAAO,CAACjG,KAAR,CAAc6D,KAJtB;AAKE,IAAA,QAAQ,EAAEiC;AALZ,IADF;AASD,CA7CM;;ACTA,IAAM2B,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAqDpB,QAArD;AAAA,SAClCqB,QAAQ,CAACC,OAAT,CAAiBtB,QAAjB,EAA2BC,MAA3B,CAAkCsB,OAAlC,CADkC;AAAA,CAA7B;AAGA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,QAAD,EAAoDN,EAApD,EAA2D;AACvF,SAAOC,oBAAoB,CAACK,QAAD,CAApB,CAA+BC,IAA/B,CAAoC,UAACC,iBAAD;AAAA;;AAAA,WAAqC,0BAAAA,iBAAiB,CAAChI,KAAlB,gFAAyBwH,EAAzB,MAAgCA,EAArE;AAAA,GAApC,CAAP;AACD,CAFM;AAIA,IAAMS,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACT,EAAD,EAAgB;AACxD,SAAOA,EAAE,CAACU,OAAH,CAAW,qBAAX,EAAkC,EAAlC,CAAP;AACD,CAFM;AAIA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACnC,GAAD,EAAiD;AAAA;;AACvF,MAAM8B,QAAQ,mBAAG9B,GAAG,CAACY,OAAP,iDAAG,aAAawB,gBAAb,CAA2C,2BAA3C,CAAjB;;AACA,MAAI,CAACN,QAAD,IAAaA,QAAQ,CAACpB,MAAT,GAAkB,CAAnC,EAAsC;AACpC,WAAO,IAAP;AACD;;AAED,SAAOoB,QAAQ,CAACA,QAAQ,CAACpB,MAAT,GAAkB,CAAnB,CAAf;AACD,CAPM;;ACeP2B,YAAY,CACV,YADU,+NAAZ;AAYAA,YAAY,CACV,kBADU,+NAAZ;AAaA,IAAMC,eAAe,GAAG;AACtBC,EAAAA,qBAAqB,EAAE;AACrBxG,IAAAA,QAAQ,EAAE,UADW;AAErBgB,IAAAA,GAAG,cAFkB;AAGrBoB,IAAAA,UAAU,cAHW;AAIrBD,IAAAA,IAAI,EAAE,KAJe;AAKrB,yBAAqB;AACnBsE,MAAAA,OAAO,EAAE,IADU;AAEnBzG,MAAAA,QAAQ,EAAE,UAFS;AAGnBvC,MAAAA,KAAK,EAAE,MAHY;AAInBuD,MAAAA,GAAG,EAAE,KAJc;AAKnBpD,MAAAA,MAAM,EAAE;AALW,KALA;AAYrB,gBAAY;AACVsE,MAAAA,KAAK,EAAE,MADG;AAEVwE,MAAAA,eAAe,qCAA8BvG,iBAAiB,CAACwG,iBAAhD;AAFL,KAZS;AAgBrB,eAAW;AACTD,MAAAA,eAAe,sCAA+BvG,iBAAiB,CAACwG,iBAAjD,wBADN;AAETxE,MAAAA,IAAI,EAAE;AAFG;AAhBU,GADD;AAsBtByE,EAAAA,+BAA+B,EAAE,EAtBX;AAuBtBC,EAAAA,6BAA6B,EAAE,EAvBT;AAwBtBC,EAAAA,mCAAmC,EAAE;AACnC,uCAAmC;AACjC1E,MAAAA,UAAU,EAAE,SADqB;AAEjC,kBAAY;AACVsE,QAAAA,eAAe,EAAE;AADP;AAFqB,KADA;AAOnC,yCAAqC;AACnCtE,MAAAA,UAAU,EAAE;AADuB;AAPF;AAxBf,CAAxB;AAqCA,IAAMvE,WAAS,GAAGC,eAAe,CAACyI,eAAD,EAAkB;AAAExI,EAAAA,IAAI,EAAE;AAAR,CAAlB,CAAjC;AAiBA,IAAMgJ,mBAAmB,gBAAGC,UAAU,CAAC,UAAC/I,KAAD,EAAegG,GAAf,EAA+C;AAAA;;AAAA,MAElF8B,QAFkF,GAchF9H,KAdgF,CAElF8H,QAFkF;AAAA,MAGlFkB,iBAHkF,GAchFhJ,KAdgF,CAGlFgJ,iBAHkF;AAAA,MAIlFC,uBAJkF,GAchFjJ,KAdgF,CAIlFiJ,uBAJkF;AAAA,MAKlFC,0BALkF,GAchFlJ,KAdgF,CAKlFkJ,0BALkF;AAAA,MAMlFC,oBANkF,GAchFnJ,KAdgF,CAMlFmJ,oBANkF;AAAA,MAOlFC,qBAPkF,GAchFpJ,KAdgF,CAOlFoJ,qBAPkF;AAAA,MAQlFC,+BARkF,GAchFrJ,KAdgF,CAQlFqJ,+BARkF;AAAA,MASlFC,YATkF,GAchFtJ,KAdgF,CASlFsJ,YATkF;AAAA,MAUlFC,eAVkF,GAchFvJ,KAdgF,CAUlFuJ,eAVkF;AAAA,MAWlFC,mBAXkF,GAchFxJ,KAdgF,CAWlFwJ,mBAXkF;AAAA,MAYlFrC,KAZkF,GAchFnH,KAdgF,CAYlFmH,KAZkF;AAAA,MAalFlG,SAbkF,GAchFjB,KAdgF,CAalFiB,SAbkF;AAgBpF,MAAMf,OAAO,GAAGN,WAAS,EAAzB;AAEA,MAAM6J,4BAA4B,GAAGN,oBAArC;AACA,MAAMO,gCAAgC,GAAGN,qBAAqB,IAAII,mBAAmB,GAAG,CAAxF;AACA,MAAMG,eAAe,GAAGD,gCAAgC,IAAID,4BAA5D;;AApBoF,kBAqBxCtJ,QAAQ,CAAe,IAAf,CArBgC;AAAA;AAAA,MAqB7EyJ,cArB6E;AAAA,MAqB7DC,iBArB6D;;AAsBpF,MAAMC,UAAU,GAAGvJ,MAAM,CAAmB,IAAnB,CAAzB;AAEA,MAAMwJ,WAAW,GAAGC,WAAW,CAC7B,UAAC/E,CAAD,EAAO;AACLsE,IAAAA,eAAe,CAACtE,CAAC,CAACgF,MAAF,CAASC,OAAV,CAAf;AACD,GAH4B,EAI7B,CAACX,eAAD,CAJ6B,CAA/B;AAOA,MAAMY,eAAe,GAAGH,WAAW,CACjC,UAACI,KAAD,EAAW;AAAA,gCACoBA,KAAK,CAACC,MAAN,CAAaC,GAAb,CAAiBC,OADrC;AAAA,QACDC,SADC,yBACDA,SADC;AAAA,QACUtE,KADV,yBACUA,KADV;;AAGT,QAAMD,OAAO,GAAGwB,oBAAoB,CAAeK,QAAf,CAApB,CAA6CC,IAA7C,CAAkD,UAAC0C,EAAD;AAAA,aAAQA,EAAE,CAACzK,KAAH,CAASwH,EAAT,IAAegD,SAAvB;AAAA,KAAlD,CAAhB;AACAvB,IAAAA,uBAAuB,CACrByB,sBAAsB,CAAC,EAAD,kCACjBzE,OADiB;AAEpBC,MAAAA,KAAK,EAALA;AAFoB,OADD,CAAvB;AAMD,GAXgC,EAYjC,CAAC4B,QAAD,CAZiC,CAAnC;AAeA,MAAM3B,uBAAuB,GAAG6D,WAAW,CACzC,UAAC/E,CAAD,EAAIgB,OAAJ,EAAgB;AACd4D,IAAAA,iBAAiB,CAAC5D,OAAD,CAAjB;AACA6D,IAAAA,UAAU,CAAClD,OAAX,CAAmB+D,MAAnB,CAA0B1F,CAAC,CAACgF,MAAF,CAASpD,aAAnC;AACD,GAJwC,EAKzC,CAACgD,iBAAD,EAAoBC,UAApB,CALyC,CAA3C;AAQA,MAAMc,iBAAiB,GAAGZ,WAAW,CACnC,UAAC/E,CAAD,EAAO;AACL,QAAM4F,UAAU,GAAG5F,CAAC,CAACoF,MAAF,CAAS7D,IAAT,CAAc+D,OAAd,CAAsBO,GAAzC;AACA,QAAMC,UAAU,GAAGnB,cAAc,CAAC5J,KAAf,CAAqBqG,QAArB,CAChBC,MADgB,CACT,UAACE,IAAD;AAAA,aAAUA,IAAI,CAACxG,KAAL,IAAcwG,IAAI,CAACxG,KAAL,CAAWyG,YAAnC;AAAA,KADS,EAEhBsB,IAFgB,CAEX,UAACvB,IAAD;AAAA,aAAUA,IAAI,CAACxG,KAAL,CAAWwH,EAAX,KAAkBqD,UAA5B;AAAA,KAFW,CAAnB;;AAGA,QAAIE,UAAJ,EAAgB;AACd7B,MAAAA,0BAA0B,CAACwB,sBAAsB,CAACzF,CAAD,EAAI;AAAEgB,QAAAA,OAAO,EAAE2D,cAAX;AAA2BmB,QAAAA,UAAU,EAAVA;AAA3B,OAAJ,CAAvB,CAA1B;AACD;;AACDjB,IAAAA,UAAU,CAAClD,OAAX,CAAmBoE,KAAnB;AACD,GAVkC,EAWnC,CAAC9B,0BAAD,EAA6BY,UAA7B,EAAyCF,cAAzC,CAXmC,CAArC;AAcA,MAAMqB,UAAU,GAAGC,aAAa,CAAC,0BAAD,CAAhC;AAEA,sBACE;AAAS,IAAA,SAAS,EAAEjK,SAApB;AAA+B,IAAA,IAAI,EAAC,YAApC;AAAiD,IAAA,KAAK,EAAEkG,KAAxD;AAA+D,IAAA,GAAG,EAAEnB;AAApE,kBACE,oBAAC,YAAD;AAAc,IAAA,SAAS,MAAvB;AAAwB,IAAA,KAAK,MAA7B;AAA8B,IAAA,WAAW,EAAEmE,eAA3C;AAA4D,IAAA,YAAY;AAAxE,KACG1C,oBAAoB,CAACK,QAAD,CAApB,CAA+BqD,GAA/B,CAAmC,UAAClF,OAAD,EAAwBC,KAAxB,EAAkC;AAAA;;AACpE,wBACE,oBAAC,sBAAD;AACE,MAAA,GAAG,qCAAYD,OAAO,CAACjG,KAApB,mDAAY,eAAewH,EAA3B,CADL;AAEE,MAAA,OAAO,EAAEvB,OAFX;AAGE,MAAA,KAAK,EAAEC,KAHT;AAIE,MAAA,QAAQ,EAAE8C,iBAAiB,yBAAK/C,OAAO,CAACjG,KAAb,oDAAK,gBAAewH,EAApB,CAJ7B;AAKE,MAAA,uBAAuB,EAAErB;AAL3B,MADF;AASD,GAVA,CADH,CADF,EAcGsD,4BAA4B,iBAC3B,oBAAC,MAAD;AACE,IAAA,IAAI,EAAED,mBAAmB,KAAK,CAAxB,GAA4B,iBAA5B,GAAgD,eADxD;AAEE,IAAA,OAAO,EAAEH,+BAFX;AAGE,IAAA,SAAS,YAAKnJ,OAAO,CAACqI,qBAAb,cAAsCrI,OAAO,CAACyI,+BAA9C,cACPgB,eAAe,GAAGzJ,OAAO,CAAC2I,mCAAX,GAAiD,EADzD,CAHX;AAME,6CAAsC,EANxC;AAOE,IAAA,OAAO,EAAEoC,UAAU,CAACG,OAAX,CAAmB5B,mBAAmB,KAAK,CAAxB,GAA4B6B,aAA5B,GAA4CC,eAA/D,CAPX;AAQE,kBAAYL,UAAU,CAACG,OAAX,CAAmB5B,mBAAmB,KAAK,CAAxB,GAA4B6B,aAA5B,GAA4CC,eAA/D;AARd,IAfJ,EA0BG5B,gCAAgC,iBAC/B,oBAAC,YAAD;AACE,IAAA,IAAI,EAAC,aADP;AAEE,IAAA,OAAO,EAAEJ,YAFX;AAGE,IAAA,OAAO,EAAES,WAHX;AAIE,IAAA,SAAS,YAAK7J,OAAO,CAACqI,qBAAb,cAAsCrI,OAAO,CAAC0I,6BAA9C,cACPe,eAAe,GAAGzJ,OAAO,CAAC2I,mCAAX,GAAiD,EADzD,CAJX;AAOE,6CAAsC,EAPxC;AAQE,IAAA,OAAO,EAAEoC,UAAU,CAACG,OAAX,CAAmB9B,YAAY,GAAGiC,YAAH,GAAkBC,UAAjD,CARX;AASE,kBAAYP,UAAU,CAACG,OAAX,CAAmB9B,YAAY,GAAGiC,YAAH,GAAkBC,UAAjD;AATd,IA3BJ,eAuCGC,YAAY,eACX,oBAAC,OAAD;AAAS,IAAA,aAAa,EAAEC,aAAa,CAACC,MAAtC;AAA8C,IAAA,OAAO,MAArD;AAAsD,IAAA,GAAG,EAAE7B,UAA3D;AAAuE,IAAA,YAAY,EAAE9E;AAArF,kBACE,oBAAC,IAAD;AAAM,IAAA,WAAW,EAAE4F;AAAnB,KACGhB,cADH,aACGA,cADH,gDACGA,cAAc,CAAE5J,KADnB,0DACG,sBAAuBqG,QAAvB,CACEC,MADF,CACS,UAACE,IAAD;AAAA,WAAUA,IAAI,CAACxG,KAAL,IAAcwG,IAAI,CAACxG,KAAL,CAAWyG,YAAnC;AAAA,GADT,EAEE0E,GAFF,CAEM,UAAC3E,IAAD;AAAA,wBACH,oBAAC,gBAAD;AAAkB,MAAA,GAAG,EAAEA,IAAI,CAACxG,KAAL,CAAWwH,EAAlC;AAAsC,kBAAUhB,IAAI,CAACxG,KAAL,CAAWwH;AAA3D,OACGhB,IAAI,CAACxG,KAAL,CAAW6D,KADd,CADG;AAAA,GAFN,CADH,CADF,CADW,EAYXoD,QAAQ,CAAC2E,IAZE,CAvCf,CADF;AAwDD,CA9HqC,CAAtC;AAgIA9C,mBAAmB,CAACzD,WAApB,GAAkC,qBAAlC;;AC7MO,IAAMwG,gBAAgB,gBAAG9C,UAAU,CAAC,UAAC/I,KAAD,EAAegG,GAAf,EAAkD;AAAA,MAEzFtG,KAFyF,GAcvFM,KAduF,CAEzFN,KAFyF;AAAA,MAGzFQ,OAHyF,GAcvFF,KAduF,CAGzFE,OAHyF;AAAA,MAIzFD,gBAJyF,GAcvFD,KAduF,CAIzFC,gBAJyF;AAAA,MAKzF6L,wBALyF,GAcvF9L,KAduF,CAKzF8L,wBALyF;AAAA,MAMzFC,iBANyF,GAcvF/L,KAduF,CAMzF+L,iBANyF;AAAA,MAOzFC,WAPyF,GAcvFhM,KAduF,CAOzFgM,WAPyF;AAAA,MAQzFnI,KARyF,GAcvF7D,KAduF,CAQzF6D,KARyF;AAAA,MASzFC,QATyF,GAcvF9D,KAduF,CASzF8D,QATyF;AAAA,MAUzFe,QAVyF,GAcvF7E,KAduF,CAUzF6E,QAVyF;AAAA,MAWzFyE,YAXyF,GAcvFtJ,KAduF,CAWzFsJ,YAXyF;AAAA,MAYzF2C,eAZyF,GAcvFjM,KAduF,CAYzFiM,eAZyF;AAAA,MAazFC,aAbyF,GAcvFlM,KAduF,CAazFkM,aAbyF;AAgB3F,MAAMnH,MAAM,GAAGtE,OAAO,CAAC,YAAM;AAC3B,QAAI,CAACf,KAAL,EAAY;AACV,aAAO,IAAP;AACD;;AAED,QAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,0BACE;AACE,QAAA,SAAS,EAAEQ,OAAO,CAACyE,WADrB;AAEE,QAAA,KAAK,EAAE;AAAEjE,UAAAA,YAAY,EAAET,gBAAgB,GAAG,KAAH,GAAW,CAA3C;AAA8CU,UAAAA,QAAQ,EAAE;AAAxD;AAFT,sBAIE;AAAK,QAAA,GAAG,EAAEjB,KAAV;AAAiB,QAAA,SAAS,EAAEQ,OAAO,CAACR,KAApC;AAA2C,QAAA,GAAG,EAAC;AAA/C,QAJF,CADF;AAQD,KATD,MASO;AAAA;;AACL,0BAAOkB,KAAK,CAACC,YAAN,CAAmBnB,KAAnB,EAA0B;AAC/BoB,QAAAA,IAAI,EAAEC,UAAU,CAACoL,CADc;AAE/BlL,QAAAA,SAAS,EAAE,gBAAAvB,KAAK,CAACM,KAAN,sDAAaiB,SAAb,aAA4Bf,OAAO,CAACyE,WAApC,+BAAmDjF,KAAK,CAACM,KAAzD,kDAAmD,cAAaiB,SAAhE,IAA8Ef,OAAO,CAACyE;AAFlE,OAA1B,CAAP;AAID;AACF,GApBqB,EAoBnB,CAACjF,KAAD,EAAQQ,OAAO,CAACyE,WAAhB,EAA6BzE,OAAO,CAACR,KAArC,EAA4CO,gBAA5C,CApBmB,CAAtB;AAsBA,MAAMmM,YAAY,GAAG3L,OAAO,CAAgB,YAAM;AAChD,QAAI6I,YAAY,IAAI+C,IAAI,EAAxB,EAA4B;AAC1B,aAAO;AACLtJ,QAAAA,GAAG,YAAKkJ,eAAL,OADE;AAELjJ,QAAAA,MAAM,EAAE;AAFH,OAAP;AAID;;AAED,WAAO,IAAP;AACD,GAT2B,EASzB,CAACsG,YAAD,EAAe2C,eAAf,CATyB,CAA5B;AAWA,MAAIK,qBAAqB,gBACvB,0CACGvH,MADH,EAEGgH,iBAAiB,iBAAI;AAAM,IAAA,SAAS,EAAE7L,OAAO,CAACqE;AAAzB,KAA+CwH,iBAA/C,CAFxB,CADF;;AAOA,MAAID,wBAAJ,EAA8B;AAC5B,QAAIS,YAAJ;AACA,QAAIC,QAAQ,GAAG,EAAf;;AAEA,QAAI,CAAAT,iBAAiB,SAAjB,IAAAA,iBAAiB,WAAjB,YAAAA,iBAAiB,CAAEpG,IAAnB,MAA4B/E,KAAK,CAAC6L,QAAtC,EAAgD;AAAA,kCAChBhF,oBAAoB,CAACsE,iBAAiB,CAAC/L,KAAlB,CAAwBqG,QAAzB,CADJ;;AAAA;;AAC7CkG,MAAAA,YAD6C;AAC5BC,MAAAA,QAD4B;AAE/C,KAFD,MAEO;AACLD,MAAAA,YAAY,GAAGR,iBAAf;AACD;;AACDO,IAAAA,qBAAqB,gBACnB,uDACE,oBAAC,OAAD,QACGvH,MADH,eAEE,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAE2H,gBAAgB,CAACC;AAArC,oBACE,iCAAMX,WAAN,CADF,eAEE,oBAAC,OAAD,qBACE,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAEU,gBAAgB,CAACC;AAArC,oBACE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEC,UAAU,CAACC,EAAzB;AAA6B,MAAA,SAAS,EAAE3M,OAAO,CAAC2D;AAAhD,OACGA,KADH,CADF,eAIE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAE3D,OAAO,CAAC4D;AAA1B,OAAqCA,QAArC,CAJF,eAKE,uCAAQyI,YAAR,CALF,CADF,eAQE,oBAAC,OAAD,QACGC,QAAQ,CAACrB,GAAT,CAAa,UAAC2B,CAAD,EAAI5G,KAAJ;AAAA,0BACZ;AAAK,QAAA,GAAG,0BAAmBA,KAAnB,CAAR;AAAoC,QAAA,SAAS,EAAEhG,OAAO,CAACwE;AAAvD,SACGoI,CADH,CADY;AAAA,KAAb,CADH,CARF,eAeE;AAAK,MAAA,SAAS,EAAE5M,OAAO,CAAC2E;AAAxB,OAAmCA,QAAnC,CAfF,CAFF,CAFF,eAsBE,oBAAC,OAAD;AAAS,MAAA,YAAY,EAAEkI,YAAY,CAACC,KAApC;AAA2C,MAAA,MAAM,EAAEC,aAAa,CAACC;AAAjE,oBACE,oBAAC,aAAD,OADF,EAEGhB,aAFH,CAtBF,CADF,CADF;AA+BD;;AAED,MAAMiB,aAAa,GAAG/L,gBAAgB,CAACC,EAAjB,CAAoBnB,OAAO,CAACkD,aAA5B,CAAtB;;AACA,MAAIiJ,IAAI,EAAR,EAAY;AACVc,IAAAA,aAAa,CAAC7L,GAAd,CAAkBpB,OAAO,CAAC+C,OAA1B;AACAkK,IAAAA,aAAa,CAAC7L,GAAd,CAAkBpB,OAAO,CAACgD,aAA1B;AACD;;AAED,sBACE;AAAK,IAAA,KAAK,EAAEkJ,YAAZ;AAA0B,IAAA,SAAS,EAAEe,aAAa,CAAClM,SAAnD;AAA8D,IAAA,GAAG,EAAE+E;AAAnE,KACGsG,qBADH,CADF;AAKD,CA7GyC,CAAnC;AA+GPT,gBAAgB,CAACxG,WAAjB,GAA+B,kBAA/B;;ACzIO,IAAM+H,iBAAiB,GAAG,SAApBA,iBAAoB,CAACtL,UAAD,EAAauL,SAAb,EAAwBC,gBAAxB,EAA0CC,YAA1C,QAAyE;AAAA;;AAAA,MAAf7K,QAAe,QAAfA,QAAe;;AAAA,kBAC1DvC,QAAQ,CAAC,CAAD,CADkD;AAAA;AAAA,MACjG8L,eADiG;AAAA,MAChFuB,kBADgF;;AAAA,mBAElDrN,QAAQ,CAAC,CAAD,CAF0C;AAAA;AAAA,MAEjGqJ,mBAFiG;AAAA,MAE5EiE,sBAF4E;;AAAA,mBAG5DtN,QAAQ,CAAC,IAAD,CAHoD;AAAA;AAAA,MAGjGuN,cAHiG;AAAA,MAGjFC,iBAHiF;;AAKxGzM,EAAAA,SAAS,CAAC,YAAM;AACd,QAAM0M,0BAA0B,GAAG,IAAIC,oBAAJ,CACjC,iBAAc;AAAA;AAAA,UAAZjL,MAAY;;AACZ,UAAIA,MAAM,CAAC8K,cAAX,EAA2B;AACzBC,QAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAF,QAAAA,sBAAsB,CAAE7K,MAAM,CAACqH,MAAR,CAA+B6D,YAAhC,CAAtB;AACD,OAHD,MAGO;AACLH,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAF,QAAAA,sBAAsB,CAAC,CAAD,CAAtB;AACD;AACF,KATgC,EAUjC;AAAEM,MAAAA,UAAU,aAAM9B,eAAN,mBAAZ;AAAmD+B,MAAAA,IAAI,EAAElM,UAAU,CAAC8E,OAApE;AAA6EqH,MAAAA,SAAS,EAAE;AAAxF,KAViC,CAAnC;;AAaA,QAAIX,gBAAgB,CAAC1G,OAArB,EAA8B;AAC5BgH,MAAAA,0BAA0B,CAACM,OAA3B,CAAmCZ,gBAAgB,CAAC1G,OAApD;AACD;;AAED,WAAO,YAAM;AACXgH,MAAAA,0BAA0B,CAACO,UAA3B;AACD,KAFD;AAGD,GArBQ,EAqBN,CAAClC,eAAD,EAAkBwB,sBAAlB,EAA0CH,gBAA1C,EAA4DK,iBAA5D,CArBM,CAAT,CALwG;;AA6BxGzM,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMkN,2BAA2B,GAAG,IAAIC,cAAJ,CAAmB,iBAAc;AAAA;;AAAA;AAAA,UAAZzL,MAAY;;AACnE4K,MAAAA,kBAAkB,0BAAC5K,MAAD,aAACA,MAAD,8CAACA,MAAM,CAAE0L,WAAT,wDAAC,oBAAqB3O,MAAtB,yEAAgC,CAAhC,CAAlB;AACD,KAFmC,CAApC;;AAGA,QAAI0N,SAAS,CAACzG,OAAd,EAAuB;AACrBwH,MAAAA,2BAA2B,CAACF,OAA5B,CAAoCb,SAAS,CAACzG,OAA9C;AACD;;AACD,WAAO,YAAM;AACXwH,MAAAA,2BAA2B,CAACD,UAA5B;AACD,KAFD;AAGD,GAVQ,EAUN,CAACd,SAAS,CAACzG,OAAX,EAAoB4G,kBAApB,CAVM,CAAT,CA7BwG;;AA0CxGtM,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMkN,2BAA2B,GAAG,IAAIC,cAAJ,CAAmB,iBAAqB;AAAA;AAAA,UAAnBE,aAAmB;;AAC1E,UAAIb,cAAJ,EAAoB;AAAA;;AAClBD,QAAAA,sBAAsB,0BAACc,aAAD,aAACA,aAAD,iDAACA,aAAa,CAAED,WAAhB,2DAAC,uBAA4B3O,MAA7B,yEAAuC,CAAvC,CAAtB;AACD;AACF,KAJmC,CAApC;;AAMA,QAAI2N,gBAAgB,CAAC1G,OAArB,EAA8B;AAC5BwH,MAAAA,2BAA2B,CAACF,OAA5B,CAAoCZ,gBAAgB,CAAC1G,OAArD;AACD;;AACD,WAAO,YAAM;AACXwH,MAAAA,2BAA2B,CAACD,UAA5B;AACD,KAFD;AAGD,GAbQ,EAaN,CAACb,gBAAgB,CAAC1G,OAAlB,EAA2B6G,sBAA3B,EAAmDC,cAAnD,CAbM,CAAT;AAeA,MAAMc,eAAe,sDAAGjB,YAAY,CAAC3G,OAAhB,2DAAG,uBAAsBkH,YAAzB,yEAAyC,EAA9D;AACA,MAAMW,iBAAiB,GAAG,CAAC/L,QAAQ,GAAG,CAAH,GAAOuJ,eAAe,GAAGzC,mBAAlC,IAAyDgF,eAAnF;AAEA,SAAO;AAAEvC,IAAAA,eAAe,EAAfA,eAAF;AAAmBzC,IAAAA,mBAAmB,EAAnBA,mBAAnB;AAAwCgF,IAAAA,eAAe,EAAfA,eAAxC;AAAyDC,IAAAA,iBAAiB,EAAjBA;AAAzD,GAAP;AACD,CA7DM;;AC6CP,IAAMC,gBAAgB,GAAG,EAAzB;AAyFA,IAAM9O,WAAS,GAAGC,eAAe,CAAChB,QAAD,EAAS;AAAEiB,EAAAA,IAAI,EAAE;AAAR,CAAT,CAAjC;AAEA;AACA;AACA;AACA;;IACM6O,UAAmC,gBAAG5F,UAAU,CAAC,UAAC/I,KAAD,EAA6BgG,GAA7B,EAAgE;AAAA;;AAAA,MAEnHnC,KAFmH,GAuBjH7D,KAvBiH,CAEnH6D,KAFmH;AAAA,MAGnHnE,KAHmH,GAuBjHM,KAvBiH,CAGnHN,KAHmH;AAAA,MAInHoE,QAJmH,GAuBjH9D,KAvBiH,CAInH8D,QAJmH;AAAA,MAKnHoI,aALmH,GAuBjHlM,KAvBiH,CAKnHkM,aALmH;AAAA,MAMnH0C,IANmH,GAuBjH5O,KAvBiH,CAMnH4O,IANmH;AAAA,MAOnH3O,gBAPmH,GAuBjHD,KAvBiH,CAOnHC,gBAPmH;AAAA,MAQnHgB,SARmH,GAuBjHjB,KAvBiH,CAQnHiB,SARmH;AAAA,MASnHkG,KATmH,GAuBjHnH,KAvBiH,CASnHmH,KATmH;AAAA,MAUnH0H,OAVmH,GAuBjH7O,KAvBiH,CAUnH6O,OAVmH;AAAA,MAWnHC,IAXmH,GAuBjH9O,KAvBiH,CAWnH8O,IAXmH;AAAA,MAYnH3F,oBAZmH,GAuBjHnJ,KAvBiH,CAYnHmJ,oBAZmH;AAAA,MAanH9C,QAbmH,GAuBjHrG,KAvBiH,CAanHqG,QAbmH;AAAA,MAcnH0I,wBAdmH,GAuBjH/O,KAvBiH,CAcnH+O,wBAdmH;AAAA,MAenH/F,iBAfmH,GAuBjHhJ,KAvBiH,CAenHgJ,iBAfmH;AAAA,MAgBnHtG,QAhBmH,GAuBjH1C,KAvBiH,CAgBnH0C,QAhBmH;AAAA,MAiBnHsM,uBAjBmH,GAuBjHhP,KAvBiH,CAiBnHgP,uBAjBmH;AAAA,MAkBnHlD,wBAlBmH,GAuBjH9L,KAvBiH,CAkBnH8L,wBAlBmH;AAAA,MAmBnH1C,qBAnBmH,GAuBjHpJ,KAvBiH,CAmBnHoJ,qBAnBmH;AAAA,MAoBnHmF,aApBmH,GAuBjHvO,KAvBiH,CAoBnHuO,aApBmH;AAAA,MAqBnHvC,WArBmH,GAuBjHhM,KAvBiH,CAqBnHgM,WArBmH;AAAA,MAsBnHnH,QAtBmH,GAuBjH7E,KAvBiH,CAsBnH6E,QAtBmH;AAyBrH,MAAMoK,cAAc,4BAAGxH,oBAAoB,CAAepB,QAAf,CAApB,CAA6C,CAA7C,CAAH,oFAAG,sBAAiDrG,KAApD,2DAAG,uBAAwDwH,EAA/E;;AAzBqH,kBA2BnDrH,QAAQ,CAAC6I,iBAAD,aAACA,iBAAD,cAACA,iBAAD,GAAsBiG,cAAtB,CA3B2C;AAAA;AAAA,MA2B9GC,yBA3B8G;AAAA,MA2BnFC,4BA3BmF;;AAAA,mBA4B7DhP,QAAQ,CAACH,KAAK,CAACoP,oBAAP,CA5BqD;AAAA;AAAA,MA4B9GA,oBA5B8G;AAAA,MA4BxFC,uBA5BwF;;AAAA,mBA6B7ElP,QAAQ,CAAC6O,uBAAD,CA7BqE;AAAA;AAAA,MA6B9G1F,YA7B8G;AAAA,MA6BhGC,eA7BgG;;AA8BrH,MAAM+F,0BAA0B,GAAG/O,MAAM,CAAC,KAAD,CAAzC;AAEA,MAAMgP,aAAwC,GAAGC,kBAAkB,CAACxJ,GAAD,CAAnE;AACA,MAAMyJ,YAAuC,GAAGlP,MAAM,EAAtD;AACA,MAAM+M,gBAA2C,GAAG/M,MAAM,EAA1D;AACA,MAAMgN,YAAuC,GAAGhN,MAAM,EAAtD;;AAnCqH,mBAqCzEJ,QAAQ,CAACuO,gBAAD,CArCiE;AAAA;AAAA,MAqC9GgB,cArC8G;AAAA,MAqC9FC,iBArC8F;;AAsCrH,MAAMvP,SAAS,GAAGG,MAAM,CAAC,KAAD,CAAxB,CAtCqH;;AAAA,2BAyChC6M,iBAAiB,CACpGmC,aADoG,EAEpGE,YAFoG,EAGpGnC,gBAHoG,EAIpGC,YAJoG,EAKpG;AAAE7K,IAAAA,QAAQ,EAARA;AAAF,GALoG,CAzCe;AAAA,MAyC7GuJ,eAzC6G,sBAyC7GA,eAzC6G;AAAA,MAyC5FzC,mBAzC4F,sBAyC5FA,mBAzC4F;AAAA,MAyCvEgF,eAzCuE,sBAyCvEA,eAzCuE;AAAA,MAyCtDC,iBAzCsD,sBAyCtDA,iBAzCsD;AAkDrH;AACA;;;AAEA,MAAMmB,eAAe,GAAG5F,WAAW,CACjC,UAACQ,SAAD,EAAe;AACb,QAAI,CAACA,SAAL,EAAgB;AACd;AACD;;AACD,QAAIyE,cAAc,KAAKzE,SAAvB,EAAkC;AAAA;;AAChC,+BAAA+E,aAAa,CAAC3I,OAAd,gFAAuBiJ,QAAvB,CAAgC;AAAE9M,QAAAA,GAAG,EAAE,CAAP;AAAU+M,QAAAA,QAAQ,EAAE;AAApB,OAAhC;AACD,KAFD,MAEO;AAAA;;AACL,UAAMC,WAAW,6BAAGR,aAAa,CAAC3I,OAAjB,qFAAG,uBAAuBG,aAAvB,8BAAwEyD,SAAxE,EAAH,2DAAG,uBAChBwF,SADJ;;AAEA,UAAI,CAACC,KAAK,CAACF,WAAD,CAAV,EAAyB;AAAA;;AACvB,kCAAAR,aAAa,CAAC3I,OAAd,kFAAuBiJ,QAAvB,CAAgC;AAC9B9M,UAAAA,GAAG,EAAEgN,WAAW,GAAG9D,eAAd,GAAgCuC,eAAhC,IAAmDlF,YAAY,GAAGE,mBAAH,GAAyB,CAAxF,IAA6F,EADpE;AAE9BsG,UAAAA,QAAQ,EAAE;AAFoB,SAAhC;AAID;AACF;;AACDR,IAAAA,0BAA0B,CAAC1I,OAA3B,GAAqC,KAArC;AACD,GAlBgC,EAmBjC,CAACqI,cAAD,EAAiBM,aAAjB,EAAgCtD,eAAhC,EAAiDuC,eAAjD,EAAkElF,YAAlE,EAAgFE,mBAAhF,CAnBiC,CAAnC,CArDqH;;AA4ErHtI,EAAAA,SAAS,CAAC,YAAM;AACdoO,IAAAA,0BAA0B,CAAC1I,OAA3B,GAAqC,IAArC;AACAuI,IAAAA,4BAA4B,CAACnG,iBAAD,aAACA,iBAAD,cAACA,iBAAD,GAAsBiG,cAAtB,CAA5B;AACD,GAHQ,EAGN,CAACjG,iBAAD,EAAoBsG,0BAApB,EAAgDL,cAAhD,CAHM,CAAT,CA5EqH;;AAkFrH,MAAMhG,uBAAuB,GAAGe,WAAW,CACzC,UAAC/E,CAAD,EAAO;AAAA;;AACLqK,IAAAA,0BAA0B,CAAC1I,OAA3B,GAAqC,IAArC;AACA,QAAMsJ,mBAAmB,sBAAGjL,CAAC,CAACoF,MAAF,CAASrK,KAAZ,oDAAG,gBAAgBwH,EAA5C;AACA2H,IAAAA,4BAA4B,CAAC,UAACgB,kBAAD,EAAwB;AACnD,UAAIA,kBAAkB,KAAKD,mBAA3B,EAAgD;AAC9CN,QAAAA,eAAe,CAACM,mBAAD,CAAf;AACD;;AACD,aAAOA,mBAAP;AACD,KAL2B,CAA5B;AAMAE,IAAAA,0BAA0B,CAACnL,CAAD,CAA1B;AACD,GAXwC,EAYzC,CAAC8J,wBAAD,EAA2BI,4BAA3B,EAAyDG,0BAAzD,EAAqFM,eAArF,CAZyC,CAA3C,CAlFqH;;AAkGrH1O,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACd,SAAS,CAACwG,OAAf,EAAwB;;AAExB,QAAIgI,IAAI,KAAKyB,cAAc,CAACC,OAAxB,IAAmChB,0BAA0B,CAAC1I,OAA3B,KAAuC,IAA9E,EAAoF;AAClFgJ,MAAAA,eAAe,CAACV,yBAAD,CAAf;AACD;AACF,GANQ,EAMN,CAACA,yBAAD,EAA4B9O,SAA5B,EAAuCwO,IAAvC,EAA6CU,0BAA7C,EAAyEM,eAAzE,CANM,CAAT,CAlGqH;;AA2GrH1O,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIkO,oBAAoB,IAAIE,0BAA0B,CAAC1I,OAA3B,KAAuC,IAAnE,EAAyE;AAAA;;AACvE,UAAMmJ,WAAW,6BAAGR,aAAa,CAAC3I,OAAjB,qFAAG,uBAAuBG,aAAvB,yCACcqI,oBADd,SAAH,2DAAG,uBAEjBY,SAFH;;AAGA,UAAI,CAACC,KAAK,CAACF,WAAD,CAAV,EAAyB;AAAA;;AACvB,kCAAAR,aAAa,CAAC3I,OAAd,kFAAuBiJ,QAAvB,CAAgC;AAC9B9M,UAAAA,GAAG,EAAEgN,WAAW,GAAG9D,eAAd,GAAgCuC,eAAhC,IAAmDlF,YAAY,GAAGE,mBAAH,GAAyB,CAAxF,IAA6F,EADpE;AAE9BsG,UAAAA,QAAQ,EAAE;AAFoB,SAAhC;AAID;;AAEDR,MAAAA,0BAA0B,CAAC1I,OAA3B,GAAqC,KAArC;AACD;AACF,GAdQ,EAcN,CACDwI,oBADC,EAEDE,0BAFC,EAGDrD,eAHC,EAIDuC,eAJC,EAKDlF,YALC,EAMDE,mBANC,CAdM,CAAT;AAuBAtI,EAAAA,SAAS,CAAC,YAAM;AACdqI,IAAAA,eAAe,CAACyF,uBAAD,CAAf;AACD,GAFQ,EAEN,CAACzF,eAAD,EAAkByF,uBAAlB,CAFM,CAAT;AAIA,MAAM9O,OAAO,GAAGN,WAAS,EAAzB;AAEAsB,EAAAA,SAAS,CAAC,YAAM;AACdmO,IAAAA,uBAAuB,CAACrP,KAAK,CAACoP,oBAAP,CAAvB;;AACA,QAAIpP,KAAK,CAACoP,oBAAV,EAAgC;AAC9BE,MAAAA,0BAA0B,CAAC1I,OAA3B,GAAqC,IAArC;;AACA,UAAIgI,IAAI,KAAKyB,cAAc,CAACE,UAA5B,EAAwC;AACtC,YAAI/F,SAAJ;AACA/C,QAAAA,oBAAoB,CAA2CpB,QAA3C,CAApB,CAAyEmK,OAAzE,CAAiF,UAACvK,OAAD,EAAa;AAC5F,4BAAIrF,KAAK,CAAC6P,cAAN,CAAqBxK,OAArB,KAAiCA,OAAO,CAACjG,KAAzC,IAAkDiG,OAAO,CAACjG,KAAR,CAAcqG,QAApE,EAA8E;AAC5EoB,YAAAA,oBAAoB,CAACxB,OAAO,CAACjG,KAAR,CAAcqG,QAAf,CAApB,CAA6CmK,OAA7C,CACE,UAACzF,UAAD,EAA6D;AAC3D,gCACEnK,KAAK,CAAC6P,cAAN,CAAqB1F,UAArB,KACAA,UAAU,CAAC/K,KADX,IAEA+K,UAAU,CAAC/K,KAAX,CAAiBwH,EAAjB,KAAwBxH,KAAK,CAACoP,oBAHhC,EAIE;AAAA;;AACA5E,gBAAAA,SAAS,qBAAGvE,OAAO,CAACjG,KAAX,mDAAG,eAAewH,EAA3B;AACD;AACF,aATH;AAWD;AACF,SAdD;;AAgBA,YAAIgD,SAAJ,EAAe;AACb2E,UAAAA,4BAA4B,CAAC3E,SAAD,CAA5B;AACD;AACF;AACF;AACF,GA3BQ,EA2BN,CACDxK,KAAK,CAACoP,oBADL,EAEDD,4BAFC,EAGDE,uBAHC,EAIDhJ,QAJC,EAKDuI,IALC,EAMDU,0BANC,CA3BM,CAAT;AAoCApO,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMwP,iBAAiB,GAAG,IAAIrC,cAAJ,CAAmB,YAAM;AAAA;;AACjD,UAAIsC,UAAU,GAAG,CAAjB;AAEA,UAAMpR,SAAS,GAAGqR,IAAI,CAACC,GAAL,2BAAStB,aAAa,CAAC3I,OAAvB,2DAAS,uBAAuBkK,YAAhC,EAA8CC,MAAM,CAACC,WAArD,CAAlB;AACA,UAAMC,qBAAqB,GAAG1R,SAAS,GAAGkP,iBAA1C;AACA,UAAMyC,iBAAiB,GAAG/I,wBAAwB,CAACoH,aAAD,CAAlD;;AAEA,UAAI2B,iBAAJ,EAAuB;AACrB,YAAM3K,WAAW,GAAG2K,iBAAiB,CAAC9I,gBAAlB,CAAmC,8BAAnC,CAApB;AAEA,YAAI+I,oBAAJ;;AACA,YAAI5K,WAAW,CAACG,MAAZ,GAAqB,CAAzB,EAA4B;AAC1ByK,UAAAA,oBAAoB,GAAI5K,WAAW,CAACA,WAAW,CAACG,MAAZ,GAAqB,CAAtB,CAAZ,CAAqDoH,YAA5E;AACD,SAFD,MAEO;AACLqD,UAAAA,oBAAoB,GAClBD,iBAAiB,CAACpD,YAAlB,GACAoD,iBAAiB,CAACnK,aAAlB,CAA6C,kBAA7C,EAAiE+G,YAFnE;AAGD;;AAED6C,QAAAA,UAAU,GAAGC,IAAI,CAACQ,GAAL,CAAS,CAAT,EAAYH,qBAAqB,GAAGE,oBAApC,CAAb;;AAEA,YAAIlB,KAAK,CAACU,UAAD,CAAT,EAAuB;AACrBA,UAAAA,UAAU,GAAG,CAAb;AACD;AACF;;AAED,gCAAApB,aAAa,CAAC3I,OAAd,kFAAuBO,KAAvB,CAA6BkK,WAA7B,CAAyC7P,sBAAsB,CAACK,iBAAhE,YAAsF8O,UAAtF;AACD,KA3ByB,CAA1B;AA6BAD,IAAAA,iBAAiB,CAACxC,OAAlB,CAA0BqB,aAAa,CAAC3I,OAAxC;AAEA,WAAO,YAAM;AACX8J,MAAAA,iBAAiB,CAACvC,UAAlB;AACD,KAFD;AAGD,GAnCQ,EAmCN,CAACM,iBAAD,EAAoBc,aAApB,EAAmClJ,QAAnC,CAnCM,CAAT;AAqCA,MAAM+J,0BAA0B,GAAGkB,QAAQ,CAAC,UAACrM,CAAD,EAAO;AACjD8J,IAAAA,wBAAwB,CACtBrE,sBAAsB,CAACzF,CAAD,EAAI;AACxBsM,MAAAA,oBAAoB,EAAEtM,CAAC,CAACoF,MAAF,CAASnE,KADP;AAExB8C,MAAAA,iBAAiB,EAAE/D,CAAC,CAACoF,MAAF,CAASrK,KAAT,CAAewH,EAFV;AAGxBvB,MAAAA,OAAO,EAAEhB,CAAC,CAACoF;AAHa,KAAJ,CADA,CAAxB;AAOD,GAR0C,EAQxC,GARwC,CAA3C;AAUA,MAAMnB,0BAA0B,GAAGc,WAAW,CAC5C,UAAC/E,CAAD,EAAO;AACLqK,IAAAA,0BAA0B,CAAC1I,OAA3B,GAAqC,IAArC;;AACA,QAAIgI,IAAI,KAAKyB,cAAc,CAACE,UAA5B,EAAwC;AAAA;;AACtC,UAAM/F,SAAS,4BAAGvF,CAAC,CAACoF,MAAF,CAASpE,OAAT,CAAiBjG,KAApB,0DAAG,sBAAwBwH,EAA1C;AACA2H,MAAAA,4BAA4B,CAAC3E,SAAD,CAA5B;AACD;;AACD,QAAMO,UAAU,GAAG9F,CAAC,CAACoF,MAAF,CAASU,UAA5B;AACAsE,IAAAA,uBAAuB,CAACtE,UAAU,CAAC/K,KAAX,CAAiBwH,EAAlB,CAAvB;AACD,GAT2C,EAU5C,CAACoH,IAAD,EAAOO,4BAAP,EAAqCE,uBAArC,EAA8DC,0BAA9D,CAV4C,CAA9C;AAaA,MAAMjG,+BAA+B,GAAGW,WAAW,CACjD,UAAC/E,CAAD,EAAO;AACL,QAAMuM,UAAU,GAAGvM,CAAC,CAACgF,MAArB;AACA,QAAMwH,gBAAgB,GAAGD,UAAU,CAACxK,IAAX,KAAoB,eAA7C;;AACA,QAAIyK,gBAAJ,EAAsB;AAAA;;AACpB,iCAAAlC,aAAa,CAAC3I,OAAd,oFAAuB8K,SAAvB,CAAiCC,GAAjC,CAAqCzR,OAAO,CAACyC,eAA7C;AACD,KAFD,MAEO;AAAA;;AACL,iCAAA4M,aAAa,CAAC3I,OAAd,oFAAuB8K,SAAvB,CAAiCE,MAAjC,CAAwC1R,OAAO,CAACyC,eAAhD;AACD;;AAEDkP,IAAAA,qBAAqB,CAAC,YAAM;AAAA;;AAC1B,UAAI,4BAAAtC,aAAa,CAAC3I,OAAd,oFAAuBkL,SAAvB,IAAmC,CAAnC,IAAwC,CAACL,gBAA7C,EAA+D;AAAA;;AAC7D,YAAMM,aAAa,GAAGzE,gBAAgB,CAAC1G,OAAjB,CAAyBO,KAAzB,CAA+BpE,GAArD;AACAuK,QAAAA,gBAAgB,CAAC1G,OAAjB,CAAyBO,KAAzB,CAA+BpE,GAA/B,aAAwCkJ,eAAxC;AACA,YAAM+F,aAAa,GAAGzE,YAAY,CAAC3G,OAAb,CAAqBO,KAArB,CAA2BpE,GAAjD;AACAwK,QAAAA,YAAY,CAAC3G,OAAb,CAAqBO,KAArB,CAA2BpE,GAA3B,aAAoCuK,gBAAgB,CAAC1G,OAAjB,CAAyBkH,YAAzB,GAAwC7B,eAA5E;AACA,mCAAAsD,aAAa,CAAC3I,OAAd,oFAAuBS,gBAAvB,CACE,QADF,EAEE,UAACpC,CAAD,EAAO;AACL,cAAI8M,aAAJ,aAAIA,aAAJ,cAAIA,aAAJ,GAAqB,IAArB,EAA2B;AACzBzE,YAAAA,gBAAgB,CAAC1G,OAAjB,CAAyBO,KAAzB,CAA+BpE,GAA/B,GAAqCgP,aAArC;AACD,WAFD,MAEO;AACLzE,YAAAA,gBAAgB,CAAC1G,OAAjB,CAAyBO,KAAzB,CAA+B8K,cAA/B,CAA8C,KAA9C;AACD;;AACD,cAAID,aAAJ,aAAIA,aAAJ,cAAIA,aAAJ,GAAqB,IAArB,EAA2B;AACzBzE,YAAAA,YAAY,CAAC3G,OAAb,CAAqBO,KAArB,CAA2BpE,GAA3B,GAAiCiP,aAAjC;AACD,WAFD,MAEO;AACLzE,YAAAA,YAAY,CAAC3G,OAAb,CAAqBO,KAArB,CAA2B8K,cAA3B,CAA0C,KAA1C;AACD;AACF,SAbH,EAcE;AAAEC,UAAAA,IAAI,EAAE;AAAR,SAdF;AAgBD;AACF,KAvBoB,CAArB;AAwBD,GAlCgD,EAmCjD,CAAC3C,aAAD,EAAgBrP,OAAO,CAACyC,eAAxB,EAAyC6G,mBAAzC,EAA8DyC,eAA9D,CAnCiD,CAAnD;AAsCA/K,EAAAA,SAAS,CAAC,YAAM;AACd2Q,IAAAA,qBAAqB,CAAC,YAAM;AAC1B,UAAMM,wBAAwB,GAAGC,iBAAiB,EAAlD;;AACA,UAAID,wBAAwB,IAAIA,wBAAwB,KAAK,CAAzD,IAA8DA,wBAAwB,KAAKzD,gBAA/F,EAAiH;AAC/GiB,QAAAA,iBAAiB,CAACwC,wBAAD,CAAjB;AACD;AACF,KALoB,CAArB;AAMA/R,IAAAA,SAAS,CAACwG,OAAV,GAAoB,IAApB;AACD,GARQ,EAQN,CAACxG,SAAD,EAAYuP,iBAAZ,CARM,CAAT;AAUA,MAAM0C,iBAAiB,GAAGjR,gBAAgB,CAACC,EAAjB,CAAoBnB,OAAO,CAAC4B,UAA5B,EAAwCwQ,kBAAkB,CAACC,YAA3D,CAA1B;;AACA,MAAItR,SAAJ,EAAe;AACboR,IAAAA,iBAAiB,CAAC/Q,GAAlB,CAAsBL,SAAtB;AACD;;AAED,MAAI6K,wBAAJ,EAA8B;AAC5BuG,IAAAA,iBAAiB,CAAC/Q,GAAlB,CAAsBpB,OAAO,CAACkE,oBAA9B;AACD;;AAED,MAAIwK,IAAI,KAAKyB,cAAc,CAACE,UAA5B,EAAwC;AACtC8B,IAAAA,iBAAiB,CAAC/Q,GAAlB,CAAsBpB,OAAO,CAACuC,cAA9B;AACD;;AAED,MAAIC,QAAJ,EAAc;AACZ2P,IAAAA,iBAAiB,CAAC/Q,GAAlB,CAAsBpB,OAAO,CAACwC,QAA9B;AACD;;AAED,MAAM8P,qBAAqB,GAAG/R,OAAO,CAAC,YAAM;AAC1C,WAAO;AACLgS,MAAAA,YAAY,EAAEpG,IAAI,KAAK,CAAL,aAAYqD,cAAZ;AADb,KAAP;AAGD,GAJoC,EAIlC,CAACA,cAAD,CAJkC,CAArC;AAMA,MAAMgD,gBAAgB,GAAGC,uBAAuB,CAAC3S,KAAD,EAAQ,CAAC,0BAAD,CAAR,CAAhD;AAEAkB,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACd,QAAM0R,gBAAgB,yDAAGrD,aAAa,CAAC3I,OAAjB,4DAAG,wBAAuBkK,YAA1B,6EAA0C,IAAhE;AACA,QAAMtO,YAAY,GAAGoQ,gBAAgB,GAAGnE,iBAAxC;AACA,QAAMV,UAAU,cAAOU,iBAAP,qBAAmCjM,YAAY,GAAG,CAAf,GAAmB,CAAnB,GAAuBA,YAA1D,WAAhB;AACA,QAAMqQ,QAAQ,GAAG,IAAIhF,oBAAJ,CACf,UAACiF,QAAD,EAAc;AACZA,MAAAA,QAAQ,CAACtC,OAAT,CAAiB,UAACvK,OAAD,EAAa;AAC5B,YAAIA,OAAO,CAACyH,cAAR,IAA0B4B,0BAA0B,CAAC1I,OAA3B,KAAuC,KAArE,EAA4E;AAC1EuI,UAAAA,4BAA4B,CAAClH,0BAA0B,CAAChC,OAAO,CAACgE,MAAR,CAAezC,EAAhB,CAA3B,CAA5B;AACD;AACF,OAJD;AAKD,KAPc,EAQf;AACEwG,MAAAA,IAAI,EAAEuB,aAAa,CAAC3I,OADtB;AAEEmH,MAAAA,UAAU,EAAVA,UAFF;AAGEE,MAAAA,SAAS,EAAE,CAAC,CAAD;AAHb,KARe,CAAjB;AAeA,+BAAAsB,aAAa,CAAC3I,OAAd,oFAAuBwB,gBAAvB,CAAwC,kDAAxC,EAA4FoI,OAA5F,CAAoG,UAAC/F,EAAD,EAAQ;AAC1GoI,MAAAA,QAAQ,CAAC3E,OAAT,CAAiBzD,EAAjB;AACD,KAFD;AAIA,WAAO,YAAM;AACXoI,MAAAA,QAAQ,CAAC1E,UAAT;AACD,KAFD;AAGD,GA1BQ,EA0BN,CAACoB,aAAD,EAAgBlJ,QAAhB,EAA0BoI,iBAA1B,EAA6CU,4BAA7C,EAA2EG,0BAA3E,CA1BM,CAAT;AA4BA,MAAMnC,aAAa,GAAG/L,gBAAgB,CAACC,EAAjB,CAAoBnB,OAAO,CAAC0C,MAA5B,CAAtB;AACA,MAAMmQ,gBAAgB,GAAG3R,gBAAgB,CAACC,EAAjB,CAAoBnB,OAAO,CAACqD,SAA5B,CAAzB;;AACA,MAAI8I,IAAI,EAAR,EAAY;AACVc,IAAAA,aAAa,CAAC7L,GAAd,CAAkBpB,OAAO,CAAC+C,OAA1B;AACA8P,IAAAA,gBAAgB,CAACzR,GAAjB,CAAqBpB,OAAO,CAAC+C,OAA7B;AACD;;AAED,MAAM+P,oBAAoB,GAAGtQ,QAAQ,GACjC,CADiC,GAEjC4G,YAAY,IAAI+C,IAAI,EAApB,GACAJ,eAAe,GAAGzC,mBADlB,GAEAyC,eAJJ;AAMA,sBACE;AACE,2BAAoB,YADtB;AAEE,IAAA,IAAI,EAAE6C,IAFR;AAGE,IAAA,SAAS,EAAEuD,iBAAiB,CAACY,QAAlB,EAHb;AAIE,IAAA,KAAK,EAAE9L,KAJT;AAKE,IAAA,GAAG,EAAEoI,aALP;AAME,IAAA,KAAK,EAAEV;AANT,KAOM6D,gBAPN,gBASE;AACE,IAAA,GAAG,EAAEjD,YADP;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,4BAAqB,oBAHvB;AAIE,IAAA,KAAK,EAAE+C,qBAJT;AAKE,IAAA,SAAS,EAAErF,aAAa,CAAClM;AAL3B,kBAOE;AAAK,IAAA,SAAS,EAAEf,OAAO,CAACsD;AAAxB,KACG,CAAC,CAACsI,wBAAD,IAA6BtC,mBAAmB,KAAK,CAAtD,kBACC,oBAAC,OAAD;AAAS,IAAA,UAAU,EAAE0J,iBAAiB,CAACC;AAAvC,KACGzT,KAAK,IAAI8J,mBAAmB,KAAK,CAAjC,iBACC;AAAK,IAAA,SAAS,EAAEtJ,OAAO,CAAC6E;AAAxB,kBACE,oBAAC,eAAD;AAAiB,IAAA,KAAK,EAAErF,KAAxB;AAA+B,IAAA,gBAAgB,EAAEO;AAAjD,IADF,CAFJ,eAME,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAEyM,gBAAgB,CAACC,MAArC;AAA6C,IAAA,SAAS,EAAEzM,OAAO,CAACwD;AAAhE,KACGsI,WADH,eAEE,oBAAC,OAAD;AAAS,IAAA,UAAU,EAAEkH,iBAAiB,CAACE;AAAvC,kBACE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAExG,UAAU,CAACC,EAAzB;AAA6B,IAAA,SAAS,EAAE3M,OAAO,CAAC2D;AAAhD,KACGA,KADH,CADF,eAIE,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAE3D,OAAO,CAAC4D;AAA1B,KAAqCA,QAArC,CAJF,eAKE;AAAK,IAAA,SAAS,EAAE5D,OAAO,CAAC2E;AAAxB,KAAmCA,QAAnC,CALF,CAFF,CANF,eAgBE,oBAAC,OAAD;AAAS,IAAA,YAAY,EAAEkI,YAAY,CAACC,KAApC;AAA2C,IAAA,MAAM,EAAEC,aAAa,CAACC;AAAjE,kBACE,oBAAC,aAAD,OADF,EAEGhB,aAFH,CAhBF,CAFJ,CAPF,CATF,eA0CE,oBAAC,gBAAD;AACE,IAAA,aAAa,EAAEA,aADjB;AAEE,IAAA,KAAK,EAAExM,KAFT;AAGE,IAAA,OAAO,EAAEQ,OAHX;AAIE,IAAA,gBAAgB,EAAED,gBAJpB;AAKE,IAAA,wBAAwB,EAAE6L,wBAL5B;AAME,IAAA,iBAAiB,EAAEyC,aANrB;AAOE,IAAA,WAAW,EAAEvC,WAPf;AAQE,IAAA,QAAQ,EAAEnH,QARZ;AASE,IAAA,KAAK,EAAEhB,KATT;AAUE,IAAA,QAAQ,EAAEC,QAVZ;AAWE,IAAA,YAAY,EAAEwF,YAXhB;AAYE,IAAA,eAAe,EAAE2C,eAZnB;AAaE,IAAA,GAAG,EAAEqB;AAbP,IA1CF,eAyDE,oBAAC,mBAAD;AACE,IAAA,QAAQ,EAAEjH,QADZ;AAEE,IAAA,iBAAiB,EAAE6I,yBAFrB;AAGE,IAAA,uBAAuB,EAAEjG,uBAH3B;AAIE,IAAA,0BAA0B,EAAEC,0BAJ9B;AAKE,IAAA,qBAAqB,EAAEE,qBALzB;AAME,IAAA,oBAAoB,EAAED,oBAAoB,IAAI,CAACzG,QANjD;AAOE,IAAA,YAAY,EAAE4G,YAPhB;AAQE,IAAA,eAAe,EAAEC,eARnB;AASE,IAAA,mBAAmB,EAAEC,mBATvB;AAUE,IAAA,KAAK,EAAE;AAAEzG,MAAAA,GAAG,EAAEiQ;AAAP,KAVT;AAWE,IAAA,+BAA+B,EAAE3J,+BAXnC;AAYE,IAAA,GAAG,EAAEkE,YAZP;AAaE,IAAA,SAAS,EAAEwF,gBAAgB,CAAC9R;AAb9B,IAzDF,EAwEGoL,IAAI,mBACH;AACE,IAAA,SAAS,EAAEnM,OAAO,CAACiD,mBADrB;AAEE,IAAA,KAAK,EAAE;AACLxD,MAAAA,MAAM,oBAAKqT,oBAAoB,6BAAGzF,YAAY,CAAC3G,OAAhB,0DAAG,sBAAsBkH,YAAzB,CAAzB,uCAAkE,CAAlE,OADD;AAELtO,MAAAA,KAAK,wBACH,CAAA+P,aAAa,SAAb,IAAAA,aAAa,WAAb,uCAAAA,aAAa,CAAE3I,OAAf,oFAAwBkK,YAAxB,KAAuCvB,aAAvC,aAAuCA,aAAvC,kDAAuCA,aAAa,CAAE3I,OAAtD,4DAAuC,wBAAwByM,YAA/D,IAA8E,MAA9E,GAAuF,KADpF;AAFA;AAFT,IAzEJ,EAmFGhH,IAAI,kBACH;AAAK,IAAA,KAAK,EAAE;AAAEiH,MAAAA,SAAS,qBAAKN,oBAAoB,8BAAGzF,YAAY,CAAC3G,OAAhB,2DAAG,uBAAsBkH,YAAzB,CAAzB,yCAAkE,CAAlE;AAAX;AAAZ,KACGc,IAAI,KAAKyB,cAAc,CAACE,UAAxB,GAAqC1I,cAAc,CAACxB,QAAD,EAAW6I,yBAAX,CAAnD,GAA2F7I,QAD9F,CADG,GAIDuI,IAAI,KAAKyB,cAAc,CAACE,UAAxB,GACF1I,cAAc,CAACxB,QAAD,EAAW6I,yBAAX,CADZ,GAGF7I,QA1FJ,CADF;AA+FD,CAzbqD;AA2btDsI,UAAU,CAACtJ,WAAX,GAAyB,YAAzB;AAEAsJ,UAAU,CAACrJ,YAAX,GAA0B;AACxBzB,EAAAA,KAAK,EAAE,EADiB;AAExBnE,EAAAA,KAAK,EAAE,IAFiB;AAGxBoE,EAAAA,QAAQ,EAAE,EAHc;AAIxBoI,EAAAA,aAAa,EAAE,EAJS;AAKxB0C,EAAAA,IAAI,EAAEyB,cAAc,CAACC,OALG;AAMxBrQ,EAAAA,gBAAgB,EAAE,KANM;AAOxBkJ,EAAAA,oBAAoB,EAAE,KAPE;AAQxB4F,EAAAA,wBAAwB,EAAE,oCAAM;AAC9B;AACD,GAVuB;AAWxBrM,EAAAA,QAAQ,EAAE;AAXc,CAA1B;;;;"}