{"version":3,"file":"hooks.js","sources":["../src/hooks/useConsolidatedRef.ts","../src/hooks/useI18nBundle.ts","../src/hooks/useIsomorphicLayoutEffect.ts","../src/hooks/usePassThroughHtmlProps.ts","../src/hooks/useViewportRange.ts","../src/hooks/useIsRTL.ts"],"sourcesContent":["import { RefObject, useEffect, useMemo, useRef } from 'react';\n\nexport const useConsolidatedRef = <T>(ref): RefObject<T> => {\n  const localRef: RefObject<T> = useRef(null);\n\n  const consolidatedRef = useMemo(() => {\n    if (!ref || typeof ref === 'function') {\n      return localRef;\n    }\n    return ref;\n  }, [ref]);\n\n  useEffect(() => {\n    if (typeof ref === 'function') {\n      // @ts-ignore\n      ref(consolidatedRef.current);\n    }\n  }, [consolidatedRef.current]);\n\n  return consolidatedRef;\n};\n","import { getI18nBundleData } from '@ui5/webcomponents-base/dist/asset-registries/i18n';\nimport { fetchI18nBundle, getI18nBundle } from '@ui5/webcomponents-base/dist/i18nBundle';\nimport { attachLanguageChange, detachLanguageChange } from '@ui5/webcomponents-base/dist/locale/languageChange';\nimport { useIsomorphicLayoutEffect } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { useEffect, useState } from 'react';\nimport { deprecationNotice } from '@ui5/webcomponents-react-base/lib/Utils';\n\ntype TextWithDefault = { key: string; defaultText: string } | string;\ntype TextWithPlaceholders = [TextWithDefault, ...string[]];\n\ninterface I18nBundle {\n  getText: (textObj: TextWithDefault, ...args: any[]) => string;\n}\n\nconst resolveTranslations = (bundle, texts) => {\n  return texts.map((text) => {\n    if (Array.isArray(text)) {\n      const [key, ...replacements] = text;\n      return bundle.getText(key, replacements);\n    }\n    return bundle.getText(text);\n  });\n};\n\nexport const useI18nText = (bundleName: string, ...texts: (TextWithDefault | TextWithPlaceholders)[]): string[] => {\n  const i18nBundle: I18nBundle = getI18nBundle(bundleName);\n  const [translations, setTranslations] = useState(resolveTranslations(i18nBundle, texts));\n\n  useEffect(() => {\n    deprecationNotice(\n      'useI18nText',\n      `'useI18nText' is deprecated and will be removed in the next release. Please use 'useI18nBundle' instead.\nA Migration Guide can be found here: https://sap.github.io/ui5-webcomponents-react/?path=/docs/migration-guide--page#migrating-from-013x-to-0140`\n    );\n  }, []);\n\n  useEffect(() => {\n    let didCancel = false;\n    const fetchAndLoadBundle = async () => {\n      await fetchI18nBundle(bundleName);\n      if (!didCancel) {\n        setTranslations((prev) => {\n          const next = resolveTranslations(i18nBundle, texts);\n          if (prev.length === next.length && prev.every((translation, index) => next[index] === translation)) {\n            return prev;\n          }\n          return next;\n        });\n      }\n    };\n    fetchAndLoadBundle();\n    return () => {\n      didCancel = true;\n    };\n  }, [fetchI18nBundle, bundleName, ...texts]);\n\n  return translations;\n};\n\nexport const useI18nBundle = (bundleName: string): I18nBundle => {\n  const [_, setUpdater] = useState(0);\n\n  useIsomorphicLayoutEffect(() => {\n    let isMounted = true;\n    const i18nBundleData = getI18nBundleData('@ui5/webcomponents-react');\n    if (!i18nBundleData) {\n      fetchI18nBundle(`${bundleName}`).then(() => {\n        if (isMounted) {\n          setUpdater((old) => old + 1);\n        }\n      });\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, [bundleName]);\n\n  useEffect(() => {\n    let isMounted = true;\n    const handler = () => {\n      fetchI18nBundle(`${bundleName}`).then(() => {\n        if (isMounted) {\n          setUpdater((old) => old + 1);\n        }\n      });\n    };\n    attachLanguageChange(handler);\n    return () => {\n      isMounted = false;\n      detachLanguageChange(handler);\n    };\n  }, []);\n\n  return getI18nBundle(bundleName);\n};\n","import { useEffect, useLayoutEffect } from 'react';\n\nexport const useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n","const PROP_INCLUDELIST = /^(aria-|data-|id$|on[A-Z]|slot$)/;\n\nexport const usePassThroughHtmlProps = (props: Record<string, any>, propExcludeList: string[] = []) => {\n  const componentPropExcludelist = new Set(propExcludeList);\n\n  const returnVal: Record<string, unknown> = {};\n  for (const name in props) {\n    if (PROP_INCLUDELIST.test(name) && !componentPropExcludelist.has(name)) {\n      returnVal[name] = props[name];\n    }\n  }\n\n  return returnVal;\n};\n","import { getCurrentRange, attachMediaHandler, detachMediaHandler } from '@ui5/webcomponents-react-base/lib/Device';\nimport { useEffect, useState } from 'react';\n\nexport const useViewportRange = (rangeSet: string) => {\n  const [currentRange, setCurrentRange] = useState(getCurrentRange(rangeSet, window.innerWidth).name);\n\n  useEffect(() => {\n    let isMounted = true;\n    const handler = ({ name: range }) => {\n      if (isMounted === true) {\n        setCurrentRange(range);\n      }\n    };\n    attachMediaHandler(handler, rangeSet);\n    return () => {\n      isMounted = false;\n      detachMediaHandler(handler);\n    };\n  }, [setCurrentRange]);\n\n  return currentRange;\n};\n","import { getRTL } from '@ui5/webcomponents-base/dist/config/RTL';\nimport { useIsomorphicLayoutEffect } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { RefObject, useState } from 'react';\n\nconst GLOBAL_DIR_CSS_VAR = '--_ui5_dir';\n\nconst detectRTL = (elementRef: RefObject<HTMLElement>) => {\n  const doc = window.document;\n  const dirValues = ['ltr', 'rtl']; // exclude \"auto\" and \"\" from all calculations\n  const locallyAppliedDir = getComputedStyle(elementRef.current).getPropertyValue(GLOBAL_DIR_CSS_VAR);\n\n  // In that order, inspect the CSS Var (for modern browsers), the element itself, html and body (for IE fallback)\n  if (dirValues.includes(locallyAppliedDir)) {\n    return locallyAppliedDir === 'rtl';\n  }\n  if (dirValues.includes(elementRef.current?.dir)) {\n    return elementRef.current?.dir === 'rtl';\n  }\n  if (dirValues.includes(doc.documentElement.dir)) {\n    return doc.documentElement.dir === 'rtl';\n  }\n  if (dirValues.includes(doc.body.dir)) {\n    return doc.body.dir === 'rtl';\n  }\n\n  // Finally, check the configuration for explicitly set RTL or language-implied RTL\n  return getRTL();\n};\n\nconst useIsRTL = (elementRef: RefObject<HTMLElement>): boolean => {\n  const [isRTL, setRTL] = useState<boolean>(getRTL()); // use config RTL as best guess\n\n  useIsomorphicLayoutEffect(() => {\n    setRTL(detectRTL(elementRef)); // update immediately while rendering\n    const targets = [document.documentElement, document.body, elementRef.current].filter(Boolean);\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.attributeName === 'dir') {\n          setRTL(detectRTL(elementRef));\n        }\n      });\n    });\n\n    targets.forEach((target) => {\n      observer.observe(target, { attributes: true, childList: false, characterData: false, attributeFilter: ['dir'] });\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n\n  return isRTL;\n};\n\nexport { useIsRTL };\n"],"names":["useConsolidatedRef","ref","localRef","useRef","consolidatedRef","useMemo","useEffect","current","resolveTranslations","bundle","texts","map","text","Array","isArray","key","replacements","getText","useI18nText","bundleName","i18nBundle","getI18nBundle","useState","translations","setTranslations","deprecationNotice","didCancel","fetchAndLoadBundle","fetchI18nBundle","prev","next","length","every","translation","index","useI18nBundle","setUpdater","useIsomorphicLayoutEffect","isMounted","i18nBundleData","getI18nBundleData","then","old","handler","attachLanguageChange","detachLanguageChange","window","useLayoutEffect","PROP_INCLUDELIST","usePassThroughHtmlProps","props","propExcludeList","componentPropExcludelist","Set","returnVal","name","test","has","useViewportRange","rangeSet","getCurrentRange","innerWidth","currentRange","setCurrentRange","range","attachMediaHandler","detachMediaHandler","GLOBAL_DIR_CSS_VAR","detectRTL","elementRef","doc","document","dirValues","locallyAppliedDir","getComputedStyle","getPropertyValue","includes","dir","documentElement","body","getRTL","useIsRTL","isRTL","setRTL","targets","filter","Boolean","observer","MutationObserver","mutations","forEach","mutation","attributeName","target","observe","attributes","childList","characterData","attributeFilter","disconnect"],"mappings":"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"}