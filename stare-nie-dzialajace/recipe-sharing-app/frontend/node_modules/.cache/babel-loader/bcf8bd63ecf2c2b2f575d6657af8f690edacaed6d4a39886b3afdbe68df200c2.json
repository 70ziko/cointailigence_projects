{"ast":null,"code":"import { isPhone } from \"../Device.js\";\nimport EventProvider from \"../EventProvider.js\";\nimport scroll from \"../animations/scroll.js\";\nconst scrollEventName = \"scroll\";\nconst touchEndEventName = isPhone() ? \"touchend\" : \"mouseup\";\nclass ScrollEnablement extends EventProvider {\n  constructor(containerComponent) {\n    super();\n    this.containerComponent = containerComponent;\n    this.mouseMove = this.ontouchmove.bind(this);\n    this.mouseUp = this.ontouchend.bind(this);\n    this.touchStart = this.ontouchstart.bind(this);\n    this.isPhone = isPhone();\n\n    // On Android devices touchmove is thrown one more time than neccessary (together with touchend)\n    // so we have to cache the previus coordinates in order to provide correct parameters in the\n    // event for Android\n    this.cachedValue = {};\n\n    // In components like Carousel you need to know if the user has clicked on something or swiped\n    // in order to throw the needed event or not\n    this.startX = 0;\n    this.startY = 0;\n    if (this.isPhone) {\n      containerComponent.addEventListener(\"touchstart\", this.touchStart, {\n        passive: true\n      });\n      containerComponent.addEventListener(\"touchmove\", this.mouseMove, {\n        passive: true\n      });\n      containerComponent.addEventListener(\"touchend\", this.mouseUp, {\n        passive: true\n      });\n    } else {\n      containerComponent.addEventListener(\"mousedown\", this.touchStart, {\n        passive: true\n      });\n    }\n  }\n  set scrollContainer(container) {\n    this._container = container;\n  }\n  get scrollContainer() {\n    return this._container;\n  }\n  scrollTo(left, top) {\n    this._container.scrollLeft = left;\n    this._container.scrollTop = top;\n  }\n  move(dx, dy) {\n    return scroll({\n      element: this._container,\n      dx,\n      dy\n    });\n  }\n  getScrollLeft() {\n    return this._container.scrollLeft;\n  }\n  getScrollTop() {\n    return this._container.scrollTop;\n  }\n  _isTouchInside(touch) {\n    const rect = this._container.getBoundingClientRect();\n    const x = this.isPhone ? touch.clientX : touch.x;\n    const y = this.isPhone ? touch.clientY : touch.y;\n    return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n  }\n  ontouchstart(event) {\n    const touch = this.isPhone ? event.touches[0] : null;\n    if (!this.isPhone) {\n      document.addEventListener(\"mouseup\", this.mouseUp, {\n        passive: true\n      });\n      document.addEventListener(\"mousemove\", this.mouseMove, {\n        passive: true\n      });\n    } else {\n      // Needed only on mobile\n      this.startX = touch.pageX;\n      this.startY = touch.pageY;\n    }\n    this._prevDragX = this.isPhone ? touch.pageX : event.x;\n    this._prevDragY = this.isPhone ? touch.pageY : event.y;\n    this._canScroll = this._isTouchInside(this.isPhone ? touch : event);\n  }\n  ontouchmove(event) {\n    if (!this._canScroll) {\n      return;\n    }\n    const container = this._container;\n    const touch = this.isPhone ? event.touches[0] : null;\n    const dragX = this.isPhone ? touch.pageX : event.x;\n    const dragY = this.isPhone ? touch.pageY : event.y;\n    container.scrollLeft += this._prevDragX - dragX;\n    container.scrollTop += this._prevDragY - dragY;\n    this.fireEvent(scrollEventName, {\n      isLeft: dragX > this._prevDragX,\n      isRight: dragX < this._prevDragX\n    });\n    this.cachedValue.dragX = this._prevDragX;\n    this.cachedValue.dragY = this._prevDragY;\n    this._prevDragX = dragX;\n    this._prevDragY = dragY;\n  }\n  ontouchend(event) {\n    if (this.isPhone) {\n      const deltaX = Math.abs(event.changedTouches[0].pageX - this.startX);\n      const deltaY = Math.abs(event.changedTouches[0].pageY - this.startY);\n      if (deltaX < 10 && deltaY < 10) {\n        return;\n      }\n    }\n    if (!this._canScroll) {\n      return;\n    }\n    const container = this._container;\n    const dragX = this.isPhone ? event.changedTouches[0].pageX : event.x;\n    const dragY = this.isPhone ? event.changedTouches[0].pageY : event.y;\n    container.scrollLeft += this._prevDragX - dragX;\n    container.scrollTop += this._prevDragY - dragY;\n    const useCachedValues = dragX === this._prevDragX;\n    const _dragX = useCachedValues ? this.cachedValue.dragX : dragX;\n    // const _dragY = useCachedValues ? this.cachedValue.dragY : dragY; add if needed\n\n    this.fireEvent(touchEndEventName, {\n      isLeft: _dragX < this._prevDragX,\n      isRight: _dragX > this._prevDragX\n    });\n    this._prevDragX = dragX;\n    this._prevDragY = dragY;\n    if (!this.isPhone) {\n      document.removeEventListener(\"mousemove\", this.mouseMove, {\n        passive: true\n      });\n      document.removeEventListener(\"mouseup\", this.mouseUp);\n    }\n  }\n}\nexport default ScrollEnablement;","map":{"version":3,"names":["isPhone","EventProvider","scroll","scrollEventName","touchEndEventName","ScrollEnablement","constructor","containerComponent","mouseMove","ontouchmove","bind","mouseUp","ontouchend","touchStart","ontouchstart","cachedValue","startX","startY","addEventListener","passive","scrollContainer","container","_container","scrollTo","left","top","scrollLeft","scrollTop","move","dx","dy","element","getScrollLeft","getScrollTop","_isTouchInside","touch","rect","getBoundingClientRect","x","clientX","y","clientY","right","bottom","event","touches","document","pageX","pageY","_prevDragX","_prevDragY","_canScroll","dragX","dragY","fireEvent","isLeft","isRight","deltaX","Math","abs","changedTouches","deltaY","useCachedValues","_dragX","removeEventListener"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-base/dist/delegate/ScrollEnablement.js"],"sourcesContent":["import { isPhone } from \"../Device.js\";\nimport EventProvider from \"../EventProvider.js\";\nimport scroll from \"../animations/scroll.js\";\n\nconst scrollEventName = \"scroll\";\nconst touchEndEventName = isPhone() ? \"touchend\" : \"mouseup\";\n\nclass ScrollEnablement extends EventProvider {\n\tconstructor(containerComponent) {\n\t\tsuper();\n\t\tthis.containerComponent = containerComponent;\n\t\tthis.mouseMove = this.ontouchmove.bind(this);\n\t\tthis.mouseUp = this.ontouchend.bind(this);\n\t\tthis.touchStart = this.ontouchstart.bind(this);\n\n\t\tthis.isPhone = isPhone();\n\n\t\t// On Android devices touchmove is thrown one more time than neccessary (together with touchend)\n\t\t// so we have to cache the previus coordinates in order to provide correct parameters in the\n\t\t// event for Android\n\t\tthis.cachedValue = {};\n\n\t\t// In components like Carousel you need to know if the user has clicked on something or swiped\n\t\t// in order to throw the needed event or not\n\t\tthis.startX = 0;\n\t\tthis.startY = 0;\n\n\t\tif (this.isPhone) {\n\t\t\tcontainerComponent.addEventListener(\"touchstart\", this.touchStart, { passive: true });\n\t\t\tcontainerComponent.addEventListener(\"touchmove\", this.mouseMove, { passive: true });\n\t\t\tcontainerComponent.addEventListener(\"touchend\", this.mouseUp, { passive: true });\n\t\t} else {\n\t\t\tcontainerComponent.addEventListener(\"mousedown\", this.touchStart, { passive: true });\n\t\t}\n\t}\n\n\tset scrollContainer(container) {\n\t\tthis._container = container;\n\t}\n\n\tget scrollContainer() {\n\t\treturn this._container;\n\t}\n\n\tscrollTo(left, top) {\n\t\tthis._container.scrollLeft = left;\n\t\tthis._container.scrollTop = top;\n\t}\n\n\tmove(dx, dy) {\n\t\treturn scroll({\n\t\t\telement: this._container,\n\t\t\tdx,\n\t\t\tdy,\n\t\t});\n\t}\n\n\tgetScrollLeft() {\n\t\treturn this._container.scrollLeft;\n\t}\n\n\tgetScrollTop() {\n\t\treturn this._container.scrollTop;\n\t}\n\n\t_isTouchInside(touch) {\n\t\tconst rect = this._container.getBoundingClientRect();\n\t\tconst x = this.isPhone ? touch.clientX : touch.x;\n\t\tconst y = this.isPhone ? touch.clientY : touch.y;\n\n\t\treturn x >= rect.left && x <= rect.right\n\t\t\t&& y >= rect.top && y <= rect.bottom;\n\t}\n\n\tontouchstart(event) {\n\t\tconst touch = this.isPhone ? event.touches[0] : null;\n\n\t\tif (!this.isPhone) {\n\t\t\tdocument.addEventListener(\"mouseup\", this.mouseUp, { passive: true });\n\t\t\tdocument.addEventListener(\"mousemove\", this.mouseMove, { passive: true });\n\t\t} else {\n\t\t\t// Needed only on mobile\n\t\t\tthis.startX = touch.pageX;\n\t\t\tthis.startY = touch.pageY;\n\t\t}\n\n\t\tthis._prevDragX = this.isPhone ? touch.pageX : event.x;\n\t\tthis._prevDragY = this.isPhone ? touch.pageY : event.y;\n\n\t\tthis._canScroll = this._isTouchInside(this.isPhone ? touch : event);\n\t}\n\n\tontouchmove(event) {\n\t\tif (!this._canScroll) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = this._container;\n\t\tconst touch = this.isPhone ? event.touches[0] : null;\n\n\t\tconst dragX = this.isPhone ? touch.pageX : event.x;\n\t\tconst dragY = this.isPhone ? touch.pageY : event.y;\n\n\t\tcontainer.scrollLeft += this._prevDragX - dragX;\n\t\tcontainer.scrollTop += this._prevDragY - dragY;\n\n\t\tthis.fireEvent(scrollEventName, {\n\t\t\tisLeft: dragX > this._prevDragX,\n\t\t\tisRight: dragX < this._prevDragX,\n\t\t});\n\n\t\tthis.cachedValue.dragX = this._prevDragX;\n\t\tthis.cachedValue.dragY = this._prevDragY;\n\n\t\tthis._prevDragX = dragX;\n\t\tthis._prevDragY = dragY;\n\t}\n\n\tontouchend(event) {\n\t\tif (this.isPhone) {\n\t\t\tconst deltaX = Math.abs(event.changedTouches[0].pageX - this.startX);\n\t\t\tconst deltaY = Math.abs(event.changedTouches[0].pageY - this.startY);\n\n\t\t\tif (deltaX < 10 && deltaY < 10) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!this._canScroll) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = this._container;\n\t\tconst dragX = this.isPhone ? event.changedTouches[0].pageX : event.x;\n\t\tconst dragY = this.isPhone ? event.changedTouches[0].pageY : event.y;\n\n\t\tcontainer.scrollLeft += this._prevDragX - dragX;\n\t\tcontainer.scrollTop += this._prevDragY - dragY;\n\n\t\tconst useCachedValues = dragX === this._prevDragX;\n\t\tconst _dragX = useCachedValues ? this.cachedValue.dragX : dragX;\n\t\t// const _dragY = useCachedValues ? this.cachedValue.dragY : dragY; add if needed\n\n\t\tthis.fireEvent(touchEndEventName, {\n\t\t\tisLeft: _dragX < this._prevDragX,\n\t\t\tisRight: _dragX > this._prevDragX,\n\t\t});\n\n\t\tthis._prevDragX = dragX;\n\t\tthis._prevDragY = dragY;\n\n\t\tif (!this.isPhone) {\n\t\t\tdocument.removeEventListener(\"mousemove\", this.mouseMove, { passive: true });\n\t\t\tdocument.removeEventListener(\"mouseup\", this.mouseUp);\n\t\t}\n\t}\n}\n\nexport default ScrollEnablement;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}