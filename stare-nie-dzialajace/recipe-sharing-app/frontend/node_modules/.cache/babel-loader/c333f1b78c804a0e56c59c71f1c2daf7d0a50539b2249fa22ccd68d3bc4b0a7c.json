{"ast":null,"code":"import { isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\";\nlet openedRegistry = [];\nconst addOpenedPopup = (instance, parentPopovers = []) => {\n  if (!openedRegistry.includes(instance)) {\n    openedRegistry.push({\n      instance,\n      parentPopovers\n    });\n  }\n  if (openedRegistry.length === 1) {\n    attachGlobalListener();\n  }\n};\nconst removeOpenedPopup = instance => {\n  openedRegistry = openedRegistry.filter(el => {\n    return el.instance !== instance;\n  });\n  if (!openedRegistry.length) {\n    detachGlobalListener();\n  }\n};\nconst getOpenedPopups = () => {\n  return [...openedRegistry];\n};\nconst _keydownListener = event => {\n  if (!openedRegistry.length) {\n    return;\n  }\n  if (isEscape(event)) {\n    openedRegistry.pop().instance.close(true);\n  }\n};\nconst attachGlobalListener = () => {\n  document.addEventListener(\"keydown\", _keydownListener);\n};\nconst detachGlobalListener = () => {\n  document.removeEventListener(\"keydown\", _keydownListener);\n};\nexport { addOpenedPopup, removeOpenedPopup, getOpenedPopups };","map":{"version":3,"names":["isEscape","openedRegistry","addOpenedPopup","instance","parentPopovers","includes","push","length","attachGlobalListener","removeOpenedPopup","filter","el","detachGlobalListener","getOpenedPopups","_keydownListener","event","pop","close","document","addEventListener","removeEventListener"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents/dist/popup-utils/OpenedPopupsRegistry.js"],"sourcesContent":["import { isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\";\n\nlet openedRegistry = [];\n\nconst addOpenedPopup = (instance, parentPopovers = []) => {\n\tif (!openedRegistry.includes(instance)) {\n\t\topenedRegistry.push({\n\t\t\tinstance,\n\t\t\tparentPopovers,\n\t\t});\n\t}\n\n\tif (openedRegistry.length === 1) {\n\t\tattachGlobalListener();\n\t}\n};\n\nconst removeOpenedPopup = instance => {\n\topenedRegistry = openedRegistry.filter(el => {\n\t\treturn el.instance !== instance;\n\t});\n\n\tif (!openedRegistry.length) {\n\t\tdetachGlobalListener();\n\t}\n};\n\nconst getOpenedPopups = () => {\n\treturn [...openedRegistry];\n};\n\nconst _keydownListener = event => {\n\tif (!openedRegistry.length) {\n\t\treturn;\n\t}\n\n\tif (isEscape(event)) {\n\t\topenedRegistry.pop().instance.close(true);\n\t}\n};\n\nconst attachGlobalListener = () => {\n\tdocument.addEventListener(\"keydown\", _keydownListener);\n};\n\nconst detachGlobalListener = () => {\n\tdocument.removeEventListener(\"keydown\", _keydownListener);\n};\n\nexport { addOpenedPopup, removeOpenedPopup, getOpenedPopups };\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,sCAAsC;AAE/D,IAAIC,cAAc,GAAG,EAAE;AAEvB,MAAMC,cAAc,GAAGA,CAACC,QAAQ,EAAEC,cAAc,GAAG,EAAE,KAAK;EACzD,IAAI,CAACH,cAAc,CAACI,QAAQ,CAACF,QAAQ,CAAC,EAAE;IACvCF,cAAc,CAACK,IAAI,CAAC;MACnBH,QAAQ;MACRC;IACD,CAAC,CAAC;EACH;EAEA,IAAIH,cAAc,CAACM,MAAM,KAAK,CAAC,EAAE;IAChCC,oBAAoB,CAAC,CAAC;EACvB;AACD,CAAC;AAED,MAAMC,iBAAiB,GAAGN,QAAQ,IAAI;EACrCF,cAAc,GAAGA,cAAc,CAACS,MAAM,CAACC,EAAE,IAAI;IAC5C,OAAOA,EAAE,CAACR,QAAQ,KAAKA,QAAQ;EAChC,CAAC,CAAC;EAEF,IAAI,CAACF,cAAc,CAACM,MAAM,EAAE;IAC3BK,oBAAoB,CAAC,CAAC;EACvB;AACD,CAAC;AAED,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAC7B,OAAO,CAAC,GAAGZ,cAAc,CAAC;AAC3B,CAAC;AAED,MAAMa,gBAAgB,GAAGC,KAAK,IAAI;EACjC,IAAI,CAACd,cAAc,CAACM,MAAM,EAAE;IAC3B;EACD;EAEA,IAAIP,QAAQ,CAACe,KAAK,CAAC,EAAE;IACpBd,cAAc,CAACe,GAAG,CAAC,CAAC,CAACb,QAAQ,CAACc,KAAK,CAAC,IAAI,CAAC;EAC1C;AACD,CAAC;AAED,MAAMT,oBAAoB,GAAGA,CAAA,KAAM;EAClCU,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAEL,gBAAgB,CAAC;AACvD,CAAC;AAED,MAAMF,oBAAoB,GAAGA,CAAA,KAAM;EAClCM,QAAQ,CAACE,mBAAmB,CAAC,SAAS,EAAEN,gBAAgB,CAAC;AAC1D,CAAC;AAED,SAASZ,cAAc,EAAEO,iBAAiB,EAAEI,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}