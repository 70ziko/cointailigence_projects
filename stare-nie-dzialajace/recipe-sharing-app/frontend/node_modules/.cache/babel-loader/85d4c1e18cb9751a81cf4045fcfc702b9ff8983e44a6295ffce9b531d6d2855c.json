{"ast":null,"code":"import _extends from '@babel/runtime/helpers/extends';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport _toPropertyKey from '@babel/runtime/helpers/toPropertyKey';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { createUseStyles } from 'react-jss';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/lib/usePassThroughHtmlProps';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport { BASIC, CANCEL, CLEAR, RESTORE, SAVE, SEARCH_FOR_FILTERS, SHOW_ON_FILTER_BAR, FILTERS, GO, SHOW_FILTER_BAR, HIDE_FILTER_BAR } from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { BusyIndicator } from '@ui5/webcomponents-react/lib/BusyIndicator';\nimport { BusyIndicatorSize } from '@ui5/webcomponents-react/lib/BusyIndicatorSize';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/lib/ButtonDesign';\nimport { Toolbar } from '@ui5/webcomponents-react/lib/Toolbar';\nimport { ToolbarSeparator } from '@ui5/webcomponents-react/lib/ToolbarSeparator';\nimport { ToolbarSpacer } from '@ui5/webcomponents-react/lib/ToolbarSpacer';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/lib/ToolbarStyle';\nimport React, { cloneElement, useState, useRef, useEffect, useCallback, useMemo, Children, forwardRef } from 'react';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\nimport '@ui5/webcomponents-icons/dist/search';\nimport { Bar } from '@ui5/webcomponents-react/lib/Bar';\nimport { BarDesign } from '@ui5/webcomponents-react/lib/BarDesign';\nimport { CheckBox } from '@ui5/webcomponents-react/lib/CheckBox';\nimport { Dialog } from '@ui5/webcomponents-react/lib/Dialog';\nimport { FlexBox } from '@ui5/webcomponents-react/lib/FlexBox';\nimport { FlexBoxAlignItems } from '@ui5/webcomponents-react/lib/FlexBoxAlignItems';\nimport { FlexBoxDirection } from '@ui5/webcomponents-react/lib/FlexBoxDirection';\nimport { FlexBoxJustifyContent } from '@ui5/webcomponents-react/lib/FlexBoxJustifyContent';\nimport { Icon } from '@ui5/webcomponents-react/lib/Icon';\nimport { Input } from '@ui5/webcomponents-react/lib/Input';\nimport { Text } from '@ui5/webcomponents-react/lib/Text';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport { CssSizeVariables } from '@ui5/webcomponents-react-base/lib/CssSizeVariables';\nimport { sapUiContentPadding } from '@ui5/webcomponents-react-base/lib/spacing';\nimport { createPortal } from 'react-dom';\nvar styles = {\n  outerContainer: {\n    paddingTop: '0.5rem',\n    paddingLeft: '2rem',\n    paddingRight: '2rem',\n    paddingBottom: '1px',\n    background: ThemingParameters.sapObjectHeader_Background,\n    boxShadow: ThemingParameters.sapContent_HeaderShadow\n  },\n  filterItemExpand: {\n    '--_ui5_input_width': '100%'\n  },\n  filterBarHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    background: ThemingParameters.sapObjectHeader_Background,\n    minHeight: '3rem',\n    paddingBottom: '0.5rem',\n    boxShadow: 'none',\n    flexWrap: 'wrap'\n  },\n  filterArea: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    paddingTop: '1rem',\n    paddingBottom: '1rem',\n    background: ThemingParameters.sapObjectHeader_Background,\n    transition: 'max-height 0.2s ease-out, opacity 0.2s ease-in'\n  },\n  filterAreaClosed: {\n    maxHeight: '0',\n    opacity: 0,\n    padding: 0,\n    overflowY: 'auto'\n  },\n  filterAreaOpen: {\n    maxHeight: '500px',\n    opacity: 1,\n    overflowY: 'auto'\n  },\n  headerRowRight: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flexGrow: 1,\n    '& ui5-button': {\n      marginLeft: '0.5rem'\n    }\n  },\n  showFiltersBtn: {\n    minWidth: '108px'\n  },\n  loadingContainer: {\n    marginBottom: '0.5rem',\n    display: 'flex',\n    width: '100%',\n    justifyContent: 'center'\n  }\n};\nvar stopPropagation = function stopPropagation(e) {\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n};\nvar styles$1 = {\n  dialog: _objectSpread(_objectSpread({}, sapUiContentPadding), {}, {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '960px',\n    width: '80vw',\n    maxHeight: '70vh',\n    '--_ui5_input_width': '100%'\n  }),\n  header: {\n    width: '100%',\n    padding: '0.25rem 1rem 0 1rem',\n    '& *': {\n      margin: '0.25rem 0 0.25rem 0'\n    },\n    '& ui5-input': {\n      width: '100%'\n    }\n  },\n  footer: {\n    '& :not(:last-child)': {\n      marginRight: '0.25rem'\n    }\n  },\n  groupContainer: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  groupTitle: {\n    maxWidth: '85%',\n    marginRight: '0.5rem'\n  },\n  filters: {\n    padding: '1rem 0 2rem 0'\n  },\n  singleFilter: {\n    display: 'grid',\n    gridTemplateColumns: \"auto minmax(\".concat(CssSizeVariables.sapWcrCheckBoxWidthHeight, \",7%)\"),\n    gridTemplateRows: 'auto',\n    gridColumnGap: '0.5rem',\n    '@media(max-width:700px)': {\n      marginTop: '0.5rem'\n    },\n    '& ui5-checkbox': {\n      placeSelf: 'center start',\n      '@media(max-width:700px)': {\n        marginTop: '0.8rem',\n        paddingLeft: 0,\n        placeSelf: 'end start'\n      }\n    }\n  },\n  fbSearch: {\n    '@media(min-width:700px)': {\n      display: 'grid',\n      gridTemplateColumns: '20% auto 7%',\n      gridTemplateRows: 'auto',\n      gridRowGap: '0.5rem',\n      gridColumnGap: '0.5rem'\n    },\n    paddingBottom: '2rem',\n    width: '100%',\n    '& ui5-input': {\n      width: '100%'\n    }\n  }\n};\nvar filterValue = function filterValue(ref, child) {\n  var tagName = ref.tagName;\n  var filterItemProps = {};\n  if (tagName === 'UI5-INPUT' || tagName === 'UI5-DATE-PICKER' || tagName === 'UI5-DATETIME-PICKER' || tagName === 'UI5-DATERANGE-PICKER' || tagName === 'UI5-TIME-PICKER' || tagName === 'UI5-DURATION-PICKER') {\n    filterItemProps = {\n      value: ref.value\n    };\n  }\n  if (tagName === 'UI5-COMBOBOX') {\n    filterItemProps = {\n      value: ref.value,\n      filterValue: ref.filterValue\n    };\n  }\n  if (tagName === 'UI5-SELECT' || tagName === 'UI5-MULTI-COMBOBOX') {\n    var _child$props$children;\n    var selectedIndices = Array.from(ref.children).map(function (item, index) {\n      return item.selected ? index : false;\n    }).filter(function (el) {\n      return el !== false;\n    });\n    var selectedIndicesSet = new Set(selectedIndices);\n    var options = (_child$props$children = child.props.children.props.children) === null || _child$props$children === void 0 ? void 0 : _child$props$children.map(function (item, index) {\n      if (selectedIndicesSet.has(index)) {\n        return /*#__PURE__*/cloneElement(item, {\n          selected: true\n        });\n      }\n      return /*#__PURE__*/cloneElement(item, {\n        selected: false\n      });\n    });\n    filterItemProps = {\n      children: options\n    };\n  }\n  if (tagName === 'UI5-SWITCH' || tagName === 'UI5-CHECKBOX') {\n    filterItemProps = {\n      checked: ref.checked\n    };\n  }\n  return filterItemProps;\n};\nvar renderSearchWithValue = function renderSearchWithValue(renderSearchElement, searchValue) {\n  var _renderSearchElement$;\n  return /*#__PURE__*/cloneElement(renderSearchElement, {\n    value: searchValue !== null && searchValue !== void 0 ? searchValue : renderSearchElement === null || renderSearchElement === void 0 ? void 0 : (_renderSearchElement$ = renderSearchElement.props) === null || _renderSearchElement$ === void 0 ? void 0 : _renderSearchElement$.value\n  });\n};\nvar useStyles = createUseStyles(styles$1, {\n  name: 'FilterBarDialog'\n});\nvar FilterDialog = function FilterDialog(props) {\n  var filterBarRefs = props.filterBarRefs,\n    open = props.open,\n    handleDialogClose = props.handleDialogClose,\n    children = props.children,\n    showClearButton = props.showClearButton,\n    showRestoreButton = props.showRestoreButton,\n    showGoButton = props.showGoButton,\n    showSearch = props.showSearch,\n    renderFBSearch = props.renderFBSearch,\n    handleClearFilters = props.handleClearFilters,\n    handleRestoreFilters = props.handleRestoreFilters,\n    handleDialogSave = props.handleDialogSave,\n    searchValue = props.searchValue,\n    handleSearchValueChange = props.handleSearchValueChange,\n    onGo = props.onGo,\n    handleSelectionChange = props.handleSelectionChange,\n    handleDialogSearch = props.handleDialogSearch,\n    handleDialogCancel = props.handleDialogCancel;\n  var classes = useStyles();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    searchString = _useState2[0],\n    setSearchString = _useState2[1];\n  var searchRef = useRef(null);\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    toggledFilters = _useState4[0],\n    setToggledFilters = _useState4[1];\n  var dialogRefs = useRef({});\n  var dialogRef = useRef();\n  var i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  var basicText = i18nBundle.getText(BASIC);\n  var cancelText = i18nBundle.getText(CANCEL);\n  var clearText = i18nBundle.getText(CLEAR);\n  var restoreText = i18nBundle.getText(RESTORE);\n  var saveText = i18nBundle.getText(SAVE);\n  var searchForFiltersText = i18nBundle.getText(SEARCH_FOR_FILTERS);\n  var showOnFilterBarText = i18nBundle.getText(SHOW_ON_FILTER_BAR);\n  var filtersTitle = i18nBundle.getText(FILTERS);\n  var goText = i18nBundle.getText(GO);\n  useEffect(function () {\n    if (open) {\n      dialogRef.current.open();\n    }\n  }, [open]);\n  var handleSearch = useCallback(function (e) {\n    if (handleDialogSearch) {\n      handleDialogSearch(enrichEventWithDetails(e, {\n        value: e.target.value\n      }));\n    }\n    setSearchString(e.target.value);\n  }, [setSearchString, handleDialogSearch]);\n  var handleSave = useCallback(function (e) {\n    if (renderFBSearch) {\n      var _searchRef$current;\n      handleSearchValueChange((_searchRef$current = searchRef.current) === null || _searchRef$current === void 0 ? void 0 : _searchRef$current.children[1].value);\n    }\n    handleDialogSave(e, dialogRefs.current, toggledFilters);\n  }, [renderFBSearch, handleSearchValueChange, searchRef, handleDialogSave, toggledFilters, dialogRefs]);\n  var handleClose = useCallback(function (e) {\n    stopPropagation(e);\n    if (!showGoButton) {\n      handleSave(e);\n      return;\n    }\n    handleDialogClose(e);\n  }, [showGoButton, handleSave, handleDialogClose]);\n  var handleDialogGo = useCallback(function (e) {\n    if (onGo) {\n      onGo(enrichEventWithDetails(e));\n    }\n    handleDialogClose(e);\n  }, [onGo, handleDialogClose]);\n  var handleRestore = useCallback(function (e) {\n    handleRestoreFilters(e, 'dialog');\n  }, [handleRestoreFilters]);\n  var handleCancel = useCallback(function (e) {\n    if (handleDialogCancel) {\n      handleDialogCancel(enrichEventWithDetails(e));\n    }\n    handleDialogClose(e);\n  }, [handleDialogCancel]);\n  var footerContentRight = useMemo(function () {\n    return /*#__PURE__*/React.createElement(FlexBox, {\n      justifyContent: FlexBoxJustifyContent.End,\n      className: classes.footer\n    }, showGoButton && /*#__PURE__*/React.createElement(Button, {\n      onClick: handleDialogGo,\n      design: ButtonDesign.Emphasized,\n      title: goText\n    }, goText), showClearButton && /*#__PURE__*/React.createElement(Button, {\n      onClick: handleClearFilters\n    }, clearText), showRestoreButton && /*#__PURE__*/React.createElement(Button, {\n      onClick: handleRestore\n    }, restoreText), /*#__PURE__*/React.createElement(Button, {\n      onClick: handleSave\n    }, saveText), /*#__PURE__*/React.createElement(Button, {\n      design: ButtonDesign.Transparent,\n      onClick: handleCancel\n    }, cancelText));\n  }, [goText, showGoButton, classes.footer, handleDialogGo, showClearButton, handleClearFilters, showRestoreButton, handleRestore, handleSave, handleCancel]);\n  var renderFooter = useCallback(function () {\n    return /*#__PURE__*/React.createElement(Bar, {\n      design: BarDesign.Footer,\n      endContent: footerContentRight\n    });\n  }, [footerContentRight]);\n  var renderHeader = useCallback(function () {\n    return /*#__PURE__*/React.createElement(FlexBox, {\n      direction: FlexBoxDirection.Column,\n      alignItems: FlexBoxAlignItems.Center,\n      className: classes.header\n    }, /*#__PURE__*/React.createElement(Title, {\n      level: TitleLevel.H4,\n      tooltip: filtersTitle\n    }, filtersTitle), showSearch && /*#__PURE__*/React.createElement(Input, {\n      placeholder: searchForFiltersText,\n      onInput: handleSearch,\n      icon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"search\"\n      })\n    }));\n  }, [classes.header, showSearch, handleSearch, filtersTitle]);\n  var renderChildren = useCallback(function () {\n    return children.filter(function (item) {\n      var _item$props, _item$props2, _item$props2$label;\n      return !!(item !== null && item !== void 0 && item.props) && ((_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.visible) && (((_item$props2 = item.props) === null || _item$props2 === void 0 ? void 0 : (_item$props2$label = _item$props2.label) === null || _item$props2$label === void 0 ? void 0 : _item$props2$label.toLowerCase().includes(searchString.toLowerCase())) || searchString.length === 0);\n    }).map(function (child) {\n      var filterBarItemRef = filterBarRefs.current[child.key];\n      var filterItemProps = {};\n      if (filterBarItemRef) {\n        filterItemProps = filterValue(filterBarItemRef, child);\n      }\n      if (!child.props.children) return child;\n      return /*#__PURE__*/cloneElement(child, {\n        children: _objectSpread(_objectSpread({}, child.props.children), {}, {\n          props: _objectSpread(_objectSpread({}, child.props.children.props), filterItemProps),\n          ref: function ref(node) {\n            dialogRefs.current[child.key] = node;\n          }\n        })\n      });\n    });\n  }, [children, searchString, filterBarRefs]);\n  var handleCheckBoxChange = useCallback(function (element) {\n    return function (e) {\n      if (handleSelectionChange) {\n        handleSelectionChange(enrichEventWithDetails(e, {\n          element: element,\n          checked: e.target.checked\n        }));\n      }\n      setToggledFilters(function (old) {\n        return _objectSpread(_objectSpread({}, old), {}, _defineProperty({}, element.key, e.target.checked));\n      });\n    };\n  }, [setToggledFilters, handleSelectionChange]);\n  var renderGroups = useCallback(function () {\n    var groups = {};\n    Children.forEach(renderChildren(), function (child) {\n      var _child$props$groupNam;\n      var childGroups = (_child$props$groupNam = child.props.groupName) !== null && _child$props$groupNam !== void 0 ? _child$props$groupNam : 'default';\n      if (groups[childGroups]) {\n        groups[childGroups].push(child);\n      } else {\n        groups[childGroups] = [child];\n      }\n    });\n    return Object.keys(groups).sort(function (x, y) {\n      return x === 'default' ? -1 : y === 'role' ? 1 : 0;\n    }).map(function (item, index) {\n      var filters = groups[item].map(function (el) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.singleFilter,\n          key: \"\".concat(el.key, \"-container\")\n        }, el, /*#__PURE__*/React.createElement(CheckBox, {\n          role: \"checkbox\",\n          checked: el.props.visibleInFilterBar || el.props.required || el.type.displayName !== 'FilterGroupItem',\n          onChange: handleCheckBoxChange(el),\n          disabled: el.props.required || el.type.displayName !== 'FilterGroupItem'\n        }));\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.groupContainer,\n        key: item\n      }, /*#__PURE__*/React.createElement(FlexBox, {\n        justifyContent: FlexBoxJustifyContent.SpaceBetween,\n        alignItems: FlexBoxAlignItems.Center\n      }, /*#__PURE__*/React.createElement(Title, {\n        level: TitleLevel.H5,\n        className: index === 0 ? classes.groupTitle : '',\n        tooltip: item === 'default' ? basicText : item\n      }, item === 'default' ? basicText : item), index === 0 && /*#__PURE__*/React.createElement(Text, {\n        wrapping: false\n      }, showOnFilterBarText)), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.filters\n      }, filters));\n    });\n  }, [renderChildren, toggledFilters, handleCheckBoxChange]);\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(Dialog, {\n    ref: dialogRef,\n    header: renderHeader(),\n    footer: renderFooter(),\n    onAfterClose: handleClose\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.dialog,\n    role: \"dialog\"\n  }, renderFBSearch && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.fbSearch,\n    ref: searchRef\n  }, /*#__PURE__*/React.createElement(\"span\", null), renderSearchWithValue(renderFBSearch, searchValue)), renderGroups())), document.body);\n};\nvar useStyles$1 = createUseStyles(styles, {\n  name: 'FilterBar'\n});\n/**\n * The `FilterBar` displays filters in a user-friendly manner to populate values for a query. It consists of a row containing the `VariantManagement`, the related buttons, and an area underneath displaying the filters. The filters are arranged in a logical row that is divided depending on the space available and the width of the filters. The area containing the filters can be hidden or shown using the \"Hide FilterBar / Show FilterBar\" button, the \"Filters\" button shows the filter dialog.\n In this dialog, the consumer has full control over the FilterBar. The filters in this dialog are displayed in one column and organized in groups. Each filter can be marked as visible in the FilterBar by selecting \"Add to FilterBar\".\n */\n\nvar FilterBar = /*#__PURE__*/forwardRef(function (props, ref) {\n  var _search$props2, _search$props5, _searchRef$current;\n  var children = props.children,\n    useToolbar = props.useToolbar,\n    loading = props.loading,\n    filterBarExpanded = props.filterBarExpanded,\n    considerGroupName = props.considerGroupName,\n    filterContainerWidth = props.filterContainerWidth,\n    activeFiltersCount = props.activeFiltersCount,\n    showClearOnFB = props.showClearOnFB,\n    showGoOnFB = props.showGoOnFB,\n    showGo = props.showGo,\n    showFilterConfiguration = props.showFilterConfiguration,\n    showRestoreOnFB = props.showRestoreOnFB,\n    showClearButton = props.showClearButton,\n    showRestoreButton = props.showRestoreButton,\n    showSearchOnFiltersDialog = props.showSearchOnFiltersDialog,\n    style = props.style,\n    className = props.className,\n    tooltip = props.tooltip,\n    slot = props.slot,\n    search = props.search,\n    variants = props.variants,\n    onToggleFilters = props.onToggleFilters,\n    onFiltersDialogOpen = props.onFiltersDialogOpen,\n    onFiltersDialogCancel = props.onFiltersDialogCancel,\n    onFiltersDialogClose = props.onFiltersDialogClose,\n    onFiltersDialogSave = props.onFiltersDialogSave,\n    onFiltersDialogClear = props.onFiltersDialogClear,\n    onClear = props.onClear,\n    onFiltersDialogSelectionChange = props.onFiltersDialogSelectionChange,\n    onFiltersDialogSearch = props.onFiltersDialogSearch,\n    onGo = props.onGo,\n    onRestore = props.onRestore;\n  var _useState = useState(useToolbar ? filterBarExpanded : true),\n    _useState2 = _slicedToArray(_useState, 2),\n    showFilters = _useState2[0],\n    setShowFilters = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    mountFilters = _useState4[0],\n    setMountFilters = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    dialogOpen = _useState6[0],\n    setDialogOpen = _useState6[1];\n  var _useState7 = useState(undefined),\n    _useState8 = _slicedToArray(_useState7, 2),\n    searchValue = _useState8[0],\n    setSearchValue = _useState8[1];\n  var searchRef = useRef(null);\n  var filterRefs = useRef({});\n  var _useState9 = useState({}),\n    _useState10 = _slicedToArray(_useState9, 2),\n    dialogRefs = _useState10[0],\n    setDialogRefs = _useState10[1];\n  var _useState11 = useState({}),\n    _useState12 = _slicedToArray(_useState11, 2),\n    toggledFilters = _useState12[0],\n    setToggledFilters = _useState12[1];\n  var prevVisibleInFilterBarProps = useRef({});\n  var prevSearchInputPropsValueRef = useRef();\n  var i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  var clearText = i18nBundle.getText(CLEAR);\n  var restoreText = i18nBundle.getText(RESTORE);\n  var showFilterBarText = i18nBundle.getText(SHOW_FILTER_BAR);\n  var hideFilterBarText = i18nBundle.getText(HIDE_FILTER_BAR);\n  var goText = i18nBundle.getText(GO);\n  var filtersText = i18nBundle.getText(FILTERS);\n  useEffect(function () {\n    Children.toArray(children).forEach(function (item) {\n      setToggledFilters(function (prev) {\n        if (!item.props.hasOwnProperty('visibleInFilterBar') && (prev === null || prev === void 0 ? void 0 : prev[item.key]) === undefined) {\n          return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, item.key, true));\n        }\n        if (item.props.hasOwnProperty('visibleInFilterBar')) {\n          return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, item.key, item.props.visibleInFilterBar));\n        }\n        return prev;\n      });\n    });\n  }, [children, setToggledFilters]);\n  useEffect(function () {\n    setShowFilters(useToolbar ? filterBarExpanded : true);\n  }, [setShowFilters, useToolbar, filterBarExpanded]);\n  var classes = useStyles$1();\n  var filterAreaClasses = StyleClassHelper.of(classes.filterArea);\n  if (showFilters) {\n    filterAreaClasses.put(classes.filterAreaOpen);\n  } else {\n    filterAreaClasses.put(classes.filterAreaClosed);\n  }\n  var handleToggle = useCallback(function (e) {\n    if (onToggleFilters) {\n      onToggleFilters(enrichEventWithDetails(e, {\n        visible: !showFilters\n      }));\n    }\n    setShowFilters(!showFilters);\n  }, [showFilters, onToggleFilters, setShowFilters]);\n  var handleDialogSave = useCallback(function (e, newRefs, updatedToggledFilters) {\n    setDialogRefs(newRefs);\n    setToggledFilters(function (old) {\n      return _objectSpread(_objectSpread({}, old), updatedToggledFilters);\n    });\n    if (onFiltersDialogSave) {\n      onFiltersDialogSave(enrichEventWithDetails(e, {\n        elements: newRefs,\n        toggledElements: _objectSpread(_objectSpread({}, toggledFilters), updatedToggledFilters)\n      }));\n    }\n    handleDialogClose(e);\n  }, [setDialogOpen, setDialogRefs, setToggledFilters, onFiltersDialogSave, toggledFilters]);\n  var handleDialogOpen = useCallback(function (e) {\n    setDialogOpen(true);\n    if (onFiltersDialogOpen) {\n      onFiltersDialogOpen(enrichEventWithDetails(e));\n    }\n  }, [setDialogOpen, onFiltersDialogOpen]);\n  var handleDialogClose = useCallback(function (e) {\n    if (onFiltersDialogClose) {\n      onFiltersDialogClose(enrichEventWithDetails(e));\n    }\n    setDialogOpen(false);\n  }, [setDialogOpen, onFiltersDialogClose]);\n  var passThroughProps = usePassThroughHtmlProps(props, ['onToggleFilters', 'onFiltersDialogOpen', 'onFiltersDialogClose', 'onFiltersDialogSave', 'onFiltersDialogClear', 'onClear', 'onFiltersDialogSelectionChange', 'onFiltersDialogSearch', 'onGo', 'onRestore', 'onFiltersDialogCancel']);\n  var safeChildren = useCallback(function () {\n    if (Object.keys(toggledFilters).length > 0) {\n      return Children.toArray(children).map(function (child) {\n        if ((toggledFilters === null || toggledFilters === void 0 ? void 0 : toggledFilters[child.key]) !== undefined) {\n          return /*#__PURE__*/cloneElement(child, {\n            visibleInFilterBar: toggledFilters[child.key]\n          });\n        }\n        return child;\n      });\n    }\n    return Children.toArray(children);\n  }, [toggledFilters, children]);\n  var prevChildren = useRef({});\n  var renderChildren = useCallback(function () {\n    var childProps = {\n      considerGroupName: considerGroupName,\n      inFB: true\n    };\n    return safeChildren().filter(function (item) {\n      var _item$props, _item$props2;\n      return (item === null || item === void 0 ? void 0 : (_item$props = item.props) === null || _item$props === void 0 ? void 0 : _item$props.visible) && ((_item$props2 = item.props) === null || _item$props2 === void 0 ? void 0 : _item$props2.visibleInFilterBar);\n    }).map(function (child) {\n      var _prevChildren$current, _child$props$children, _child$props$children2, _prevChildren$current2, _prevChildren$current3, _child$props$children3, _child$props$children4, _prevChildren$current4, _prevChildren$current5, _child$props$children5, _child$props$children6, _prevChildren$current6, _prevChildren$current7, _child$props$children7, _child$props$children8, _child$props$children9, _prevChildren$current8, _prevChildren$current9, _prevChildren$current10;\n      if (filterContainerWidth) {\n        childProps.style = _objectSpread({\n          width: filterContainerWidth\n        }, child.props.style);\n      }\n      if (!showFilterConfiguration) {\n        return /*#__PURE__*/cloneElement(child, _objectSpread({}, childProps));\n      }\n      prevVisibleInFilterBarProps.current[child.key] = child.props.visibleInFilterBar;\n      var filterItemProps = {};\n      if (Object.keys(dialogRefs).length > 0) {\n        var dialogItemRef = dialogRefs[child.key];\n        if (dialogItemRef) {\n          filterItemProps = filterValue(dialogItemRef, child);\n        }\n      }\n      if (!child.props.children) {\n        return /*#__PURE__*/cloneElement(child, _objectSpread({}, childProps));\n      }\n      if ((_prevChildren$current = prevChildren.current) !== null && _prevChildren$current !== void 0 && _prevChildren$current[child.key] && (\n      //Input\n      ((_child$props$children = child.props.children) === null || _child$props$children === void 0 ? void 0 : (_child$props$children2 = _child$props$children.props) === null || _child$props$children2 === void 0 ? void 0 : _child$props$children2.value) !== ((_prevChildren$current2 = prevChildren.current) === null || _prevChildren$current2 === void 0 ? void 0 : (_prevChildren$current3 = _prevChildren$current2[child.key]) === null || _prevChildren$current3 === void 0 ? void 0 : _prevChildren$current3.value) ||\n      //Combobox\n      ((_child$props$children3 = child.props.children) === null || _child$props$children3 === void 0 ? void 0 : (_child$props$children4 = _child$props$children3.props) === null || _child$props$children4 === void 0 ? void 0 : _child$props$children4.filterValue) !== ((_prevChildren$current4 = prevChildren.current) === null || _prevChildren$current4 === void 0 ? void 0 : (_prevChildren$current5 = _prevChildren$current4[child.key]) === null || _prevChildren$current5 === void 0 ? void 0 : _prevChildren$current5.filterValue) ||\n      //Checkbox\n      ((_child$props$children5 = child.props.children) === null || _child$props$children5 === void 0 ? void 0 : (_child$props$children6 = _child$props$children5.props) === null || _child$props$children6 === void 0 ? void 0 : _child$props$children6.checked) !== ((_prevChildren$current6 = prevChildren.current) === null || _prevChildren$current6 === void 0 ? void 0 : (_prevChildren$current7 = _prevChildren$current6[child.key]) === null || _prevChildren$current7 === void 0 ? void 0 : _prevChildren$current7.checked) ||\n      //Selectable\n      ((_child$props$children7 = child.props.children) === null || _child$props$children7 === void 0 ? void 0 : (_child$props$children8 = _child$props$children7.props) === null || _child$props$children8 === void 0 ? void 0 : (_child$props$children9 = _child$props$children8.children) === null || _child$props$children9 === void 0 ? void 0 : _child$props$children9.map(function (item) {\n        return item.props.selected;\n      }).join(',')) !== (prevChildren === null || prevChildren === void 0 ? void 0 : (_prevChildren$current8 = prevChildren.current) === null || _prevChildren$current8 === void 0 ? void 0 : (_prevChildren$current9 = _prevChildren$current8[child.key]) === null || _prevChildren$current9 === void 0 ? void 0 : (_prevChildren$current10 = _prevChildren$current9.children) === null || _prevChildren$current10 === void 0 ? void 0 : _prevChildren$current10.map(function (item) {\n        return item.props.selected;\n      }).join(',')))) {\n        // @ts-ignore\n        var _child$key = child.key;\n        dialogRefs[_child$key];\n        var rest = _objectWithoutProperties(dialogRefs, [_child$key].map(_toPropertyKey));\n        setDialogRefs(rest);\n      }\n      prevChildren.current[child.key] = child.props.children.props;\n      return /*#__PURE__*/cloneElement(child, _objectSpread(_objectSpread({}, childProps), {}, {\n        children: _objectSpread(_objectSpread({}, child.props.children), {}, {\n          props: _objectSpread(_objectSpread({}, child.props.children.props), filterItemProps),\n          ref: function ref(node) {\n            filterRefs.current[child.key] = node;\n          }\n        })\n      }));\n    });\n  }, [filterContainerWidth, considerGroupName, dialogRefs, safeChildren, showFilterConfiguration]);\n  var handleSearchValueChange = useCallback(function (newVal) {\n    setSearchValue(newVal);\n  }, [setSearchValue]);\n  var handleRestoreFilters = useCallback(function (e, source) {\n    if (source === 'dialog' && showGo) {\n      setDialogOpen(false);\n      setDialogOpen(true);\n    } else if (source === 'filterBar' && showGoOnFB) {\n      setMountFilters(false);\n      setMountFilters(true);\n    }\n    if (onRestore) {\n      onRestore(enrichEventWithDetails(e, {\n        source: source\n      }));\n    }\n  }, [setDialogOpen, showGo, showGoOnFB, onRestore]);\n  var handleFBRestore = useCallback(function (e) {\n    handleRestoreFilters(e, 'filterBar');\n  }, [handleRestoreFilters]);\n  var cssClasses = StyleClassHelper.of(classes.outerContainer);\n  if (className) {\n    cssClasses.put(className);\n  }\n  if (filterContainerWidth) {\n    cssClasses.put(classes.filterItemExpand);\n  }\n  useEffect(function () {\n    var _search$props;\n    prevSearchInputPropsValueRef.current = search === null || search === void 0 ? void 0 : (_search$props = search.props) === null || _search$props === void 0 ? void 0 : _search$props.value;\n  }, [search === null || search === void 0 ? void 0 : (_search$props2 = search.props) === null || _search$props2 === void 0 ? void 0 : _search$props2.value]);\n  var prevSearchInputPropsValue = prevSearchInputPropsValueRef.current;\n  useEffect(function () {\n    var _search$props3;\n    if (prevSearchInputPropsValue !== (search === null || search === void 0 ? void 0 : (_search$props3 = search.props) === null || _search$props3 === void 0 ? void 0 : _search$props3.value)) {\n      var _search$props4;\n      setSearchValue(search === null || search === void 0 ? void 0 : (_search$props4 = search.props) === null || _search$props4 === void 0 ? void 0 : _search$props4.value);\n    }\n  }, [prevSearchInputPropsValue, search === null || search === void 0 ? void 0 : (_search$props5 = search.props) === null || _search$props5 === void 0 ? void 0 : _search$props5.value]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, dialogOpen && showFilterConfiguration && /*#__PURE__*/React.createElement(FilterDialog, {\n    filterBarRefs: filterRefs,\n    open: dialogOpen,\n    handleDialogClose: handleDialogClose,\n    onGo: onGo,\n    handleRestoreFilters: handleRestoreFilters,\n    searchValue: (_searchRef$current = searchRef.current) === null || _searchRef$current === void 0 ? void 0 : _searchRef$current.children[0].value,\n    handleSearchValueChange: handleSearchValueChange,\n    showClearButton: showClearButton,\n    showRestoreButton: showRestoreButton,\n    showSearch: showSearchOnFiltersDialog,\n    renderFBSearch: search,\n    handleClearFilters: onFiltersDialogClear,\n    handleSelectionChange: onFiltersDialogSelectionChange,\n    handleDialogSave: handleDialogSave,\n    showGoButton: showGo,\n    handleDialogSearch: onFiltersDialogSearch,\n    handleDialogCancel: onFiltersDialogCancel\n  }, safeChildren()), /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref,\n    className: cssClasses.toString(),\n    style: style,\n    title: tooltip,\n    slot: slot\n  }, passThroughProps), loading ? /*#__PURE__*/React.createElement(BusyIndicator, {\n    active: true,\n    className: classes.loadingContainer,\n    size: BusyIndicatorSize.Large\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Toolbar, {\n    className: classes.filterBarHeader,\n    toolbarStyle: ToolbarStyle.Clear\n  }, variants, search && /*#__PURE__*/React.createElement(ToolbarSeparator, null), search && /*#__PURE__*/React.createElement(\"div\", {\n    ref: searchRef\n  }, renderSearchWithValue(search, searchValue)), useToolbar && /*#__PURE__*/React.createElement(ToolbarSpacer, null), useToolbar && showClearOnFB && /*#__PURE__*/React.createElement(Button, {\n    onClick: onClear,\n    design: ButtonDesign.Transparent\n  }, clearText), useToolbar && showRestoreOnFB && /*#__PURE__*/React.createElement(Button, {\n    onClick: handleFBRestore,\n    design: ButtonDesign.Transparent\n  }, restoreText), useToolbar && /*#__PURE__*/React.createElement(Button, {\n    onClick: handleToggle,\n    design: ButtonDesign.Transparent,\n    className: classes.showFiltersBtn\n  }, showFilters ? hideFilterBarText : showFilterBarText), useToolbar && showFilterConfiguration && /*#__PURE__*/React.createElement(Button, {\n    onClick: handleDialogOpen\n  }, \"\".concat(filtersText).concat(activeFiltersCount && parseInt(activeFiltersCount) > 0 ? \" (\".concat(activeFiltersCount, \")\") : '')), useToolbar && showGoOnFB && /*#__PURE__*/React.createElement(Button, {\n    onClick: onGo,\n    design: ButtonDesign.Emphasized\n  }, goText)), mountFilters && /*#__PURE__*/React.createElement(\"div\", {\n    className: filterAreaClasses.valueOf()\n  }, renderChildren()))));\n});\nFilterBar.defaultProps = {\n  useToolbar: true,\n  filterBarExpanded: true,\n  showClearOnFB: false,\n  showGo: false,\n  showRestoreOnFB: false,\n  showGoOnFB: false,\n  showFilterConfiguration: false,\n  showClearButton: false,\n  showRestoreButton: false,\n  showSearchOnFiltersDialog: false,\n  considerGroupName: false,\n  loading: false,\n  onToggleFilters: null,\n  onFiltersDialogOpen: null,\n  onFiltersDialogCancel: null,\n  onFiltersDialogClose: null,\n  onFiltersDialogSave: null,\n  onFiltersDialogClear: null,\n  onClear: null,\n  onFiltersDialogSelectionChange: null,\n  onFiltersDialogSearch: null,\n  onGo: null,\n  onRestore: null\n};\nFilterBar.displayName = 'FilterBar';\nexport { FilterBar };","map":{"version":3,"names":["styles","outerContainer","paddingTop","paddingLeft","paddingRight","paddingBottom","background","ThemingParameters","sapObjectHeader_Background","boxShadow","sapContent_HeaderShadow","filterItemExpand","filterBarHeader","alignItems","display","minHeight","flexWrap","filterArea","transition","filterAreaClosed","maxHeight","opacity","padding","overflowY","filterAreaOpen","headerRowRight","justifyContent","flexGrow","marginLeft","showFiltersBtn","minWidth","loadingContainer","marginBottom","width","stopPropagation","e","stopImmediatePropagation","styles$1","dialog","_objectSpread","sapUiContentPadding","flexDirection","maxWidth","header","margin","footer","marginRight","groupContainer","groupTitle","filters","singleFilter","gridTemplateColumns","concat","CssSizeVariables","sapWcrCheckBoxWidthHeight","gridTemplateRows","gridColumnGap","marginTop","placeSelf","fbSearch","gridRowGap","filterValue","ref","child","tagName","filterItemProps","value","_child$props$children","selectedIndices","Array","from","children","map","item","index","selected","filter","el","selectedIndicesSet","Set","options","props","has","cloneElement","checked","renderSearchWithValue","renderSearchElement","searchValue","_renderSearchElement$","useStyles","createUseStyles","name","FilterDialog","filterBarRefs","open","handleDialogClose","showClearButton","showRestoreButton","showGoButton","showSearch","renderFBSearch","handleClearFilters","handleRestoreFilters","handleDialogSave","handleSearchValueChange","onGo","handleSelectionChange","handleDialogSearch","handleDialogCancel","classes","_useState","useState","_useState2","_slicedToArray","searchString","setSearchString","searchRef","useRef","_useState3","_useState4","toggledFilters","setToggledFilters","dialogRefs","dialogRef","i18nBundle","useI18nBundle","basicText","getText","BASIC","cancelText","CANCEL","clearText","CLEAR","restoreText","RESTORE","saveText","SAVE","searchForFiltersText","SEARCH_FOR_FILTERS","showOnFilterBarText","SHOW_ON_FILTER_BAR","filtersTitle","FILTERS","goText","GO","useEffect","current","handleSearch","useCallback","enrichEventWithDetails","target","handleSave","_searchRef$current","handleClose","handleDialogGo","handleRestore","handleCancel","footerContentRight","useMemo","React","createElement","FlexBox","FlexBoxJustifyContent","End","className","Button","onClick","design","ButtonDesign","Emphasized","title","Transparent","renderFooter","Bar","BarDesign","Footer","endContent","renderHeader","direction","FlexBoxDirection","Column","FlexBoxAlignItems","Center","Title","level","TitleLevel","H4","tooltip","Input","placeholder","onInput","icon","Icon","renderChildren","_item$props","_item$props2","_item$props2$label","visible","label","toLowerCase","includes","length","filterBarItemRef","key","node","handleCheckBoxChange","element","old","_defineProperty","renderGroups","groups","Children","forEach","_child$props$groupNam","childGroups","groupName","push","Object","keys","sort","x","y","CheckBox","role","visibleInFilterBar","required","type","displayName","onChange","disabled","SpaceBetween","H5","Text","wrapping","createPortal","Dialog","onAfterClose","document","body","useStyles$1","FilterBar","forwardRef","_search$props2","_search$props5","useToolbar","loading","filterBarExpanded","considerGroupName","filterContainerWidth","activeFiltersCount","showClearOnFB","showGoOnFB","showGo","showFilterConfiguration","showRestoreOnFB","showSearchOnFiltersDialog","style","slot","search","variants","onToggleFilters","onFiltersDialogOpen","onFiltersDialogCancel","onFiltersDialogClose","onFiltersDialogSave","onFiltersDialogClear","onClear","onFiltersDialogSelectionChange","onFiltersDialogSearch","onRestore","showFilters","setShowFilters","mountFilters","setMountFilters","_useState5","_useState6","dialogOpen","setDialogOpen","_useState7","undefined","_useState8","setSearchValue","filterRefs","_useState9","_useState10","setDialogRefs","_useState11","_useState12","prevVisibleInFilterBarProps","prevSearchInputPropsValueRef","showFilterBarText","SHOW_FILTER_BAR","hideFilterBarText","HIDE_FILTER_BAR","filtersText","toArray","prev","hasOwnProperty","filterAreaClasses","StyleClassHelper","of","put","handleToggle","newRefs","updatedToggledFilters","elements","toggledElements","handleDialogOpen","passThroughProps","usePassThroughHtmlProps","safeChildren","prevChildren","childProps","inFB","_prevChildren$current","_child$props$children2","_prevChildren$current2","_prevChildren$current3","_child$props$children3","_child$props$children4","_prevChildren$current4","_prevChildren$current5","_child$props$children5","_child$props$children6","_prevChildren$current6","_prevChildren$current7","_child$props$children7","_child$props$children8","_child$props$children9","_prevChildren$current8","_prevChildren$current9","_prevChildren$current10","dialogItemRef","join","_child$key","rest","_objectWithoutProperties","_toPropertyKey","newVal","source","handleFBRestore","cssClasses","_search$props","prevSearchInputPropsValue","_search$props3","_search$props4","Fragment","_extends","toString","BusyIndicator","active","size","BusyIndicatorSize","Large","Toolbar","toolbarStyle","ToolbarStyle","Clear","ToolbarSeparator","ToolbarSpacer","parseInt","valueOf","defaultProps"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/components/FilterBar/FilterBar.jss.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/internal/stopPropagation.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/components/FilterBar/FilterBarDialog.jss.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/components/FilterBar/utils.tsx","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/components/FilterBar/FilterDialog.tsx","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/components/FilterBar/index.tsx"],"sourcesContent":["import { ThemingParameters } from '@ui5/webcomponents-react-base/lib/ThemingParameters';\n\nconst styles = {\n  outerContainer: {\n    paddingTop: '0.5rem',\n    paddingLeft: '2rem',\n    paddingRight: '2rem',\n    paddingBottom: '1px',\n    background: ThemingParameters.sapObjectHeader_Background,\n    boxShadow: ThemingParameters.sapContent_HeaderShadow\n  },\n  filterItemExpand: {\n    '--_ui5_input_width': '100%'\n  },\n  filterBarHeader: {\n    alignItems: 'center',\n    display: 'flex',\n    background: ThemingParameters.sapObjectHeader_Background,\n    minHeight: '3rem',\n    paddingBottom: '0.5rem',\n    boxShadow: 'none',\n    flexWrap: 'wrap'\n  },\n  filterArea: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    paddingTop: '1rem',\n    paddingBottom: '1rem',\n    background: ThemingParameters.sapObjectHeader_Background,\n    transition: 'max-height 0.2s ease-out, opacity 0.2s ease-in'\n  },\n  filterAreaClosed: {\n    maxHeight: '0',\n    opacity: 0,\n    padding: 0,\n    overflowY: 'auto'\n  },\n  filterAreaOpen: {\n    maxHeight: '500px',\n    opacity: 1,\n    overflowY: 'auto'\n  },\n  headerRowRight: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flexGrow: 1,\n    '& ui5-button': {\n      marginLeft: '0.5rem'\n    }\n  },\n  showFiltersBtn: { minWidth: '108px' },\n  loadingContainer: {\n    marginBottom: '0.5rem',\n    display: 'flex',\n    width: '100%',\n    justifyContent: 'center'\n  }\n};\n\nexport default styles;\n","export const stopPropagation = (e) => {\n  e.stopPropagation();\n  e.stopImmediatePropagation();\n};\n","import { CssSizeVariables } from '@ui5/webcomponents-react-base/lib/CssSizeVariables';\nimport { sapUiContentPadding } from '@ui5/webcomponents-react-base/lib/spacing';\n\nconst styles = {\n  dialog: {\n    ...sapUiContentPadding,\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '960px',\n    width: '80vw',\n    maxHeight: '70vh',\n    '--_ui5_input_width': '100%'\n  },\n  header: {\n    width: '100%',\n    padding: '0.25rem 1rem 0 1rem',\n    '& *': {\n      margin: '0.25rem 0 0.25rem 0'\n    },\n    '& ui5-input': {\n      width: '100%'\n    }\n  },\n  footer: {\n    '& :not(:last-child)': {\n      marginRight: '0.25rem'\n    }\n  },\n  groupContainer: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  groupTitle: {\n    maxWidth: '85%',\n    marginRight: '0.5rem'\n  },\n  filters: {\n    padding: '1rem 0 2rem 0'\n  },\n  singleFilter: {\n    display: 'grid',\n    gridTemplateColumns: `auto minmax(${CssSizeVariables.sapWcrCheckBoxWidthHeight},7%)`,\n    gridTemplateRows: 'auto',\n    gridColumnGap: '0.5rem',\n    '@media(max-width:700px)': {\n      marginTop: '0.5rem'\n    },\n    '& ui5-checkbox': {\n      placeSelf: 'center start',\n      '@media(max-width:700px)': {\n        marginTop: '0.8rem',\n        paddingLeft: 0,\n        placeSelf: 'end start'\n      }\n    }\n  },\n\n  fbSearch: {\n    '@media(min-width:700px)': {\n      display: 'grid',\n      gridTemplateColumns: '20% auto 7%',\n      gridTemplateRows: 'auto',\n      gridRowGap: '0.5rem',\n      gridColumnGap: '0.5rem'\n    },\n    paddingBottom: '2rem',\n    width: '100%',\n    '& ui5-input': {\n      width: '100%'\n    }\n  }\n};\n\nexport default styles;\n","import { cloneElement } from 'react';\n\nexport const filterValue = (ref, child) => {\n  const tagName = ref.tagName;\n  let filterItemProps = {};\n  if (\n    tagName === 'UI5-INPUT' ||\n    tagName === 'UI5-DATE-PICKER' ||\n    tagName === 'UI5-DATETIME-PICKER' ||\n    tagName === 'UI5-DATERANGE-PICKER' ||\n    tagName === 'UI5-TIME-PICKER' ||\n    tagName === 'UI5-DURATION-PICKER'\n  ) {\n    filterItemProps = { value: ref.value };\n  }\n  if (tagName === 'UI5-COMBOBOX') {\n    filterItemProps = { value: ref.value, filterValue: ref.filterValue };\n  }\n  if (tagName === 'UI5-SELECT' || tagName === 'UI5-MULTI-COMBOBOX') {\n    const selectedIndices = Array.from(ref.children as HTMLCollectionOf<any>)\n      .map((item, index) => (item.selected ? index : false))\n      .filter((el) => el !== false);\n    const selectedIndicesSet = new Set(selectedIndices);\n    const options = child.props.children.props.children?.map((item, index) => {\n      if (selectedIndicesSet.has(index)) {\n        return cloneElement(item, { selected: true });\n      }\n      return cloneElement(item, { selected: false });\n    });\n    filterItemProps = { children: options };\n  }\n  if (tagName === 'UI5-SWITCH' || tagName === 'UI5-CHECKBOX') {\n    filterItemProps = { checked: ref.checked };\n  }\n  return filterItemProps;\n};\n\nexport const renderSearchWithValue = (renderSearchElement, searchValue) => {\n  return cloneElement(renderSearchElement, { value: searchValue ?? renderSearchElement?.props?.value });\n};\n","import '@ui5/webcomponents-icons/dist/search';\nimport { createUseStyles } from 'react-jss';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport {\n  BASIC,\n  CANCEL,\n  CLEAR,\n  FILTERS,\n  GO,\n  RESTORE,\n  SAVE,\n  SEARCH_FOR_FILTERS,\n  SHOW_ON_FILTER_BAR\n} from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { Bar } from '@ui5/webcomponents-react/lib/Bar';\nimport { BarDesign } from '@ui5/webcomponents-react/lib/BarDesign';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/lib/ButtonDesign';\nimport { CheckBox } from '@ui5/webcomponents-react/lib/CheckBox';\nimport { Dialog } from '@ui5/webcomponents-react/lib/Dialog';\nimport { FlexBox } from '@ui5/webcomponents-react/lib/FlexBox';\nimport { FlexBoxAlignItems } from '@ui5/webcomponents-react/lib/FlexBoxAlignItems';\nimport { FlexBoxDirection } from '@ui5/webcomponents-react/lib/FlexBoxDirection';\nimport { FlexBoxJustifyContent } from '@ui5/webcomponents-react/lib/FlexBoxJustifyContent';\nimport { Icon } from '@ui5/webcomponents-react/lib/Icon';\nimport { Input } from '@ui5/webcomponents-react/lib/Input';\nimport { Text } from '@ui5/webcomponents-react/lib/Text';\nimport { Title } from '@ui5/webcomponents-react/lib/Title';\nimport { TitleLevel } from '@ui5/webcomponents-react/lib/TitleLevel';\nimport React, { Children, cloneElement, ReactElement, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Ui5DialogDomRef } from '../../interfaces/Ui5DialogDomRef';\nimport { stopPropagation } from '../../internal/stopPropagation';\nimport styles from './FilterBarDialog.jss';\nimport { filterValue, renderSearchWithValue } from './utils';\nimport { createPortal } from 'react-dom';\n\nconst useStyles = createUseStyles(styles, { name: 'FilterBarDialog' });\nexport const FilterDialog = (props) => {\n  const {\n    filterBarRefs,\n    open,\n    handleDialogClose,\n    children,\n    showClearButton,\n    showRestoreButton,\n    showGoButton,\n    showSearch,\n    renderFBSearch,\n    handleClearFilters,\n    handleRestoreFilters,\n    handleDialogSave,\n    searchValue,\n    handleSearchValueChange,\n    onGo,\n    handleSelectionChange,\n    handleDialogSearch,\n    handleDialogCancel\n  } = props;\n  const classes = useStyles();\n  const [searchString, setSearchString] = useState('');\n  const searchRef = useRef(null);\n  const [toggledFilters, setToggledFilters] = useState({});\n  const dialogRefs = useRef({});\n  const dialogRef = useRef<Ui5DialogDomRef>();\n\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n\n  const basicText = i18nBundle.getText(BASIC);\n  const cancelText = i18nBundle.getText(CANCEL);\n  const clearText = i18nBundle.getText(CLEAR);\n  const restoreText = i18nBundle.getText(RESTORE);\n  const saveText = i18nBundle.getText(SAVE);\n  const searchForFiltersText = i18nBundle.getText(SEARCH_FOR_FILTERS);\n  const showOnFilterBarText = i18nBundle.getText(SHOW_ON_FILTER_BAR);\n  const filtersTitle = i18nBundle.getText(FILTERS);\n  const goText = i18nBundle.getText(GO);\n\n  useEffect(() => {\n    if (open) {\n      dialogRef.current.open();\n    }\n  }, [open]);\n\n  const handleSearch = useCallback(\n    (e) => {\n      if (handleDialogSearch) {\n        handleDialogSearch(enrichEventWithDetails(e, { value: e.target.value }));\n      }\n      setSearchString(e.target.value);\n    },\n    [setSearchString, handleDialogSearch]\n  );\n  const handleSave = useCallback(\n    (e) => {\n      if (renderFBSearch) {\n        handleSearchValueChange(searchRef.current?.children[1].value);\n      }\n      handleDialogSave(e, dialogRefs.current, toggledFilters);\n    },\n    [renderFBSearch, handleSearchValueChange, searchRef, handleDialogSave, toggledFilters, dialogRefs]\n  );\n\n  const handleClose = useCallback(\n    (e) => {\n      stopPropagation(e);\n      if (!showGoButton) {\n        handleSave(e);\n        return;\n      }\n      handleDialogClose(e);\n    },\n    [showGoButton, handleSave, handleDialogClose]\n  );\n\n  const handleDialogGo = useCallback(\n    (e) => {\n      if (onGo) {\n        onGo(enrichEventWithDetails(e));\n      }\n      handleDialogClose(e);\n    },\n    [onGo, handleDialogClose]\n  );\n\n  const handleRestore = useCallback(\n    (e) => {\n      handleRestoreFilters(e, 'dialog');\n    },\n    [handleRestoreFilters]\n  );\n\n  const handleCancel = useCallback(\n    (e) => {\n      if (handleDialogCancel) {\n        handleDialogCancel(enrichEventWithDetails(e));\n      }\n      handleDialogClose(e);\n    },\n    [handleDialogCancel]\n  );\n\n  const footerContentRight = useMemo(\n    () => (\n      <FlexBox justifyContent={FlexBoxJustifyContent.End} className={classes.footer}>\n        {showGoButton && (\n          <Button onClick={handleDialogGo} design={ButtonDesign.Emphasized} title={goText}>\n            {goText}\n          </Button>\n        )}\n        {showClearButton && <Button onClick={handleClearFilters}>{clearText}</Button>}\n        {showRestoreButton && <Button onClick={handleRestore}>{restoreText}</Button>}\n        <Button onClick={handleSave}>{saveText}</Button>\n        <Button design={ButtonDesign.Transparent} onClick={handleCancel}>\n          {cancelText}\n        </Button>\n      </FlexBox>\n    ),\n    [\n      goText,\n      showGoButton,\n      classes.footer,\n      handleDialogGo,\n      showClearButton,\n      handleClearFilters,\n      showRestoreButton,\n      handleRestore,\n      handleSave,\n      handleCancel\n    ]\n  );\n\n  const renderFooter = useCallback(() => {\n    return <Bar design={BarDesign.Footer} endContent={footerContentRight} />;\n  }, [footerContentRight]);\n\n  const renderHeader = useCallback(\n    () => (\n      <FlexBox direction={FlexBoxDirection.Column} alignItems={FlexBoxAlignItems.Center} className={classes.header}>\n        <Title level={TitleLevel.H4} tooltip={filtersTitle}>\n          {filtersTitle}\n        </Title>\n        {showSearch && (\n          <Input placeholder={searchForFiltersText} onInput={handleSearch} icon={<Icon name=\"search\" />} />\n        )}\n      </FlexBox>\n    ),\n    [classes.header, showSearch, handleSearch, filtersTitle]\n  );\n\n  const renderChildren = useCallback(() => {\n    return children\n      .filter((item) => {\n        return (\n          !!item?.props &&\n          item.props?.visible &&\n          (item.props?.label?.toLowerCase().includes(searchString.toLowerCase()) || searchString.length === 0)\n        );\n      })\n      .map((child) => {\n        const filterBarItemRef = filterBarRefs.current[child.key];\n        let filterItemProps = {};\n        if (filterBarItemRef) {\n          filterItemProps = filterValue(filterBarItemRef, child);\n        }\n        if (!child.props.children) return child;\n        return cloneElement(child as ReactElement<any>, {\n          children: {\n            ...child.props.children,\n            props: {\n              ...child.props.children.props,\n              ...filterItemProps\n            },\n            ref: (node) => {\n              dialogRefs.current[child.key] = node;\n            }\n          }\n        });\n      });\n  }, [children, searchString, filterBarRefs]);\n\n  const handleCheckBoxChange = useCallback(\n    (element) => (e) => {\n      if (handleSelectionChange) {\n        handleSelectionChange(enrichEventWithDetails(e, { element, checked: e.target.checked }));\n      }\n      setToggledFilters((old) => ({ ...old, [element.key]: e.target.checked }));\n    },\n    [setToggledFilters, handleSelectionChange]\n  );\n  const renderGroups = useCallback(() => {\n    let groups = {};\n    Children.forEach(renderChildren(), (child) => {\n      const childGroups = child.props.groupName ?? 'default';\n      if (groups[childGroups]) {\n        groups[childGroups].push(child);\n      } else {\n        groups[childGroups] = [child];\n      }\n    });\n    return Object.keys(groups)\n      .sort((x, y) => (x === 'default' ? -1 : y === 'role' ? 1 : 0))\n      .map((item, index) => {\n        const filters = groups[item].map((el) => {\n          return (\n            <div className={classes.singleFilter} key={`${el.key}-container`}>\n              {el}\n              <CheckBox\n                role=\"checkbox\"\n                checked={el.props.visibleInFilterBar || el.props.required || el.type.displayName !== 'FilterGroupItem'}\n                onChange={handleCheckBoxChange(el)}\n                disabled={el.props.required || el.type.displayName !== 'FilterGroupItem'}\n              />\n            </div>\n          );\n        });\n        return (\n          <div className={classes.groupContainer} key={item}>\n            <FlexBox justifyContent={FlexBoxJustifyContent.SpaceBetween} alignItems={FlexBoxAlignItems.Center}>\n              <Title\n                level={TitleLevel.H5}\n                className={index === 0 ? classes.groupTitle : ''}\n                tooltip={item === 'default' ? basicText : item}\n              >\n                {item === 'default' ? basicText : item}\n              </Title>\n              {index === 0 && <Text wrapping={false}>{showOnFilterBarText}</Text>}\n            </FlexBox>\n            <div className={classes.filters}>{filters}</div>\n          </div>\n        );\n      });\n  }, [renderChildren, toggledFilters, handleCheckBoxChange]);\n\n  return createPortal(\n    <Dialog ref={dialogRef} header={renderHeader()} footer={renderFooter()} onAfterClose={handleClose}>\n      <div className={classes.dialog} role=\"dialog\">\n        {renderFBSearch && (\n          <div className={classes.fbSearch} ref={searchRef}>\n            <span />\n            {renderSearchWithValue(renderFBSearch, searchValue)}\n          </div>\n        )}\n        {renderGroups()}\n      </div>\n    </Dialog>,\n    document.body\n  );\n};\n","import { createUseStyles } from 'react-jss';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/lib/hooks';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/lib/StyleClassHelper';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/lib/usePassThroughHtmlProps';\nimport { enrichEventWithDetails } from '@ui5/webcomponents-react-base/lib/Utils';\nimport {\n  CLEAR,\n  FILTERS,\n  GO,\n  HIDE_FILTER_BAR,\n  RESTORE,\n  SHOW_FILTER_BAR\n} from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { CommonProps } from '@ui5/webcomponents-react/interfaces/CommonProps';\nimport { BusyIndicator } from '@ui5/webcomponents-react/lib/BusyIndicator';\nimport { BusyIndicatorSize } from '@ui5/webcomponents-react/lib/BusyIndicatorSize';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/lib/ButtonDesign';\nimport { InputPropTypes } from '@ui5/webcomponents-react/lib/Input';\nimport { Toolbar } from '@ui5/webcomponents-react/lib/Toolbar';\nimport { ToolbarSeparator } from '@ui5/webcomponents-react/lib/ToolbarSeparator';\nimport { ToolbarSpacer } from '@ui5/webcomponents-react/lib/ToolbarSpacer';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/lib/ToolbarStyle';\nimport React, {\n  Children,\n  cloneElement,\n  CSSProperties,\n  FC,\n  forwardRef,\n  ReactElement,\n  ReactNode,\n  ReactNodeArray,\n  RefObject,\n  useCallback,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport styles from './FilterBar.jss';\nimport { FilterDialog } from './FilterDialog';\nimport { filterValue, renderSearchWithValue } from './utils';\n\nexport interface FilterBarPropTypes extends CommonProps {\n  /**\n   * Defines the filters of the `FilterBar`.<br />\n   * __Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `FilterGroupItems` in order to preserve the intended design.\n   */\n  children: ReactNode | ReactNodeArray;\n  /**\n   * Defines the search field next to the variants of the `FilterBar`.\n   */\n  search?: ReactElement<InputPropTypes>;\n  /**\n   * Defines the variants of the `FilterBar`.<br />\n   * __Note:__ Although this prop accepts all HTML Elements, it is strongly recommended that you only use `VariantManagement` in order to preserve the intended design.\n   */\n  variants?: ReactNode;\n  /**\n   * Defines whether the button toolbar is displayed.\n   */\n  useToolbar?: boolean;\n  /**\n   * Defines whether the `FilterBar` is expanded.\n   */\n  filterBarExpanded?: boolean;\n  /**\n   * Defines the width of the `FilterGroupItems`.\n   */\n  filterContainerWidth?: CSSProperties['width'];\n  /**\n   * Defines whether the `groupName` of the `FilterGroupItems` is displayed.\n   */\n  considerGroupName?: boolean;\n  /**\n   * Defines whether the \"Clear\" button is displayed in the `FilterBar`.\n   */\n  showClearOnFB?: boolean;\n  /**\n   * Defines whether the \"Go\" button is displayed in the `FilterBar`.\n   */\n  showGoOnFB?: boolean;\n  /**\n   * Defines whether the \"Filter\" button is displayed in the `FilterBar`.<br />\n   * __Note:__ Clicking on the button will open the filter configuration dialog, where you can add/remove filters to the `FilterBar`.\n   */\n  showFilterConfiguration?: boolean;\n  /**\n   * Defines whether the \"Clear\" button is displayed in the filter configuration dialog.\n   */\n  showClearButton?: boolean;\n  /**\n   * Defines whether the \"Restore\" button is displayed in the filter configuration dialog.\n   */\n  showRestoreButton?: boolean;\n  /**\n   * Defines whether the \"Go\" button is displayed in the filter configuration dialog.\n   */\n  showGo?: boolean;\n  /**\n   * Defines the number of active filters displayed in the \"Filter\" button.<br />\n   * __Note__: If `showFilterConfiguration` is `false` this prop has no effect.\n   */\n  activeFiltersCount?: number | string;\n  /**\n   * Indicates whether a loading indicator should be shown in the `FilterBar`.\n   */\n  loading?: boolean;\n  /**\n   * Defines whether a search field for filters is displayed in the filter configuration dialog.\n   */\n  showSearchOnFiltersDialog?: boolean;\n  /**\n   * Defines whether the \"Restore\" button is displayed in the `FilterBar`.\n   */\n  showRestoreOnFB?: boolean;\n  /**\n   * The event is fired when the `FilterBar` is collapsed/expanded.\n   */\n  onToggleFilters?: (event: CustomEvent<{ visible?: boolean }>) => void;\n  /**\n   * The event is fired when the \"Save\" button of the filter configuration dialog is clicked.\n   */\n  onFiltersDialogSave?: (event: CustomEvent<{ elements?: unknown; toggledElements?: unknown }>) => void;\n  /**\n   * The event is fired when the \"Clear\" button of the filter configuration dialog is clicked.\n   */\n  onFiltersDialogClear?: (event: CustomEvent) => void;\n  /**\n   * The event is fired when the \"Cancel\" button of the filter configuration dialog is clicked.\n   */\n  onFiltersDialogCancel?: (event: CustomEvent) => void;\n  /**\n   * The event is fired when the filter configuration dialog is opened.\n   */\n  onFiltersDialogOpen?: (event: CustomEvent) => void;\n  /**\n   * The event is fired when the filter configuration dialog is closed.\n   */\n  onFiltersDialogClose?: (event: CustomEvent) => void;\n  /**\n   * The event is fired when a filter is selected/unselected in the filter configuration dialog.\n   */\n  onFiltersDialogSelectionChange?: (event: CustomEvent<{ element?: unknown; checked?: unknown }>) => void;\n  /**\n   * The event is fired on input in the filter configuration dialog search field.\n   */\n  onFiltersDialogSearch?: (event: CustomEvent<{ value?: unknown }>) => void;\n  /**\n   * The event is fired when the \"Clear\" button is clicked.\n   */\n  onClear?: (event: CustomEvent) => void;\n  /**\n   * The event is fired when the \"Go\" button is clicked.\n   */\n  onGo?: (event: CustomEvent) => void;\n  /**\n   * The event is fired when the \"Restore\" button is clicked.\n   */\n  onRestore?: (event: CustomEvent<{ source?: unknown }>) => void;\n}\n\nconst useStyles = createUseStyles(styles, { name: 'FilterBar' });\n/**\n * The `FilterBar` displays filters in a user-friendly manner to populate values for a query. It consists of a row containing the `VariantManagement`, the related buttons, and an area underneath displaying the filters. The filters are arranged in a logical row that is divided depending on the space available and the width of the filters. The area containing the filters can be hidden or shown using the \"Hide FilterBar / Show FilterBar\" button, the \"Filters\" button shows the filter dialog.\n In this dialog, the consumer has full control over the FilterBar. The filters in this dialog are displayed in one column and organized in groups. Each filter can be marked as visible in the FilterBar by selecting \"Add to FilterBar\".\n */\nconst FilterBar: FC<FilterBarPropTypes> = forwardRef((props: FilterBarPropTypes, ref: RefObject<HTMLDivElement>) => {\n  const {\n    children,\n    useToolbar,\n    loading,\n    filterBarExpanded,\n    considerGroupName,\n    filterContainerWidth,\n    activeFiltersCount,\n    showClearOnFB,\n    showGoOnFB,\n    showGo,\n    showFilterConfiguration,\n    showRestoreOnFB,\n    showClearButton,\n    showRestoreButton,\n    showSearchOnFiltersDialog,\n    style,\n    className,\n    tooltip,\n    slot,\n    search,\n    variants,\n\n    onToggleFilters,\n    onFiltersDialogOpen,\n    onFiltersDialogCancel,\n    onFiltersDialogClose,\n    onFiltersDialogSave,\n    onFiltersDialogClear,\n    onClear,\n    onFiltersDialogSelectionChange,\n    onFiltersDialogSearch,\n    onGo,\n    onRestore\n  } = props;\n  const [showFilters, setShowFilters] = useState(useToolbar ? filterBarExpanded : true);\n  const [mountFilters, setMountFilters] = useState(true);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [searchValue, setSearchValue] = useState<string>(undefined);\n  const searchRef = useRef(null);\n  const filterRefs = useRef({});\n  const [dialogRefs, setDialogRefs] = useState({});\n  const [toggledFilters, setToggledFilters] = useState({});\n  const prevVisibleInFilterBarProps = useRef({});\n  const prevSearchInputPropsValueRef = useRef<string>();\n\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n\n  const clearText = i18nBundle.getText(CLEAR);\n  const restoreText = i18nBundle.getText(RESTORE);\n  const showFilterBarText = i18nBundle.getText(SHOW_FILTER_BAR);\n  const hideFilterBarText = i18nBundle.getText(HIDE_FILTER_BAR);\n  const goText = i18nBundle.getText(GO);\n  const filtersText = i18nBundle.getText(FILTERS);\n\n  useEffect(() => {\n    Children.toArray(children).forEach((item: ReactElement<any>) => {\n      setToggledFilters((prev) => {\n        if (!item.props.hasOwnProperty('visibleInFilterBar') && prev?.[item.key] === undefined) {\n          return { ...prev, [item.key]: true };\n        }\n        if (item.props.hasOwnProperty('visibleInFilterBar')) {\n          return { ...prev, [item.key]: item.props.visibleInFilterBar };\n        }\n        return prev;\n      });\n    });\n  }, [children, setToggledFilters]);\n\n  useEffect(() => {\n    setShowFilters(useToolbar ? filterBarExpanded : true);\n  }, [setShowFilters, useToolbar, filterBarExpanded]);\n\n  const classes = useStyles();\n\n  const filterAreaClasses = StyleClassHelper.of(classes.filterArea);\n  if (showFilters) {\n    filterAreaClasses.put(classes.filterAreaOpen);\n  } else {\n    filterAreaClasses.put(classes.filterAreaClosed);\n  }\n\n  const handleToggle = useCallback(\n    (e) => {\n      if (onToggleFilters) {\n        onToggleFilters(enrichEventWithDetails(e, { visible: !showFilters }));\n      }\n      setShowFilters(!showFilters);\n    },\n    [showFilters, onToggleFilters, setShowFilters]\n  );\n\n  const handleDialogSave = useCallback(\n    (e, newRefs, updatedToggledFilters) => {\n      setDialogRefs(newRefs);\n      setToggledFilters((old) => ({ ...old, ...updatedToggledFilters }));\n      if (onFiltersDialogSave) {\n        onFiltersDialogSave(\n          enrichEventWithDetails(e, {\n            elements: newRefs,\n            toggledElements: { ...toggledFilters, ...updatedToggledFilters }\n          })\n        );\n      }\n      handleDialogClose(e);\n    },\n    [setDialogOpen, setDialogRefs, setToggledFilters, onFiltersDialogSave, toggledFilters]\n  );\n\n  const handleDialogOpen = useCallback(\n    (e) => {\n      setDialogOpen(true);\n      if (onFiltersDialogOpen) {\n        onFiltersDialogOpen(enrichEventWithDetails(e));\n      }\n    },\n    [setDialogOpen, onFiltersDialogOpen]\n  );\n\n  const handleDialogClose = useCallback(\n    (e) => {\n      if (onFiltersDialogClose) {\n        onFiltersDialogClose(enrichEventWithDetails(e));\n      }\n      setDialogOpen(false);\n    },\n    [setDialogOpen, onFiltersDialogClose]\n  );\n\n  const passThroughProps = usePassThroughHtmlProps(props, [\n    'onToggleFilters',\n    'onFiltersDialogOpen',\n    'onFiltersDialogClose',\n    'onFiltersDialogSave',\n    'onFiltersDialogClear',\n    'onClear',\n    'onFiltersDialogSelectionChange',\n    'onFiltersDialogSearch',\n    'onGo',\n    'onRestore',\n    'onFiltersDialogCancel'\n  ]);\n\n  const safeChildren = useCallback(() => {\n    if (Object.keys(toggledFilters).length > 0) {\n      return Children.toArray(children).map((child: ReactElement) => {\n        if (toggledFilters?.[child.key] !== undefined) {\n          return cloneElement(child, {\n            visibleInFilterBar: toggledFilters[child.key]\n          });\n        }\n        return child;\n      });\n    }\n    return Children.toArray(children) as unknown[];\n  }, [toggledFilters, children]);\n\n  const prevChildren = useRef({});\n\n  const renderChildren = useCallback(() => {\n    const childProps = { considerGroupName, inFB: true } as any;\n    return safeChildren()\n      .filter((item: ReactElement<any, any>) => {\n        return item?.props?.visible && item.props?.visibleInFilterBar;\n      })\n      .map((child: ReactElement<any, any>) => {\n        if (filterContainerWidth) {\n          childProps.style = { width: filterContainerWidth, ...child.props.style };\n        }\n        if (!showFilterConfiguration) {\n          return cloneElement(child as ReactElement<any>, { ...childProps });\n        }\n        prevVisibleInFilterBarProps.current[child.key] = child.props.visibleInFilterBar;\n        let filterItemProps = {};\n        if (Object.keys(dialogRefs).length > 0) {\n          const dialogItemRef = dialogRefs[child.key];\n          if (dialogItemRef) {\n            filterItemProps = filterValue(dialogItemRef, child);\n          }\n        }\n        if (!child.props.children) {\n          return cloneElement(child as ReactElement<any>, {\n            ...childProps\n          });\n        }\n        if (\n          prevChildren.current?.[child.key] &&\n          //Input\n          (child.props.children?.props?.value !== prevChildren.current?.[child.key]?.value ||\n            //Combobox\n            child.props.children?.props?.filterValue !== prevChildren.current?.[child.key]?.filterValue ||\n            //Checkbox\n            child.props.children?.props?.checked !== prevChildren.current?.[child.key]?.checked ||\n            //Selectable\n            child.props.children?.props?.children?.map((item) => item.props.selected).join(',') !==\n              prevChildren?.current?.[child.key]?.children?.map((item) => item.props.selected).join(','))\n        ) {\n          // @ts-ignore\n          const { [child.key]: omit, ...rest } = dialogRefs;\n          setDialogRefs(rest);\n        }\n        prevChildren.current[child.key] = child.props.children.props;\n\n        return cloneElement(child as ReactElement<any>, {\n          ...childProps,\n          children: {\n            ...child.props.children,\n            props: {\n              ...child.props.children.props,\n              ...filterItemProps\n            },\n            ref: (node) => {\n              filterRefs.current[child.key] = node;\n            }\n          }\n        });\n      });\n  }, [filterContainerWidth, considerGroupName, dialogRefs, safeChildren, showFilterConfiguration]);\n\n  const handleSearchValueChange = useCallback(\n    (newVal) => {\n      setSearchValue(newVal);\n    },\n    [setSearchValue]\n  );\n\n  const handleRestoreFilters = useCallback(\n    (e, source) => {\n      if (source === 'dialog' && showGo) {\n        setDialogOpen(false);\n        setDialogOpen(true);\n      } else if (source === 'filterBar' && showGoOnFB) {\n        setMountFilters(false);\n        setMountFilters(true);\n      }\n      if (onRestore) {\n        onRestore(enrichEventWithDetails(e, { source }));\n      }\n    },\n    [setDialogOpen, showGo, showGoOnFB, onRestore]\n  );\n\n  const handleFBRestore = useCallback(\n    (e) => {\n      handleRestoreFilters(e, 'filterBar');\n    },\n    [handleRestoreFilters]\n  );\n\n  const cssClasses = StyleClassHelper.of(classes.outerContainer);\n  if (className) {\n    cssClasses.put(className);\n  }\n  if (filterContainerWidth) {\n    cssClasses.put(classes.filterItemExpand);\n  }\n\n  useEffect(() => {\n    prevSearchInputPropsValueRef.current = search?.props?.value;\n  }, [search?.props?.value]);\n\n  const prevSearchInputPropsValue = prevSearchInputPropsValueRef.current;\n\n  useEffect(() => {\n    if (prevSearchInputPropsValue !== search?.props?.value) {\n      setSearchValue(search?.props?.value);\n    }\n  }, [prevSearchInputPropsValue, search?.props?.value]);\n\n  return (\n    <>\n      {dialogOpen && showFilterConfiguration && (\n        <FilterDialog\n          filterBarRefs={filterRefs}\n          open={dialogOpen}\n          handleDialogClose={handleDialogClose}\n          onGo={onGo}\n          handleRestoreFilters={handleRestoreFilters}\n          searchValue={searchRef.current?.children[0].value}\n          handleSearchValueChange={handleSearchValueChange}\n          showClearButton={showClearButton}\n          showRestoreButton={showRestoreButton}\n          showSearch={showSearchOnFiltersDialog}\n          renderFBSearch={search}\n          handleClearFilters={onFiltersDialogClear}\n          handleSelectionChange={onFiltersDialogSelectionChange}\n          handleDialogSave={handleDialogSave}\n          showGoButton={showGo}\n          handleDialogSearch={onFiltersDialogSearch}\n          handleDialogCancel={onFiltersDialogCancel}\n        >\n          {safeChildren()}\n        </FilterDialog>\n      )}\n      <div ref={ref} className={cssClasses.toString()} style={style} title={tooltip} slot={slot} {...passThroughProps}>\n        {loading ? (\n          <BusyIndicator active className={classes.loadingContainer} size={BusyIndicatorSize.Large} />\n        ) : (\n          <>\n            <Toolbar className={classes.filterBarHeader} toolbarStyle={ToolbarStyle.Clear}>\n              {variants}\n              {search && <ToolbarSeparator />}\n              {search && <div ref={searchRef}>{renderSearchWithValue(search, searchValue)}</div>}\n              {useToolbar && <ToolbarSpacer />}\n              {useToolbar && showClearOnFB && (\n                <Button onClick={onClear} design={ButtonDesign.Transparent}>\n                  {clearText}\n                </Button>\n              )}\n              {useToolbar && showRestoreOnFB && (\n                <Button onClick={handleFBRestore} design={ButtonDesign.Transparent}>\n                  {restoreText}\n                </Button>\n              )}\n              {useToolbar && (\n                <Button onClick={handleToggle} design={ButtonDesign.Transparent} className={classes.showFiltersBtn}>\n                  {showFilters ? hideFilterBarText : showFilterBarText}\n                </Button>\n              )}\n              {useToolbar && showFilterConfiguration && (\n                <Button onClick={handleDialogOpen}>\n                  {`${filtersText}${\n                    activeFiltersCount && parseInt(activeFiltersCount as string) > 0 ? ` (${activeFiltersCount})` : ''\n                  }`}\n                </Button>\n              )}\n              {useToolbar && showGoOnFB && (\n                <Button onClick={onGo} design={ButtonDesign.Emphasized}>\n                  {goText}\n                </Button>\n              )}\n            </Toolbar>\n            {mountFilters && <div className={filterAreaClasses.valueOf()}>{renderChildren()}</div>}\n          </>\n        )}\n      </div>\n    </>\n  );\n});\n\nFilterBar.defaultProps = {\n  useToolbar: true,\n  filterBarExpanded: true,\n  showClearOnFB: false,\n  showGo: false,\n  showRestoreOnFB: false,\n  showGoOnFB: false,\n  showFilterConfiguration: false,\n  showClearButton: false,\n  showRestoreButton: false,\n  showSearchOnFiltersDialog: false,\n  considerGroupName: false,\n  loading: false,\n  onToggleFilters: null,\n  onFiltersDialogOpen: null,\n  onFiltersDialogCancel: null,\n  onFiltersDialogClose: null,\n  onFiltersDialogSave: null,\n  onFiltersDialogClear: null,\n  onClear: null,\n  onFiltersDialogSelectionChange: null,\n  onFiltersDialogSearch: null,\n  onGo: null,\n  onRestore: null\n};\n\nFilterBar.displayName = 'FilterBar';\nexport { FilterBar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}