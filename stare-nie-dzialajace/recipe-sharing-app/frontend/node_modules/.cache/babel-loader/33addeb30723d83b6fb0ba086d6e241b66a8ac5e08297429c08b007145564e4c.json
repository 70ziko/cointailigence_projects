{"ast":null,"code":"import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\nconst isFocusTrap = el => {\n  return el.hasAttribute(\"data-ui5-focus-trap\");\n};\nconst getFirstFocusableElement = async container => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n  return findFocusableElement(container, true);\n};\nconst getLastFocusableElement = async container => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n  return findFocusableElement(container, false);\n};\nconst findFocusableElement = async (container, forward) => {\n  let child;\n  if (container.shadowRoot) {\n    child = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n  } else if (container.assignedNodes && container.assignedNodes()) {\n    const assignedElements = container.assignedNodes();\n    child = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n  } else {\n    child = forward ? container.firstChild : container.lastChild;\n  }\n  let focusableDescendant;\n\n  /* eslint-disable no-await-in-loop */\n\n  while (child) {\n    const originalChild = child;\n    if (child.isUI5Element) {\n      child = await child.getFocusDomRefAsync();\n    }\n    if (!child) {\n      return null;\n    }\n    if (child.nodeType === 1 && !isNodeHidden(child) && !isFocusTrap(child)) {\n      if (isNodeClickable(child)) {\n        return child && typeof child.focus === \"function\" ? child : null;\n      }\n      focusableDescendant = await findFocusableElement(child, forward);\n      if (focusableDescendant) {\n        return focusableDescendant && typeof focusableDescendant.focus === \"function\" ? focusableDescendant : null;\n      }\n    }\n    child = forward ? originalChild.nextSibling : originalChild.previousSibling;\n  }\n\n  /* eslint-enable no-await-in-loop */\n\n  return null;\n};\nexport { getFirstFocusableElement, getLastFocusableElement };","map":{"version":3,"names":["isNodeHidden","isNodeClickable","isFocusTrap","el","hasAttribute","getFirstFocusableElement","container","findFocusableElement","getLastFocusableElement","forward","child","shadowRoot","firstChild","lastChild","assignedNodes","assignedElements","length","focusableDescendant","originalChild","isUI5Element","getFocusDomRefAsync","nodeType","focus","nextSibling","previousSibling"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-base/dist/util/FocusableElements.js"],"sourcesContent":["import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst isFocusTrap = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-trap\");\n};\n\nconst getFirstFocusableElement = async container => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, true);\n};\n\nconst getLastFocusableElement = async container => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, false);\n};\n\nconst findFocusableElement = async (container, forward) => {\n\tlet child;\n\n\tif (container.shadowRoot) {\n\t\tchild = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n\t} else if (container.assignedNodes && container.assignedNodes()) {\n\t\tconst assignedElements = container.assignedNodes();\n\t\tchild = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n\t} else {\n\t\tchild = forward ? container.firstChild : container.lastChild;\n\t}\n\n\tlet focusableDescendant;\n\n\t/* eslint-disable no-await-in-loop */\n\n\twhile (child) {\n\t\tconst originalChild = child;\n\n\t\tif (child.isUI5Element) {\n\t\t\tchild = await child.getFocusDomRefAsync();\n\t\t}\n\n\t\tif (!child) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (child.nodeType === 1 && !isNodeHidden(child) && !isFocusTrap(child)) {\n\t\t\tif (isNodeClickable(child)) {\n\t\t\t\treturn (child && typeof child.focus === \"function\") ? child : null;\n\t\t\t}\n\n\t\t\tfocusableDescendant = await findFocusableElement(child, forward);\n\t\t\tif (focusableDescendant) {\n\t\t\t\treturn (focusableDescendant && typeof focusableDescendant.focus === \"function\") ? focusableDescendant : null;\n\t\t\t}\n\t\t}\n\n\t\tchild = forward ? originalChild.nextSibling : originalChild.previousSibling;\n\t}\n\n\t/* eslint-enable no-await-in-loop */\n\n\treturn null;\n};\n\nexport {\n\tgetFirstFocusableElement,\n\tgetLastFocusableElement,\n};\n"],"mappings":"AAAA,OAAOA,YAAY,MAAM,mBAAmB;AAC5C,OAAOC,eAAe,MAAM,sBAAsB;AAElD,MAAMC,WAAW,GAAGC,EAAE,IAAI;EACzB,OAAOA,EAAE,CAACC,YAAY,CAAC,qBAAqB,CAAC;AAC9C,CAAC;AAED,MAAMC,wBAAwB,GAAG,MAAMC,SAAS,IAAI;EACnD,IAAI,CAACA,SAAS,IAAIN,YAAY,CAACM,SAAS,CAAC,EAAE;IAC1C,OAAO,IAAI;EACZ;EAEA,OAAOC,oBAAoB,CAACD,SAAS,EAAE,IAAI,CAAC;AAC7C,CAAC;AAED,MAAME,uBAAuB,GAAG,MAAMF,SAAS,IAAI;EAClD,IAAI,CAACA,SAAS,IAAIN,YAAY,CAACM,SAAS,CAAC,EAAE;IAC1C,OAAO,IAAI;EACZ;EAEA,OAAOC,oBAAoB,CAACD,SAAS,EAAE,KAAK,CAAC;AAC9C,CAAC;AAED,MAAMC,oBAAoB,GAAG,MAAAA,CAAOD,SAAS,EAAEG,OAAO,KAAK;EAC1D,IAAIC,KAAK;EAET,IAAIJ,SAAS,CAACK,UAAU,EAAE;IACzBD,KAAK,GAAGD,OAAO,GAAGH,SAAS,CAACK,UAAU,CAACC,UAAU,GAAGN,SAAS,CAACK,UAAU,CAACE,SAAS;EACnF,CAAC,MAAM,IAAIP,SAAS,CAACQ,aAAa,IAAIR,SAAS,CAACQ,aAAa,CAAC,CAAC,EAAE;IAChE,MAAMC,gBAAgB,GAAGT,SAAS,CAACQ,aAAa,CAAC,CAAC;IAClDJ,KAAK,GAAGD,OAAO,GAAGM,gBAAgB,CAAC,CAAC,CAAC,GAAGA,gBAAgB,CAACA,gBAAgB,CAACC,MAAM,GAAG,CAAC,CAAC;EACtF,CAAC,MAAM;IACNN,KAAK,GAAGD,OAAO,GAAGH,SAAS,CAACM,UAAU,GAAGN,SAAS,CAACO,SAAS;EAC7D;EAEA,IAAII,mBAAmB;;EAEvB;;EAEA,OAAOP,KAAK,EAAE;IACb,MAAMQ,aAAa,GAAGR,KAAK;IAE3B,IAAIA,KAAK,CAACS,YAAY,EAAE;MACvBT,KAAK,GAAG,MAAMA,KAAK,CAACU,mBAAmB,CAAC,CAAC;IAC1C;IAEA,IAAI,CAACV,KAAK,EAAE;MACX,OAAO,IAAI;IACZ;IAEA,IAAIA,KAAK,CAACW,QAAQ,KAAK,CAAC,IAAI,CAACrB,YAAY,CAACU,KAAK,CAAC,IAAI,CAACR,WAAW,CAACQ,KAAK,CAAC,EAAE;MACxE,IAAIT,eAAe,CAACS,KAAK,CAAC,EAAE;QAC3B,OAAQA,KAAK,IAAI,OAAOA,KAAK,CAACY,KAAK,KAAK,UAAU,GAAIZ,KAAK,GAAG,IAAI;MACnE;MAEAO,mBAAmB,GAAG,MAAMV,oBAAoB,CAACG,KAAK,EAAED,OAAO,CAAC;MAChE,IAAIQ,mBAAmB,EAAE;QACxB,OAAQA,mBAAmB,IAAI,OAAOA,mBAAmB,CAACK,KAAK,KAAK,UAAU,GAAIL,mBAAmB,GAAG,IAAI;MAC7G;IACD;IAEAP,KAAK,GAAGD,OAAO,GAAGS,aAAa,CAACK,WAAW,GAAGL,aAAa,CAACM,eAAe;EAC5E;;EAEA;;EAEA,OAAO,IAAI;AACZ,CAAC;AAED,SACCnB,wBAAwB,EACxBG,uBAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}