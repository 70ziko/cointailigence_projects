{"ast":null,"code":"import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isShow, isDown, isBackSpace, isSpace, isLeft, isRight } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport { isIE, isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/multiselect-all.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport * as Filters from \"./ComboBoxFilters.js\";\nimport Button from \"./Button.js\";\nimport { VALUE_STATE_SUCCESS, VALUE_STATE_ERROR, VALUE_STATE_WARNING, TOKENIZER_ARIA_CONTAIN_TOKEN, TOKENIZER_ARIA_CONTAIN_ONE_TOKEN, TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, INPUT_SUGGESTIONS_TITLE, ICON_ACCESSIBLE_NAME, MULTICOMBOBOX_DIALOG_OK_BUTTON } from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n  tag: \"ui5-multi-combobox\",\n  languageAware: true,\n  managedSlots: true,\n  slots: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */{\n    /**\n     * Defines the <code>ui5-multi-combobox</code> items.\n     * <br><br>\n     * Example: <br>\n     * &lt;ui5-multi-combobox><br>\n     * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #1&lt;/ui5-li><br>\n     * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #2&lt;/ui5-li><br>\n     * &lt;/ui5-multi-combobox>\n     * <br> <br>\n     *\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    \"default\": {\n      propertyName: \"items\",\n      type: HTMLElement,\n      invalidateOnChildChange: true\n    },\n    /**\n    * Defines the icon to be displayed in the <code>ui5-multi-combobox</code>.\n    *\n    * @type {HTMLElement[]}\n    * @slot\n    * @public\n    * @since 1.0.0-rc.9\n    */\n    icon: {\n      type: HTMLElement\n    },\n    /**\n     * Defines the value state message that will be displayed as pop up under the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     *\n     * <b>Note:</b> If not specified, a default text (in the respective language) will be displayed.\n     * <br>\n     * <b>Note:</b> The <code>valueStateMessage</code> would be displayed,\n     * when the <code>ui5-multi-combobox</code> is in <code>Information</code>, <code>Warning</code> or <code>Error</code> value state.\n     * @type {HTMLElement[]}\n     * @since 1.0.0-rc.9\n     * @slot\n     * @public\n     */\n    valueStateMessage: {\n      type: HTMLElement\n    }\n  },\n  properties: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */{\n    /**\n     * Defines the value of the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     * <b>Note:</b> The property is updated upon typing.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    value: {\n      type: String,\n      defaultValue: \"\"\n    },\n    /**\n     * Defines a short hint intended to aid the user with data entry when the\n     * <code>ui5-multi-combobox</code> has no value.\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    placeholder: {\n      type: String,\n      defaultValue: \"\"\n    },\n    /**\n     * Defines if the user input will be prevented, if no matching item has been found\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    allowCustomValues: {\n      type: Boolean\n    },\n    /**\n     * Defines whether <code>ui5-multi-combobox</code> is in disabled state.\n     * <br><br>\n     * <b>Note:</b> A disabled <code>ui5-multi-combobox</code> is completely noninteractive.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    disabled: {\n      type: Boolean\n    },\n    /**\n     * Defines the value state of the <code>ui5-multi-combobox</code>.\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>None</code></li>\n     * <li><code>Error</code></li>\n     * <li><code>Warning</code></li>\n     * <li><code>Success</code></li>\n     * <li><code>Information</code></li>\n     * </ul>\n     *\n     * @type {ValueState}\n     * @defaultvalue \"None\"\n     * @public\n     */\n    valueState: {\n      type: ValueState,\n      defaultValue: ValueState.None\n    },\n    /**\n     * Defines whether the <code>ui5-multi-combobox</code> is read-only.\n     * <br><br>\n     * <b>Note:</b> A read-only <code>ui5-multi-combobox</code> is not editable,\n     * but still provides visual feedback upon user interaction.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    readonly: {\n      type: Boolean\n    },\n    /**\n     * Defines whether the <code>ui5-multi-combobox</code> is required.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.5\n     */\n    required: {\n      type: Boolean\n    },\n    /**\n     * Defines the filter type of the <code>ui5-multi-combobox</code>.\n     * Available options are: <code>StartsWithPerTerm</code>, <code>StartsWith</code>, <code>Contains</code> and <code>None</code>.\n     *\n     * @type {string}\n     * @defaultvalue \"StartsWithPerTerm\"\n     * @public\n     */\n    filter: {\n      type: String,\n      defaultValue: \"StartsWithPerTerm\"\n    },\n    /**\n     * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    open: {\n      type: Boolean\n    },\n    _filteredItems: {\n      type: Object\n    },\n    filterSelected: {\n      type: Boolean\n    },\n    focused: {\n      type: Boolean\n    },\n    _tokenizerFocused: {\n      type: Boolean\n    },\n    _iconPressed: {\n      type: Boolean,\n      noAttribute: true\n    },\n    _inputWidth: {\n      type: Integer,\n      noAttribute: true\n    },\n    _listWidth: {\n      type: Integer,\n      defaultValue: 0,\n      noAttribute: true\n    }\n  },\n  events: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */{\n    /**\n     * Fired when the input operation has finished by pressing Enter or on focusout.\n     *\n     * @event\n     * @public\n     */\n    change: {},\n    /**\n     * Fired when the value of the <code>ui5-multi-combobox</code> changes at each keystroke.\n     *\n     * @event\n     * @public\n     */\n    input: {},\n    /**\n     * Fired when the dropdown is opened or closed.\n     *\n     * @event sap.ui.webcomponents.main.MultiComboBox#open-change\n     * @since 1.0.0-rc.5\n     * @public\n     */\n    \"open-change\": {},\n    /**\n     * Fired when selection is changed by user interaction\n     * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n     *\n     * @event sap.ui.webcomponents.main.MultiComboBox#selection-change\n     * @param {Array} items an array of the selected items.\n     * @public\n     */\n    \"selection-change\": {\n      detail: {\n        items: {\n          type: Array\n        }\n      }\n    }\n  }\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component provides a list box with items and a text field allowing the user to either type a value directly into the control, or choose from the list of existing items.\n *\n * It is a drop-down list for selecting and filtering values, commonly used to enable users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow of available options.\n * The select options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * In the context of <code>ui5-multi-combobox</code>, you can provide a custom stable DOM ref for:\n * <ul>\n * <li>Every <code>ui5-mcb-item</code> that you provide.\n * Example: <code><ui5-mcb-item stable-dom-ref=\"item1\"></ui5-mcb-item></code></li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem\n * @since 0.11.0\n */\nclass MultiComboBox extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n  static get render() {\n    return litRender;\n  }\n  static get template() {\n    return MultiComboBoxTemplate;\n  }\n  static get staticAreaTemplate() {\n    return MultiComboBoxPopoverTemplate;\n  }\n  static get styles() {\n    return styles;\n  }\n  static get staticAreaStyles() {\n    return [ResponsivePopoverCommonCss, ValueStateMessageCss];\n  }\n  static get dependencies() {\n    return [MultiComboBoxItem, Tokenizer, Token, Icon, ResponsivePopover, List, StandardListItem, ToggleButton, Button];\n  }\n  constructor() {\n    super();\n    this._filteredItems = [];\n    this._inputLastValue = \"\";\n    this._deleting = false;\n    this._validationTimeout = null;\n    this.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n    this._handleResizeBound = this._handleResize.bind(this);\n  }\n  onEnterDOM() {\n    ResizeHandler.register(this, this._handleResizeBound);\n  }\n  onExitDOM() {\n    ResizeHandler.deregister(this, this._handleResizeBound);\n  }\n  _handleResize() {\n    this._inputWidth = this.offsetWidth;\n  }\n  _inputChange() {\n    this.fireEvent(\"change\");\n  }\n  _showMorePopover() {\n    this.filterSelected = true;\n    this._toggleRespPopover();\n  }\n  togglePopover() {\n    this._toggleRespPopover();\n    if (!isPhone()) {\n      this._inputDom.focus();\n    }\n  }\n  filterSelectedItems(event) {\n    if (this.allItemsSelected) {\n      this.filterSelected = true;\n      return;\n    }\n    this.filterSelected = event.target.pressed;\n  }\n  get _showAllItemsButtonPressed() {\n    return this.filterSelected || this.allItemsSelected;\n  }\n  get allItemsSelected() {\n    return this.items.length === this.selectedValues.length;\n  }\n  get _inputDom() {\n    return this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n  }\n  _inputLiveChange(event) {\n    const input = event.target;\n    const value = input.value;\n    const filteredItems = this._filterItems(value);\n    const oldValueState = this.valueState;\n\n    /* skip calling change event when an input with a placeholder is focused on IE\n    \t- value of the host and the internal input should be differnt in case of actual input\n    \t- input is called when a key is pressed => keyup should not be called yet\n    */\n    const skipFiring = this._inputDom.value === this.value && isIE && !this._keyDown && !!this.placeholder;\n    if (skipFiring) {\n      event.preventDefault();\n      return;\n    }\n    if (this._validationTimeout) {\n      input.value = this._inputLastValue;\n      return;\n    }\n    if (!filteredItems.length && value && !this.allowCustomValues) {\n      input.value = this._inputLastValue;\n      this.valueState = \"Error\";\n      this._validationTimeout = setTimeout(() => {\n        this.valueState = oldValueState;\n        this._validationTimeout = null;\n      }, 2000);\n      return;\n    }\n    this._inputLastValue = input.value;\n    this.value = input.value;\n    this._filteredItems = filteredItems;\n    if (!isPhone()) {\n      if (filteredItems.length === 0) {\n        this.allItemsPopover.close();\n      } else {\n        this.allItemsPopover.open(this);\n      }\n    }\n    this.fireEvent(\"input\");\n  }\n  _tokenDelete(event) {\n    const token = event.detail.ref;\n    const deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n    deletingItem.selected = false;\n    this._deleting = true;\n    this.fireSelectionChange();\n  }\n  _handleLeft() {\n    const cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n    if (cursorPosition === 0) {\n      this._focusLastToken();\n    }\n  }\n  _focusLastToken() {\n    const lastTokenIndex = this._tokenizer.tokens.length - 1;\n    if (lastTokenIndex < 0) {\n      return;\n    }\n    this._tokenizer.tokens[lastTokenIndex].focus();\n    this._tokenizer._itemNav.currentIndex = lastTokenIndex;\n  }\n  _tokenizerFocusOut(event) {\n    this._tokenizerFocused = false;\n    const tokenizer = this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n    const tokensCount = tokenizer.tokens.length - 1;\n    if (!event.relatedTarget || event.relatedTarget.localName !== \"ui5-token\") {\n      this._tokenizer.tokens.forEach(token => {\n        token.selected = false;\n      });\n      this._tokenizer.scrollToStart();\n    }\n    if (tokensCount === 0 && this._deleting) {\n      setTimeout(() => {\n        if (!isPhone()) {\n          this.shadowRoot.querySelector(\"input\").focus();\n        }\n        this._deleting = false;\n      }, 0);\n    }\n  }\n  _tokenizerFocusIn() {\n    this._tokenizerFocused = true;\n    this.focused = false;\n  }\n  _onkeyup() {\n    this._keyDown = false;\n  }\n  async _onkeydown(event) {\n    if (isLeft(event)) {\n      this._handleLeft(event);\n    }\n    if (isShow(event) && !this.readonly && !this.disabled) {\n      event.preventDefault();\n      this._toggleRespPopover();\n    }\n    if (isDown(event) && this.allItemsPopover.opened && this.items.length) {\n      event.preventDefault();\n      await this._getList();\n      this.list._itemNavigation.current = 0;\n      this.list.items[0].focus();\n    }\n    if (isBackSpace(event) && event.target.value === \"\") {\n      event.preventDefault();\n      this._focusLastToken();\n    }\n    this._keyDown = true;\n  }\n  _onTokenizerKeydown(event) {\n    if (isRight(event)) {\n      const lastTokenIndex = this._tokenizer.tokens.length - 1;\n      if (this._tokenizer.tokens[lastTokenIndex] === document.activeElement.shadowRoot.activeElement) {\n        setTimeout(() => {\n          this.shadowRoot.querySelector(\"input\").focus();\n        }, 0);\n      }\n    }\n  }\n  _filterItems(str) {\n    return (Filters[this.filter] || Filters.StartsWithPerTerm)(str, this.items);\n  }\n  _toggle() {\n    this.open = !this.open;\n    this.fireEvent(\"open-change\");\n    if (!this.open) {\n      this._afterClosePopover();\n    }\n  }\n  _getSelectedItems() {\n    // Angular 2 way data binding\n    this.selectedValues = this.items.filter(item => item.selected);\n    return this.selectedValues;\n  }\n  _listSelectionChange(event) {\n    event.target.items.forEach(item => {\n      this.items.forEach(mcbItem => {\n        if (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n          mcbItem.selected = item.selected;\n        }\n      });\n    });\n    this.fireSelectionChange();\n    if (!event.detail.selectionComponentPressed && !isSpace(event.detail)) {\n      this.allItemsPopover.close();\n      this.value = \"\";\n      this.fireEvent(\"input\");\n    }\n  }\n  fireSelectionChange() {\n    this.fireEvent(\"selection-change\", {\n      items: this._getSelectedItems()\n    });\n    // Angular 2 way data binding\n    this.fireEvent(\"value-changed\");\n  }\n  async _getRespPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n  }\n  async _getList() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n  }\n  _toggleRespPopover() {\n    this.allItemsPopover.toggle(this);\n  }\n  _click(event) {\n    if (isPhone() && !this.readonly && !this._showMorePressed) {\n      this.allItemsPopover.open(this);\n    }\n    this._showMorePressed = false;\n  }\n  _afterClosePopover() {\n    // close device's keyboard and prevent further typing\n    if (isPhone()) {\n      this.blur();\n    }\n    this._iconPressed = false;\n    this.filterSelected = false;\n  }\n  onBeforeRendering() {\n    const input = this.shadowRoot.querySelector(\"input\");\n    this._inputLastValue = this.value;\n    if (input && !input.value) {\n      this._filteredItems = this.items;\n    }\n    const filteredItems = this._filterItems(this.value);\n    this._filteredItems = filteredItems;\n  }\n  async onAfterRendering() {\n    await this._getRespPopover();\n    await this._getList();\n    this.toggle(this.shouldDisplayOnlyValueStateMessage);\n    this.storeResponsivePopoverWidth();\n  }\n  get _isPhone() {\n    return isPhone();\n  }\n  _onIconMousedown() {\n    this._iconPressed = true;\n  }\n  storeResponsivePopoverWidth() {\n    if (this.open && !this._listWidth) {\n      this._listWidth = this.list.offsetWidth;\n    }\n  }\n  toggle(isToggled) {\n    if (isToggled && !this.open) {\n      this.openPopover();\n    } else {\n      this.closePopover();\n    }\n  }\n  async openPopover() {\n    const popover = await this._getPopover();\n    if (popover) {\n      popover.openBy(this);\n    }\n  }\n  async closePopover() {\n    const popover = await this._getPopover();\n    popover && popover.close();\n  }\n  async _getPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    return staticAreaItem.querySelector(\"[ui5-popover]\");\n  }\n  get _tokenizer() {\n    return this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n  }\n  get nMoreCountText() {\n    const iTokenCount = this._getSelectedItems().length;\n    if (iTokenCount === 0) {\n      return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n    }\n    if (iTokenCount === 1) {\n      return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n    }\n    return this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n  }\n  inputFocusIn() {\n    if (!isPhone()) {\n      this.focused = true;\n    }\n  }\n  inputFocusOut(event) {\n    if (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n      this.focused = false;\n    }\n  }\n  get editable() {\n    return !this.readonly;\n  }\n  get _isFocusInside() {\n    return this.focused || this._tokenizerFocused;\n  }\n  get selectedItemsListMode() {\n    return this.readonly ? \"None\" : \"MultiSelect\";\n  }\n  get _listItemsType() {\n    return this.readonly ? \"Inactive\" : \"Active\";\n  }\n  get hasValueState() {\n    return this.valueState !== ValueState.None;\n  }\n  get hasValueStateMessage() {\n    return this.hasValueState && this.valueState !== ValueState.Success;\n  }\n  get valueStateText() {\n    return this.valueStateTextMappings[this.valueState];\n  }\n  get valueStateTextId() {\n    return this.hasValueState ? `${this._id}-valueStateDesc` : undefined;\n  }\n  get valueStateMessageText() {\n    return this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n  }\n  get shouldDisplayDefaultValueStateMessage() {\n    return !this.valueStateMessage.length && this.hasValueStateMessage;\n  }\n  get shouldDisplayOnlyValueStateMessage() {\n    return this.focused && this.hasValueStateMessage && !this._iconPressed;\n  }\n  get valueStateTextMappings() {\n    return {\n      \"Success\": this.i18nBundle.getText(VALUE_STATE_SUCCESS),\n      \"Error\": this.i18nBundle.getText(VALUE_STATE_ERROR),\n      \"Warning\": this.i18nBundle.getText(VALUE_STATE_WARNING)\n    };\n  }\n  get _innerInput() {\n    if (isPhone()) {\n      if (this.allItemsPopover.opened) {\n        return this.allItemsPopover.querySelector(\"input\");\n      }\n    }\n    return this.getDomRef().querySelector(\"#ui5-multi-combobox-input\");\n  }\n  get _headerTitleText() {\n    return this.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n  }\n  get _iconAccessibleNameText() {\n    return this.i18nBundle.getText(ICON_ACCESSIBLE_NAME);\n  }\n  get _dialogOkButton() {\n    return this.i18nBundle.getText(MULTICOMBOBOX_DIALOG_OK_BUTTON);\n  }\n  get _tokenizerExpanded() {\n    return (this._isFocusInside || this.open) && !this.readonly;\n  }\n  get classes() {\n    return {\n      popoverValueState: {\n        \"ui5-valuestatemessage-root\": true,\n        \"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n        \"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n        \"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n        \"ui5-valuestatemessage--information\": this.valueState === ValueState.Information\n      }\n    };\n  }\n  get styles() {\n    return {\n      popoverValueStateMessage: {\n        \"width\": `${this._listWidth}px`,\n        \"min-height\": \"2.5rem\",\n        \"padding\": \"0.5625rem 1rem\",\n        \"display\": this._listWidth === 0 ? \"none\" : \"inline-block\"\n      },\n      popoverHeader: {\n        \"width\": `${this._inputWidth}px`\n      }\n    };\n  }\n  static async onDefine() {\n    await fetchI18nBundle(\"@ui5/webcomponents\");\n  }\n}\nMultiComboBox.define();\nexport default MultiComboBox;","map":{"version":3,"names":["UI5Element","litRender","ResizeHandler","ValueState","isShow","isDown","isBackSpace","isSpace","isLeft","isRight","Integer","isIE","isPhone","fetchI18nBundle","getI18nBundle","MultiComboBoxItem","Tokenizer","Token","Icon","ResponsivePopover","List","StandardListItem","ToggleButton","Filters","Button","VALUE_STATE_SUCCESS","VALUE_STATE_ERROR","VALUE_STATE_WARNING","TOKENIZER_ARIA_CONTAIN_TOKEN","TOKENIZER_ARIA_CONTAIN_ONE_TOKEN","TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS","INPUT_SUGGESTIONS_TITLE","ICON_ACCESSIBLE_NAME","MULTICOMBOBOX_DIALOG_OK_BUTTON","MultiComboBoxTemplate","MultiComboBoxPopoverTemplate","styles","ResponsivePopoverCommonCss","ValueStateMessageCss","metadata","tag","languageAware","managedSlots","slots","propertyName","type","HTMLElement","invalidateOnChildChange","icon","valueStateMessage","properties","value","String","defaultValue","placeholder","allowCustomValues","Boolean","disabled","valueState","None","readonly","required","filter","open","_filteredItems","Object","filterSelected","focused","_tokenizerFocused","_iconPressed","noAttribute","_inputWidth","_listWidth","events","change","input","detail","items","Array","MultiComboBox","render","template","staticAreaTemplate","staticAreaStyles","dependencies","constructor","_inputLastValue","_deleting","_validationTimeout","i18nBundle","_handleResizeBound","_handleResize","bind","onEnterDOM","register","onExitDOM","deregister","offsetWidth","_inputChange","fireEvent","_showMorePopover","_toggleRespPopover","togglePopover","_inputDom","focus","filterSelectedItems","event","allItemsSelected","target","pressed","_showAllItemsButtonPressed","length","selectedValues","shadowRoot","querySelector","_inputLiveChange","filteredItems","_filterItems","oldValueState","skipFiring","_keyDown","preventDefault","setTimeout","allItemsPopover","close","_tokenDelete","token","ref","deletingItem","find","item","_id","getAttribute","selected","fireSelectionChange","_handleLeft","cursorPosition","getDomRef","selectionStart","_focusLastToken","lastTokenIndex","_tokenizer","tokens","_itemNav","currentIndex","_tokenizerFocusOut","tokenizer","tokensCount","relatedTarget","localName","forEach","scrollToStart","_tokenizerFocusIn","_onkeyup","_onkeydown","opened","_getList","list","_itemNavigation","current","_onTokenizerKeydown","document","activeElement","str","StartsWithPerTerm","_toggle","_afterClosePopover","_getSelectedItems","_listSelectionChange","mcbItem","selectionComponentPressed","_getRespPopover","staticAreaItem","getStaticAreaItemDomRef","toggle","_click","_showMorePressed","blur","onBeforeRendering","onAfterRendering","shouldDisplayOnlyValueStateMessage","storeResponsivePopoverWidth","_isPhone","_onIconMousedown","isToggled","openPopover","closePopover","popover","_getPopover","openBy","nMoreCountText","iTokenCount","getText","inputFocusIn","inputFocusOut","contains","editable","_isFocusInside","selectedItemsListMode","_listItemsType","hasValueState","hasValueStateMessage","Success","valueStateText","valueStateTextMappings","valueStateTextId","undefined","valueStateMessageText","getSlottedNodes","map","el","cloneNode","shouldDisplayDefaultValueStateMessage","_innerInput","_headerTitleText","_iconAccessibleNameText","_dialogOkButton","_tokenizerExpanded","classes","popoverValueState","Error","Warning","Information","popoverValueStateMessage","popoverHeader","onDefine","define"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents/dist/MultiComboBox.js"],"sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport {\n\tisShow,\n\tisDown,\n\tisBackSpace,\n\tisSpace,\n\tisLeft,\n\tisRight,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport { isIE, isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/multiselect-all.js\";\nimport MultiComboBoxItem from \"./MultiComboBoxItem.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Token from \"./Token.js\";\nimport Icon from \"./Icon.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ToggleButton from \"./ToggleButton.js\";\nimport * as Filters from \"./ComboBoxFilters.js\";\nimport Button from \"./Button.js\";\n\nimport {\n\tVALUE_STATE_SUCCESS,\n\tVALUE_STATE_ERROR,\n\tVALUE_STATE_WARNING,\n\tTOKENIZER_ARIA_CONTAIN_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_ONE_TOKEN,\n\tTOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS,\n\tINPUT_SUGGESTIONS_TITLE,\n\tICON_ACCESSIBLE_NAME,\n\tMULTICOMBOBOX_DIALOG_OK_BUTTON,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport MultiComboBoxTemplate from \"./generated/templates/MultiComboBoxTemplate.lit.js\";\nimport MultiComboBoxPopoverTemplate from \"./generated/templates/MultiComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport styles from \"./generated/themes/MultiComboBox.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-multi-combobox\",\n\tlanguageAware: true,\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the <code>ui5-multi-combobox</code> items.\n\t\t * <br><br>\n\t\t * Example: <br>\n\t\t * &lt;ui5-multi-combobox><br>\n\t\t * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #1&lt;/ui5-li><br>\n\t\t * &nbsp;&nbsp;&nbsp;&nbsp;&lt;ui5-li>Item #2&lt;/ui5-li><br>\n\t\t * &lt;/ui5-multi-combobox>\n\t\t * <br> <br>\n\t\t *\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"items\",\n\t\t\ttype: HTMLElement,\n\t\t\tinvalidateOnChildChange: true,\n\t\t},\n\n\t\t/**\n\t\t* Defines the icon to be displayed in the <code>ui5-multi-combobox</code>.\n\t\t*\n\t\t* @type {HTMLElement[]}\n\t\t* @slot\n\t\t* @public\n\t\t* @since 1.0.0-rc.9\n\t\t*/\n\t   icon: {\n\t\t   type: HTMLElement,\n\t   },\n\n\t\t/**\n\t\t * Defines the value state message that will be displayed as pop up under the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t *\n\t\t * <b>Note:</b> If not specified, a default text (in the respective language) will be displayed.\n\t\t * <br>\n\t\t * <b>Note:</b> The <code>valueStateMessage</code> would be displayed,\n\t\t * when the <code>ui5-multi-combobox</code> is in <code>Information</code>, <code>Warning</code> or <code>Error</code> value state.\n\t\t * @type {HTMLElement[]}\n\t\t * @since 1.0.0-rc.9\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\tvalueStateMessage: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the value of the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t * <b>Note:</b> The property is updated upon typing.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines a short hint intended to aid the user with data entry when the\n\t\t * <code>ui5-multi-combobox</code> has no value.\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines if the user input will be prevented, if no matching item has been found\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tallowCustomValues: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether <code>ui5-multi-combobox</code> is in disabled state.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A disabled <code>ui5-multi-combobox</code> is completely noninteractive.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state of the <code>ui5-multi-combobox</code>.\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>None</code></li>\n\t\t * <li><code>Error</code></li>\n\t\t * <li><code>Warning</code></li>\n\t\t * <li><code>Success</code></li>\n\t\t * <li><code>Information</code></li>\n\t\t * </ul>\n\t\t *\n\t\t * @type {ValueState}\n\t\t * @defaultvalue \"None\"\n\t\t * @public\n\t\t */\n\t\tvalueState: {\n\t\t\ttype: ValueState,\n\t\t\tdefaultValue: ValueState.None,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the <code>ui5-multi-combobox</code> is read-only.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A read-only <code>ui5-multi-combobox</code> is not editable,\n\t\t * but still provides visual feedback upon user interaction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the <code>ui5-multi-combobox</code> is required.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.5\n\t\t */\n\t\trequired: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the filter type of the <code>ui5-multi-combobox</code>.\n\t\t * Available options are: <code>StartsWithPerTerm</code>, <code>StartsWith</code>, <code>Contains</code> and <code>None</code>.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"StartsWithPerTerm\"\n\t\t * @public\n\t\t */\n\t\tfilter: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"StartsWithPerTerm\",\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the dropdown is open. True if the dropdown is open, false otherwise.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_filteredItems: {\n\t\t\ttype: Object,\n\t\t},\n\n\n\t\tfilterSelected: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\tfocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_tokenizerFocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_iconPressed: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_inputWidth: {\n\t\t\ttype: Integer,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_listWidth: {\n\t\t\ttype: Integer,\n\t\t\tdefaultValue: 0,\n\t\t\tnoAttribute: true,\n\t\t},\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.MultiComboBox.prototype */ {\n\t\t/**\n\t\t * Fired when the input operation has finished by pressing Enter or on focusout.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tchange: {},\n\n\t\t/**\n\t\t * Fired when the value of the <code>ui5-multi-combobox</code> changes at each keystroke.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tinput: {},\n\n\t\t/**\n\t\t * Fired when the dropdown is opened or closed.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiComboBox#open-change\n\t\t * @since 1.0.0-rc.5\n\t\t * @public\n\t\t */\n\t\t\"open-change\": {},\n\n\t\t/**\n\t\t * Fired when selection is changed by user interaction\n\t\t * in <code>SingleSelect</code> and <code>MultiSelect</code> modes.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiComboBox#selection-change\n\t\t * @param {Array} items an array of the selected items.\n\t\t * @public\n\t\t */\n\t\t\"selection-change\": {\n\t\t\tdetail: {\n\t\t\t\titems: { type: Array },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-multi-combobox</code> component provides a list box with items and a text field allowing the user to either type a value directly into the control, or choose from the list of existing items.\n *\n * It is a drop-down list for selecting and filtering values, commonly used to enable users to select one or more options from a predefined list. The control provides an editable input field to filter the list, and a dropdown arrow of available options.\n * The select options in the list have checkboxes that permit multi-selection. Entered values are displayed as tokens.\n * <h3>Structure</h3>\n * The <code>ui5-multi-combobox</code> consists of the following elements:\n * <ul>\n * <li> Tokenizer - a list of tokens with selected options.\n * <li> Input field - displays the selected option/s as token/s. Users can type to filter the list.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-multi-combobox</code> provides advanced keyboard handling.\n *\n * <h4>Picker</h4>\n * If the <code>ui5-multi-combobox</code> is focused,\n * you can open or close the drop-down by pressing <code>F4</code>, <code>ALT+UP</code> or <code>ALT+DOWN</code> keys.\n * Once the drop-down is opened, you can use the <code>UP</code> and <code>DOWN</code> arrow keys\n * to navigate through the available options and select one by pressing the <code>Space</code> or <code>Enter</code> keys.\n * <br>\n *\n * <h4>Tokens</h4>\n * <ul>\n * <li> Left/Right arrow keys - moves the focus selection form the currently focused token to the previous/next one (if available). </li>\n * <li> Delete -  deletes the token and focuses the previous token. </li>\n * <li> Backspace -  deletes the token and focus the next token. </li>\n * </ul>\n *\n * In the context of <code>ui5-multi-combobox</code>, you can provide a custom stable DOM ref for:\n * <ul>\n * <li>Every <code>ui5-mcb-item</code> that you provide.\n * Example: <code><ui5-mcb-item stable-dom-ref=\"item1\"></ui5-mcb-item></code></li>\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiComboBox\n * @extends UI5Element\n * @tagname ui5-multi-combobox\n * @public\n * @appenddocs MultiComboBoxItem\n * @since 0.11.0\n */\nclass MultiComboBox extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn MultiComboBoxTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn MultiComboBoxPopoverTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn [ResponsivePopoverCommonCss, ValueStateMessageCss];\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tMultiComboBoxItem,\n\t\t\tTokenizer,\n\t\t\tToken,\n\t\t\tIcon,\n\t\t\tResponsivePopover,\n\t\t\tList,\n\t\t\tStandardListItem,\n\t\t\tToggleButton,\n\t\t\tButton,\n\t\t];\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._filteredItems = [];\n\t\tthis._inputLastValue = \"\";\n\t\tthis._deleting = false;\n\t\tthis._validationTimeout = null;\n\t\tthis.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n\t\tthis._handleResizeBound = this._handleResize.bind(this);\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this, this._handleResizeBound);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this, this._handleResizeBound);\n\t}\n\n\t_handleResize() {\n\t\tthis._inputWidth = this.offsetWidth;\n\t}\n\n\t_inputChange() {\n\t\tthis.fireEvent(\"change\");\n\t}\n\n\t_showMorePopover() {\n\t\tthis.filterSelected = true;\n\t\tthis._toggleRespPopover();\n\t}\n\n\ttogglePopover() {\n\t\tthis._toggleRespPopover();\n\n\t\tif (!isPhone()) {\n\t\t\tthis._inputDom.focus();\n\t\t}\n\t}\n\n\tfilterSelectedItems(event) {\n\t\tif (this.allItemsSelected) {\n\t\t\tthis.filterSelected = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.filterSelected = event.target.pressed;\n\t}\n\n\tget _showAllItemsButtonPressed() {\n\t\treturn this.filterSelected || this.allItemsSelected;\n\t}\n\n\tget allItemsSelected() {\n\t\treturn this.items.length === this.selectedValues.length;\n\t}\n\n\tget _inputDom() {\n\t\treturn this.shadowRoot.querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\t_inputLiveChange(event) {\n\t\tconst input = event.target;\n\t\tconst value = input.value;\n\t\tconst filteredItems = this._filterItems(value);\n\t\tconst oldValueState = this.valueState;\n\n\t\t/* skip calling change event when an input with a placeholder is focused on IE\n\t\t\t- value of the host and the internal input should be differnt in case of actual input\n\t\t\t- input is called when a key is pressed => keyup should not be called yet\n\t\t*/\n\t\tconst skipFiring = (this._inputDom.value === this.value) && isIE && !this._keyDown && !!this.placeholder;\n\n\t\tif (skipFiring) {\n\t\t\tevent.preventDefault();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._validationTimeout) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!filteredItems.length && value && !this.allowCustomValues) {\n\t\t\tinput.value = this._inputLastValue;\n\t\t\tthis.valueState = \"Error\";\n\n\t\t\tthis._validationTimeout = setTimeout(() => {\n\t\t\t\tthis.valueState = oldValueState;\n\t\t\t\tthis._validationTimeout = null;\n\t\t\t}, 2000);\n\n\t\t\treturn;\n\t\t}\n\n\n\t\tthis._inputLastValue = input.value;\n\t\tthis.value = input.value;\n\t\tthis._filteredItems = filteredItems;\n\n\t\tif (!isPhone()) {\n\t\t\tif (filteredItems.length === 0) {\n\t\t\t\tthis.allItemsPopover.close();\n\t\t\t} else {\n\t\t\t\tthis.allItemsPopover.open(this);\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\t}\n\n\t_tokenDelete(event) {\n\t\tconst token = event.detail.ref;\n\t\tconst deletingItem = this.items.find(item => item._id === token.getAttribute(\"data-ui5-id\"));\n\n\t\tdeletingItem.selected = false;\n\t\tthis._deleting = true;\n\n\t\tthis.fireSelectionChange();\n\t}\n\n\t_handleLeft() {\n\t\tconst cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n\n\t\tif (cursorPosition === 0) {\n\t\t\tthis._focusLastToken();\n\t\t}\n\t}\n\n\t_focusLastToken() {\n\t\tconst lastTokenIndex = this._tokenizer.tokens.length - 1;\n\n\t\tif (lastTokenIndex < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tokenizer.tokens[lastTokenIndex].focus();\n\t\tthis._tokenizer._itemNav.currentIndex = lastTokenIndex;\n\t}\n\n\t_tokenizerFocusOut(event) {\n\t\tthis._tokenizerFocused = false;\n\n\t\tconst tokenizer = this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n\t\tconst tokensCount = tokenizer.tokens.length - 1;\n\n\t\tif (!event.relatedTarget || event.relatedTarget.localName !== \"ui5-token\") {\n\t\t\tthis._tokenizer.tokens.forEach(token => { token.selected = false; });\n\t\t\tthis._tokenizer.scrollToStart();\n\t\t}\n\n\t\tif (tokensCount === 0 && this._deleting) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!isPhone()) {\n\t\t\t\t\tthis.shadowRoot.querySelector(\"input\").focus();\n\t\t\t\t}\n\n\t\t\t\tthis._deleting = false;\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t_tokenizerFocusIn() {\n\t\tthis._tokenizerFocused = true;\n\t\tthis.focused = false;\n\t}\n\n\t_onkeyup() {\n\t\tthis._keyDown = false;\n\t}\n\n\tasync _onkeydown(event) {\n\t\tif (isLeft(event)) {\n\t\t\tthis._handleLeft(event);\n\t\t}\n\n\t\tif (isShow(event) && !this.readonly && !this.disabled) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._toggleRespPopover();\n\t\t}\n\n\t\tif (isDown(event) && this.allItemsPopover.opened && this.items.length) {\n\t\t\tevent.preventDefault();\n\t\t\tawait this._getList();\n\t\t\tthis.list._itemNavigation.current = 0;\n\t\t\tthis.list.items[0].focus();\n\t\t}\n\n\t\tif (isBackSpace(event) && event.target.value === \"\") {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis._focusLastToken();\n\t\t}\n\n\t\tthis._keyDown = true;\n\t}\n\n\t_onTokenizerKeydown(event) {\n\t\tif (isRight(event)) {\n\t\t\tconst lastTokenIndex = this._tokenizer.tokens.length - 1;\n\n\t\t\tif (this._tokenizer.tokens[lastTokenIndex] === document.activeElement.shadowRoot.activeElement) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.shadowRoot.querySelector(\"input\").focus();\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\t_filterItems(str) {\n\t\treturn (Filters[this.filter] || Filters.StartsWithPerTerm)(str, this.items);\n\t}\n\n\t_toggle() {\n\t\tthis.open = !this.open;\n\t\tthis.fireEvent(\"open-change\");\n\n\t\tif (!this.open) {\n\t\t\tthis._afterClosePopover();\n\t\t}\n\t}\n\n\t_getSelectedItems() {\n\t\t// Angular 2 way data binding\n\t\tthis.selectedValues = this.items.filter(item => item.selected);\n\t\treturn this.selectedValues;\n\t}\n\n\t_listSelectionChange(event) {\n\t\tevent.target.items.forEach(item => {\n\t\t\tthis.items.forEach(mcbItem => {\n\t\t\t\tif (mcbItem._id === item.getAttribute(\"data-ui5-token-id\")) {\n\t\t\t\t\tmcbItem.selected = item.selected;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.fireSelectionChange();\n\n\t\tif (!event.detail.selectionComponentPressed && !isSpace(event.detail)) {\n\t\t\tthis.allItemsPopover.close();\n\t\t\tthis.value = \"\";\n\t\t\tthis.fireEvent(\"input\");\n\t\t}\n\t}\n\n\tfireSelectionChange() {\n\t\tthis.fireEvent(\"selection-change\", { items: this._getSelectedItems() });\n\t\t// Angular 2 way data binding\n\t\tthis.fireEvent(\"value-changed\");\n\t}\n\n\tasync _getRespPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.allItemsPopover = staticAreaItem.querySelector(`.ui5-multi-combobox-all-items-responsive-popover`);\n\t}\n\n\tasync _getList() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.list = staticAreaItem.querySelector(\".ui5-multi-combobox-all-items-list\");\n\t}\n\n\t_toggleRespPopover() {\n\t\tthis.allItemsPopover.toggle(this);\n\t}\n\n\t_click(event) {\n\t\tif (isPhone() && !this.readonly && !this._showMorePressed) {\n\t\t\tthis.allItemsPopover.open(this);\n\t\t}\n\n\t\tthis._showMorePressed = false;\n\t}\n\n\t_afterClosePopover() {\n\t\t// close device's keyboard and prevent further typing\n\t\tif (isPhone()) {\n\t\t\tthis.blur();\n\t\t}\n\n\t\tthis._iconPressed = false;\n\t\tthis.filterSelected = false;\n\t}\n\n\tonBeforeRendering() {\n\t\tconst input = this.shadowRoot.querySelector(\"input\");\n\t\tthis._inputLastValue = this.value;\n\n\t\tif (input && !input.value) {\n\t\t\tthis._filteredItems = this.items;\n\t\t}\n\n\t\tconst filteredItems = this._filterItems(this.value);\n\t\tthis._filteredItems = filteredItems;\n\t}\n\n\tasync onAfterRendering() {\n\t\tawait this._getRespPopover();\n\t\tawait this._getList();\n\n\t\tthis.toggle(this.shouldDisplayOnlyValueStateMessage);\n\t\tthis.storeResponsivePopoverWidth();\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n\n\t_onIconMousedown() {\n\t\tthis._iconPressed = true;\n\t}\n\n\tstoreResponsivePopoverWidth() {\n\t\tif (this.open && !this._listWidth) {\n\t\t\tthis._listWidth = this.list.offsetWidth;\n\t\t}\n\t}\n\n\ttoggle(isToggled) {\n\t\tif (isToggled && !this.open) {\n\t\t\tthis.openPopover();\n\t\t} else {\n\t\t\tthis.closePopover();\n\t\t}\n\t}\n\n\tasync openPopover() {\n\t\tconst popover = await this._getPopover();\n\n\t\tif (popover) {\n\t\t\tpopover.openBy(this);\n\t\t}\n\t}\n\n\tasync closePopover() {\n\t\tconst popover = await this._getPopover();\n\n\t\tpopover && popover.close();\n\t}\n\n\tasync _getPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\"[ui5-popover]\");\n\t}\n\n\tget _tokenizer() {\n\t\treturn this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n\t}\n\n\tget nMoreCountText() {\n\t\tconst iTokenCount = this._getSelectedItems().length;\n\n\t\tif (iTokenCount === 0) {\n\t\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_TOKEN);\n\t\t}\n\n\t\tif (iTokenCount === 1) {\n\t\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_ONE_TOKEN);\n\t\t}\n\n\t\treturn this.i18nBundle.getText(TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS, iTokenCount);\n\t}\n\n\tinputFocusIn() {\n\t\tif (!isPhone()) {\n\t\t\tthis.focused = true;\n\t\t}\n\t}\n\n\tinputFocusOut(event) {\n\t\tif (!this.shadowRoot.contains(event.relatedTarget) && !this._deleting) {\n\t\t\tthis.focused = false;\n\t\t}\n\t}\n\n\tget editable() {\n\t\treturn !this.readonly;\n\t}\n\n\tget _isFocusInside() {\n\t\treturn this.focused || this._tokenizerFocused;\n\t}\n\n\tget selectedItemsListMode() {\n\t\treturn this.readonly ? \"None\" : \"MultiSelect\";\n\t}\n\n\tget _listItemsType() {\n\t\treturn this.readonly ? \"Inactive\" : \"Active\";\n\t}\n\n\tget hasValueState() {\n\t\treturn this.valueState !== ValueState.None;\n\t}\n\n\tget hasValueStateMessage() {\n\t\treturn this.hasValueState && this.valueState !== ValueState.Success;\n\t}\n\n\tget valueStateText() {\n\t\treturn this.valueStateTextMappings[this.valueState];\n\t}\n\n\tget valueStateTextId() {\n\t\treturn this.hasValueState ? `${this._id}-valueStateDesc` : undefined;\n\t}\n\n\tget valueStateMessageText() {\n\t\treturn this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n\t}\n\n\tget shouldDisplayDefaultValueStateMessage() {\n\t\treturn !this.valueStateMessage.length && this.hasValueStateMessage;\n\t}\n\n\tget shouldDisplayOnlyValueStateMessage() {\n\t\treturn this.focused && this.hasValueStateMessage && !this._iconPressed;\n\t}\n\n\tget valueStateTextMappings() {\n\t\treturn {\n\t\t\t\"Success\": this.i18nBundle.getText(VALUE_STATE_SUCCESS),\n\t\t\t\"Error\": this.i18nBundle.getText(VALUE_STATE_ERROR),\n\t\t\t\"Warning\": this.i18nBundle.getText(VALUE_STATE_WARNING),\n\t\t};\n\t}\n\n\tget _innerInput() {\n\t\tif (isPhone()) {\n\t\t\tif (this.allItemsPopover.opened) {\n\t\t\t\treturn this.allItemsPopover.querySelector(\"input\");\n\t\t\t}\n\t\t}\n\n\t\treturn this.getDomRef().querySelector(\"#ui5-multi-combobox-input\");\n\t}\n\n\tget _headerTitleText() {\n\t\treturn this.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n\t}\n\n\tget _iconAccessibleNameText() {\n\t\treturn this.i18nBundle.getText(ICON_ACCESSIBLE_NAME);\n\t}\n\n\tget _dialogOkButton() {\n\t\treturn this.i18nBundle.getText(MULTICOMBOBOX_DIALOG_OK_BUTTON);\n\t}\n\n\tget _tokenizerExpanded() {\n\t\treturn (this._isFocusInside || this.open) && !this.readonly;\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\tpopoverValueState: {\n\t\t\t\t\"ui5-valuestatemessage-root\": true,\n\t\t\t\t\"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n\t\t\t\t\"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n\t\t\t\t\"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n\t\t\t\t\"ui5-valuestatemessage--information\": this.valueState === ValueState.Information,\n\t\t\t},\n\t\t};\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\tpopoverValueStateMessage: {\n\t\t\t\t\"width\": `${this._listWidth}px`,\n\t\t\t\t\"min-height\": \"2.5rem\",\n\t\t\t\t\"padding\": \"0.5625rem 1rem\",\n\t\t\t\t\"display\": this._listWidth === 0 ? \"none\" : \"inline-block\",\n\t\t\t},\n\t\t\tpopoverHeader: {\n\t\t\t\t\"width\": `${this._inputWidth}px`,\n\t\t\t},\n\t\t};\n\t}\n\n\tstatic async onDefine() {\n\t\tawait fetchI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nMultiComboBox.define();\n\nexport default MultiComboBox;\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,4CAA4C;AACnE,OAAOC,SAAS,MAAM,sDAAsD;AAC5E,OAAOC,aAAa,MAAM,wDAAwD;AAClF,OAAOC,UAAU,MAAM,kDAAkD;AACzE,SACCC,MAAM,EACNC,MAAM,EACNC,WAAW,EACXC,OAAO,EACPC,MAAM,EACNC,OAAO,QACD,sCAAsC;AAC7C,OAAOC,OAAO,MAAM,+CAA+C;AACnE,OAAO,kDAAkD;AACzD,SAASC,IAAI,EAAEC,OAAO,QAAQ,wCAAwC;AACtE,SAASC,eAAe,EAAEC,aAAa,QAAQ,4CAA4C;AAC3F,OAAO,0CAA0C;AACjD,OAAO,kDAAkD;AACzD,OAAOC,iBAAiB,MAAM,wBAAwB;AACtD,OAAOC,SAAS,MAAM,gBAAgB;AACtC,OAAOC,KAAK,MAAM,YAAY;AAC9B,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAOC,iBAAiB,MAAM,wBAAwB;AACtD,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAOC,gBAAgB,MAAM,uBAAuB;AACpD,OAAOC,YAAY,MAAM,mBAAmB;AAC5C,OAAO,KAAKC,OAAO,MAAM,sBAAsB;AAC/C,OAAOC,MAAM,MAAM,aAAa;AAEhC,SACCC,mBAAmB,EACnBC,iBAAiB,EACjBC,mBAAmB,EACnBC,4BAA4B,EAC5BC,gCAAgC,EAChCC,qCAAqC,EACrCC,uBAAuB,EACvBC,oBAAoB,EACpBC,8BAA8B,QACxB,mCAAmC;;AAE1C;AACA,OAAOC,qBAAqB,MAAM,oDAAoD;AACtF,OAAOC,4BAA4B,MAAM,2DAA2D;;AAEpG;AACA,OAAOC,MAAM,MAAM,yCAAyC;AAC5D,OAAOC,0BAA0B,MAAM,mDAAmD;AAC1F,OAAOC,oBAAoB,MAAM,6CAA6C;;AAE9E;AACA;AACA;AACA,MAAMC,QAAQ,GAAG;EAChBC,GAAG,EAAE,oBAAoB;EACzBC,aAAa,EAAE,IAAI;EACnBC,YAAY,EAAE,IAAI;EAClBC,KAAK,EAAE,+DAAgE;IACtE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,SAAS,EAAE;MACVC,YAAY,EAAE,OAAO;MACrBC,IAAI,EAAEC,WAAW;MACjBC,uBAAuB,EAAE;IAC1B,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,IAAI,EAAE;MACLH,IAAI,EAAEC;IACP,CAAC;IAEH;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEG,iBAAiB,EAAE;MAClBJ,IAAI,EAAEC;IACP;EACD,CAAC;EACDI,UAAU,EAAE,+DAAgE;IAC3E;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEC,KAAK,EAAE;MACNN,IAAI,EAAEO,MAAM;MACZC,YAAY,EAAE;IACf,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEC,WAAW,EAAE;MACZT,IAAI,EAAEO,MAAM;MACZC,YAAY,EAAE;IACf,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEE,iBAAiB,EAAE;MAClBV,IAAI,EAAEW;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEC,QAAQ,EAAE;MACTZ,IAAI,EAAEW;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEE,UAAU,EAAE;MACXb,IAAI,EAAE1C,UAAU;MAChBkD,YAAY,EAAElD,UAAU,CAACwD;IAC1B,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEC,QAAQ,EAAE;MACTf,IAAI,EAAEW;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEK,QAAQ,EAAE;MACThB,IAAI,EAAEW;IACP,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEM,MAAM,EAAE;MACPjB,IAAI,EAAEO,MAAM;MACZC,YAAY,EAAE;IACf,CAAC;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACEU,IAAI,EAAE;MACLlB,IAAI,EAAEW;IACP,CAAC;IAEDQ,cAAc,EAAE;MACfnB,IAAI,EAAEoB;IACP,CAAC;IAGDC,cAAc,EAAE;MACfrB,IAAI,EAAEW;IACP,CAAC;IAEDW,OAAO,EAAE;MACRtB,IAAI,EAAEW;IACP,CAAC;IAEDY,iBAAiB,EAAE;MAClBvB,IAAI,EAAEW;IACP,CAAC;IAEDa,YAAY,EAAE;MACbxB,IAAI,EAAEW,OAAO;MACbc,WAAW,EAAE;IACd,CAAC;IAEDC,WAAW,EAAE;MACZ1B,IAAI,EAAEnC,OAAO;MACb4D,WAAW,EAAE;IACd,CAAC;IAEDE,UAAU,EAAE;MACX3B,IAAI,EAAEnC,OAAO;MACb2C,YAAY,EAAE,CAAC;MACfiB,WAAW,EAAE;IACd;EACD,CAAC;EACDG,MAAM,EAAE,+DAAgE;IACvE;AACF;AACA;AACA;AACA;AACA;IACEC,MAAM,EAAE,CAAC,CAAC;IAEV;AACF;AACA;AACA;AACA;AACA;IACEC,KAAK,EAAE,CAAC,CAAC;IAET;AACF;AACA;AACA;AACA;AACA;AACA;IACE,aAAa,EAAE,CAAC,CAAC;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,kBAAkB,EAAE;MACnBC,MAAM,EAAE;QACPC,KAAK,EAAE;UAAEhC,IAAI,EAAEiC;QAAM;MACtB;IACD;EACD;AACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,aAAa,SAAS/E,UAAU,CAAC;EACtC,WAAWuC,QAAQA,CAAA,EAAG;IACrB,OAAOA,QAAQ;EAChB;EAEA,WAAWyC,MAAMA,CAAA,EAAG;IACnB,OAAO/E,SAAS;EACjB;EAEA,WAAWgF,QAAQA,CAAA,EAAG;IACrB,OAAO/C,qBAAqB;EAC7B;EAEA,WAA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"},"metadata":{},"sourceType":"module","externalDependencies":[]}