{"ast":null,"code":"import _extends from '@babel/runtime/helpers/extends';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport { getEffectiveScopingSuffixForTag } from '@ui5/webcomponents-base/dist/CustomElementsScope';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/lib/useConsolidatedRef';\nimport React, { forwardRef, useRef, useEffect, Children, cloneElement } from 'react';\nvar capitalizeFirstLetter = function capitalizeFirstLetter(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1);\n};\nvar camelToKebabCase = function camelToKebabCase(s) {\n  return s.replace(/([A-Z])/g, function (a, b) {\n    return \"-\".concat(b.toLowerCase());\n  });\n};\nvar kebabToCamelCase = function kebabToCamelCase(str) {\n  return str.replace(/([-_]\\w)/g, function (g) {\n    return g[1].toUpperCase();\n  });\n};\nvar createEventPropName = function createEventPropName(eventName) {\n  return \"on\".concat(capitalizeFirstLetter(kebabToCamelCase(eventName)));\n};\nvar withWebComponent = function withWebComponent(tagName, regularProperties, booleanProperties, slotProperties, eventProperties) {\n  var WithWebComponent = /*#__PURE__*/forwardRef(function (props, wcRef) {\n    var className = props.className,\n      tooltip = props.tooltip,\n      children = props.children,\n      rest = _objectWithoutProperties(props, [\"className\", \"tooltip\", \"children\"]);\n    var ref = useConsolidatedRef(wcRef);\n    var eventRegistry = useRef({}); // regular props (no booleans, no slots and no events)\n\n    var regularProps = regularProperties.reduce(function (acc, name) {\n      if (rest.hasOwnProperty(name)) {\n        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, camelToKebabCase(name), rest[name]));\n      }\n      return acc;\n    }, {}); // boolean properties - only attach if they are truthy\n\n    var booleanProps = booleanProperties.reduce(function (acc, name) {\n      if (rest[name] === true || rest[name] === 'true') {\n        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, camelToKebabCase(name), true));\n      }\n      return acc;\n    }, {});\n    var slots = slotProperties.reduce(function (acc, name) {\n      var slotValue = rest[name];\n      if (!slotValue) return acc;\n      var slottedChildren = [];\n      var index = 0;\n      var removeFragments = function removeFragments(element) {\n        if (!element) return;\n        if (element.type === React.Fragment) {\n          var _element$props;\n          Children.toArray((_element$props = element.props) === null || _element$props === void 0 ? void 0 : _element$props.children).filter(Boolean).forEach(function (item) {\n            removeFragments(item);\n          });\n        } else {\n          slottedChildren.push( /*#__PURE__*/cloneElement(element, {\n            key: \"\".concat(name, \"-\").concat(index),\n            slot: name\n          }));\n          index++;\n        }\n      };\n      if (Array.isArray(slotValue)) {\n        slotValue.forEach(function (item) {\n          removeFragments(item);\n        });\n      } else {\n        removeFragments(slotValue);\n      }\n      return [].concat(_toConsumableArray(acc), slottedChildren);\n    }, []); // event binding\n\n    useEffect(function () {\n      eventProperties.forEach(function (eventName) {\n        var eventHandler = rest[createEventPropName(eventName)];\n        if (typeof eventHandler === 'function') {\n          eventRegistry.current[eventName] = eventHandler;\n          ref.current.addEventListener(eventName, eventRegistry.current[eventName]);\n        }\n      });\n      return function () {\n        // eslint-disable-next-line guard-for-in\n        for (var eventName in eventRegistry.current) {\n          var _ref$current;\n          (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.removeEventListener(eventName, eventRegistry.current[eventName]);\n        }\n      };\n    }, eventProperties.map(function (eventName) {\n      return rest[createEventPropName(eventName)];\n    })); // non web component related props, just pass them\n\n    var nonWebComponentRelatedProps = Object.entries(rest).filter(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 1),\n        key = _ref2[0];\n      return !regularProperties.includes(key);\n    }).filter(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 1),\n        key = _ref4[0];\n      return !slotProperties.includes(key);\n    }).filter(function (_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 1),\n        key = _ref6[0];\n      return !booleanProperties.includes(key);\n    }).filter(function (_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 1),\n        key = _ref8[0];\n      return !eventProperties.map(function (eventName) {\n        return createEventPropName(eventName);\n      }).includes(key);\n    }).reduce(function (acc, _ref9) {\n      var _ref10 = _slicedToArray(_ref9, 2),\n        key = _ref10[0],\n        val = _ref10[1];\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, val));\n    }, {});\n    var tagNameSuffix = getEffectiveScopingSuffixForTag(tagName);\n    var Component = tagNameSuffix ? \"\".concat(tagName, \"-\").concat(tagNameSuffix) : tagName;\n    return /*#__PURE__*/React.createElement(Component, _extends({\n      ref: ref\n    }, booleanProps, regularProps, nonWebComponentRelatedProps, {\n      \"class\": className,\n      title: tooltip\n    }), slots, children);\n  });\n  WithWebComponent.displayName = \"WithWebComponent(\".concat(tagName, \")\");\n  return WithWebComponent;\n};\nexport { withWebComponent };","map":{"version":3,"names":["capitalizeFirstLetter","s","charAt","toUpperCase","slice","camelToKebabCase","replace","a","b","concat","toLowerCase","kebabToCamelCase","str","g","createEventPropName","eventName","withWebComponent","tagName","regularProperties","booleanProperties","slotProperties","eventProperties","WithWebComponent","forwardRef","props","wcRef","className","tooltip","children","rest","_objectWithoutProperties","ref","useConsolidatedRef","eventRegistry","useRef","regularProps","reduce","acc","name","hasOwnProperty","_objectSpread","_defineProperty","booleanProps","slots","slotValue","slottedChildren","index","removeFragments","element","type","React","Fragment","_element$props","Children","toArray","filter","Boolean","forEach","item","push","cloneElement","key","slot","Array","isArray","_toConsumableArray","useEffect","eventHandler","current","addEventListener","_ref$current","removeEventListener","map","nonWebComponentRelatedProps","Object","entries","_ref","_ref2","_slicedToArray","includes","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","val","tagNameSuffix","getEffectiveScopingSuffixForTag","Component","createElement","_extends","title","displayName"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react/src/internal/withWebComponent.tsx"],"sourcesContent":["import { getEffectiveScopingSuffixForTag } from '@ui5/webcomponents-base/dist/CustomElementsScope';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/lib/useConsolidatedRef';\nimport React, {\n  Children,\n  cloneElement,\n  ComponentType,\n  forwardRef,\n  ForwardRefRenderFunction,\n  ReactElement,\n  Ref,\n  RefObject,\n  useEffect,\n  useRef\n} from 'react';\nimport { CommonProps } from '../interfaces/CommonProps';\nimport { Ui5DomRef } from '../interfaces/Ui5DomRef';\n\nconst capitalizeFirstLetter = (s: string) => s.charAt(0).toUpperCase() + s.slice(1);\n\nconst camelToKebabCase = (s: string) => s.replace(/([A-Z])/g, (a, b: string) => `-${b.toLowerCase()}`);\nconst kebabToCamelCase = (str: string) => str.replace(/([-_]\\w)/g, (g) => g[1].toUpperCase());\n\nconst createEventPropName = (eventName) => `on${capitalizeFirstLetter(kebabToCamelCase(eventName))}`;\n\ntype EventHandler = (event: CustomEvent<unknown>) => void;\n\nexport interface WithWebComponentPropTypes extends CommonProps {\n  ref?: Ref<any>;\n  children?: any | void;\n}\n\nexport const withWebComponent = <T extends Record<string, any>>(\n  tagName: string,\n  regularProperties: string[],\n  booleanProperties: string[],\n  slotProperties: string[],\n  eventProperties: string[]\n) => {\n  const WithWebComponent = forwardRef((props: T & WithWebComponentPropTypes, wcRef: RefObject<Ui5DomRef>) => {\n    const { className, tooltip, children, ...rest } = props;\n\n    const ref = useConsolidatedRef<HTMLElement>(wcRef);\n    const eventRegistry = useRef<Record<string, EventHandler>>({});\n\n    // regular props (no booleans, no slots and no events)\n    const regularProps = regularProperties.reduce((acc, name) => {\n      if (rest.hasOwnProperty(name)) {\n        return { ...acc, [camelToKebabCase(name)]: rest[name] };\n      }\n      return acc;\n    }, {});\n\n    // boolean properties - only attach if they are truthy\n    const booleanProps = booleanProperties.reduce((acc, name) => {\n      if (rest[name] === true || rest[name] === 'true') {\n        return { ...acc, [camelToKebabCase(name)]: true };\n      }\n      return acc;\n    }, {});\n\n    const slots = slotProperties.reduce((acc, name) => {\n      const slotValue = rest[name] as ReactElement;\n\n      if (!slotValue) return acc;\n\n      const slottedChildren = [];\n      let index = 0;\n      const removeFragments = (element) => {\n        if (!element) return;\n        if (element.type === React.Fragment) {\n          Children.toArray(element.props?.children)\n            .filter(Boolean)\n            .forEach((item) => {\n              removeFragments(item);\n            });\n        } else {\n          slottedChildren.push(\n            cloneElement(element, {\n              key: `${name}-${index}`,\n              slot: name\n            })\n          );\n          index++;\n        }\n      };\n\n      if (Array.isArray(slotValue)) {\n        slotValue.forEach((item) => {\n          removeFragments(item);\n        });\n      } else {\n        removeFragments(slotValue);\n      }\n      return [...acc, ...slottedChildren];\n    }, []);\n    // event binding\n    useEffect(\n      () => {\n        eventProperties.forEach((eventName) => {\n          const eventHandler = rest[createEventPropName(eventName)] as EventHandler;\n          if (typeof eventHandler === 'function') {\n            eventRegistry.current[eventName] = eventHandler;\n            ref.current.addEventListener(eventName, eventRegistry.current[eventName]);\n          }\n        });\n\n        return () => {\n          // eslint-disable-next-line guard-for-in\n          for (const eventName in eventRegistry.current) {\n            ref.current?.removeEventListener(eventName, eventRegistry.current[eventName]);\n          }\n        };\n      },\n      eventProperties.map((eventName) => rest[createEventPropName(eventName)])\n    );\n\n    // non web component related props, just pass them\n    const nonWebComponentRelatedProps = Object.entries(rest)\n      .filter(([key]) => !regularProperties.includes(key))\n      .filter(([key]) => !slotProperties.includes(key))\n      .filter(([key]) => !booleanProperties.includes(key))\n      .filter(([key]) => !eventProperties.map((eventName) => createEventPropName(eventName)).includes(key))\n      .reduce((acc, [key, val]) => ({ ...acc, [key]: val }), {});\n\n    const tagNameSuffix: string = getEffectiveScopingSuffixForTag(tagName);\n    const Component = ((tagNameSuffix ? `${tagName}-${tagNameSuffix}` : tagName) as unknown) as ComponentType<\n      WithWebComponentPropTypes & { class: string }\n    >;\n\n    return (\n      <Component\n        ref={ref}\n        {...booleanProps}\n        {...regularProps}\n        {...nonWebComponentRelatedProps}\n        class={className}\n        title={tooltip}\n      >\n        {slots}\n        {children}\n      </Component>\n    );\n  });\n\n  WithWebComponent.displayName = `WithWebComponent(${tagName})`;\n\n  return (WithWebComponent as unknown) as ForwardRefRenderFunction<Ui5DomRef, T & WithWebComponentPropTypes>;\n};\n"],"mappings":";;;;;;;;;AAiBA,IAAMA,qBAAqB,GAAG,SAAxBA,qBAAwBA,CAACC,CAAD;EAAA,OAAeA,CAAC,CAACC,MAAF,CAAS,CAAT,EAAYC,WAAZ,KAA4BF,CAAC,CAACG,KAAF,CAAQ,CAAR,CAA3C;AAAA,CAA9B;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmBA,CAACJ,CAAD;EAAA,OAAeA,CAAC,CAACK,OAAF,CAAU,UAAV,EAAsB,UAACC,CAAD,EAAIC,CAAJ;IAAA,WAAAC,MAAA,CAAsBD,CAAC,CAACE,WAAF,EAAtB;EAAA,CAAtB,CAAf;AAAA,CAAzB;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmBA,CAACC,GAAD;EAAA,OAAiBA,GAAG,CAACN,OAAJ,CAAY,WAAZ,EAAyB,UAACO,CAAD;IAAA,OAAOA,CAAC,CAAC,CAAD,CAAD,CAAKV,WAAL,EAAP;EAAA,CAAzB,CAAjB;AAAA,CAAzB;AAEA,IAAMW,mBAAmB,GAAG,SAAtBA,mBAAsBA,CAACC,SAAD;EAAA,YAAAN,MAAA,CAAoBT,qBAAqB,CAACW,gBAAgB,CAACI,SAAD,CAAjB,CAAzC;AAAA,CAA5B;IASaC,gBAAgB,GAAG,SAAnBA,gBAAmBA,CAC9BC,OAD8B,EAE9BC,iBAF8B,EAG9BC,iBAH8B,EAI9BC,cAJ8B,EAK9BC,eAL8B,EAM3B;EACH,IAAMC,gBAAgB,gBAAGC,UAAU,CAAC,UAACC,KAAD,EAAuCC,KAAvC,EAAuE;IAAA,IACjGC,SADiG,GACvDF,KADuD,CACjGE,SADiG;MACtFC,OADsF,GACvDH,KADuD,CACtFG,OADsF;MAC7EC,QAD6E,GACvDJ,KADuD,CAC7EI,QAD6E;MAChEC,IADgE,GAAAC,wBAAA,CACvDN,KADuD;IAGzG,IAAMO,GAAG,GAAGC,kBAAkB,CAAcP,KAAd,CAA9B;IACA,IAAMQ,aAAa,GAAGC,MAAM,CAA+B,EAA/B,CAA5B,CAJyG;;IAOzG,IAAMC,YAAY,GAAGjB,iBAAiB,CAACkB,MAAlB,CAAyB,UAACC,GAAD,EAAMC,IAAN,EAAe;MAC3D,IAAIT,IAAI,CAACU,cAAL,CAAoBD,IAApB,CAAJ,EAA+B;QAC7B,OAAAE,aAAA,CAAAA,aAAA,KAAYH,GAAZ,OAAAI,eAAA,KAAkBpC,gBAAgB,CAACiC,IAAD,CAAlC,EAA2CT,IAAI,CAACS,IAAD,CAA/C;MACD;MACD,OAAOD,GAAP;IACD,CALoB,EAKlB,EALkB,CAArB,CAPyG;;IAezG,IAAMK,YAAY,GAAGvB,iBAAiB,CAACiB,MAAlB,CAAyB,UAACC,GAAD,EAAMC,IAAN,EAAe;MAC3D,IAAIT,IAAI,CAACS,IAAD,CAAJ,KAAe,IAAf,IAAuBT,IAAI,CAACS,IAAD,CAAJ,KAAe,MAA1C,EAAkD;QAChD,OAAAE,aAAA,CAAAA,aAAA,KAAYH,GAAZ,OAAAI,eAAA,KAAkBpC,gBAAgB,CAACiC,IAAD,CAAlC,EAA2C,IAA3C;MACD;MACD,OAAOD,GAAP;IACD,CALoB,EAKlB,EALkB,CAArB;IAOA,IAAMM,KAAK,GAAGvB,cAAc,CAACgB,MAAf,CAAsB,UAACC,GAAD,EAAMC,IAAN,EAAe;MACjD,IAAMM,SAAS,GAAGf,IAAI,CAACS,IAAD,CAAtB;MAEA,IAAI,CAACM,SAAL,EAAgB,OAAOP,GAAP;MAEhB,IAAMQ,eAAe,GAAG,EAAxB;MACA,IAAIC,KAAK,GAAG,CAAZ;MACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkBA,CAACC,OAAD,EAAa;QACnC,IAAI,CAACA,OAAL,EAAc;QACd,IAAIA,OAAO,CAACC,IAAR,KAAiBC,KAAK,CAACC,QAA3B,EAAqC;UAAA,IAAAC,cAAA;UACnCC,QAAQ,CAACC,OAAT,EAAAF,cAAA,GAAiBJ,OAAO,CAACxB,KAAzB,cAAA4B,cAAA,uBAAiBA,cAAA,CAAexB,QAAhC,EACG2B,MADH,CACUC,OADV,EAEGC,OAFH,CAEW,UAACC,IAAD,EAAU;YACjBX,eAAe,CAACW,IAAD,CAAf;UACD,CAJH;QAKD,CAND,MAMO;UACLb,eAAe,CAACc,IAAhB,eACEC,YAAY,CAACZ,OAAD,EAAU;YACpBa,GAAG,KAAApD,MAAA,CAAK6B,IAAL,OAAA7B,MAAA,CAAaqC,KAAb,CADiB;YAEpBgB,IAAI,EAAExB;UAFc,CAAV,CADd;UAMAQ,KAAK;QACN;MACF,CAjBD;MAmBA,IAAIiB,KAAK,CAACC,OAAN,CAAcpB,SAAd,CAAJ,EAA8B;QAC5BA,SAAS,CAACa,OAAV,CAAkB,UAACC,IAAD,EAAU;UAC1BX,eAAe,CAACW,IAAD,CAAf;QACD,CAFD;MAGD,CAJD,MAIO;QACLX,eAAe,CAACH,SAAD,CAAf;MACD;MACD,UAAAnC,MAAA,CAAAwD,kBAAA,CAAW5B,GAAX,GAAmBQ,eAAnB;IACD,CAlCa,EAkCX,EAlCW,CAAd,CAtByG;;IA0DzGqB,SAAS,CACP,YAAM;MACJ7C,eAAe,CAACoC,OAAhB,CAAwB,UAAC1C,SAAD,EAAe;QACrC,IAAMoD,YAAY,GAAGtC,IAAI,CAACf,mBAAmB,CAACC,SAAD,CAApB,CAAzB;QACA,IAAI,OAAOoD,YAAP,KAAwB,UAA5B,EAAwC;UACtClC,aAAa,CAACmC,OAAd,CAAsBrD,SAAtB,IAAmCoD,YAAnC;UACApC,GAAG,CAACqC,OAAJ,CAAYC,gBAAZ,CAA6BtD,SAA7B,EAAwCkB,aAAa,CAACmC,OAAd,CAAsBrD,SAAtB,CAAxC;QACD;MACF,CAND;MAQA,OAAO,YAAM;QACX;QACA,KAAK,IAAMA,SAAX,IAAwBkB,aAAa,CAACmC,OAAtC,EAA+C;UAAA,IAAAE,YAAA;UAC7C,CAAAA,YAAA,GAAAvC,GAAG,CAACqC,OAAJ,cAAAE,YAAA,uBAAAA,YAAA,CAAaC,mBAAb,CAAiCxD,SAAjC,EAA4CkB,aAAa,CAACmC,OAAd,CAAsBrD,SAAtB,CAA5C;QACD;MACF,CALD;IAMD,CAhBM,EAiBPM,eAAe,CAACmD,GAAhB,CAAoB,UAACzD,SAAD;MAAA,OAAec,IAAI,CAACf,mBAAmB,CAACC,SAAD,CAApB,CAAnB;IAAA,CAApB,CAjBO,CAAT,CA1DyG;;IA+EzG,IAAM0D,2BAA2B,GAAGC,MAAM,CAACC,OAAP,CAAe9C,IAAf,EACjC0B,MADiC,CAC1B,UAAAqB,IAAA;MAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;QAAEf,GAAF,GAAAgB,KAAA;MAAA,OAAW,CAAC3D,iBAAiB,CAAC6D,QAAlB,CAA2BlB,GAA3B,CAAZ;IAAA,CAD0B,EAEjCN,MAFiC,CAE1B,UAAAyB,KAAA;MAAA,IAAAC,KAAA,GAAAH,cAAA,CAAAE,KAAA;QAAEnB,GAAF,GAAAoB,KAAA;MAAA,OAAW,CAAC7D,cAAc,CAAC2D,QAAf,CAAwBlB,GAAxB,CAAZ;IAAA,CAF0B,EAGjCN,MAHiC,CAG1B,UAAA2B,KAAA;MAAA,IAAAC,KAAA,GAAAL,cAAA,CAAAI,KAAA;QAAErB,GAAF,GAAAsB,KAAA;MAAA,OAAW,CAAChE,iBAAiB,CAAC4D,QAAlB,CAA2BlB,GAA3B,CAAZ;IAAA,CAH0B,EAIjCN,MAJiC,CAI1B,UAAA6B,KAAA;MAAA,IAAAC,KAAA,GAAAP,cAAA,CAAAM,KAAA;QAAEvB,GAAF,GAAAwB,KAAA;MAAA,OAAW,CAAChE,eAAe,CAACmD,GAAhB,CAAoB,UAACzD,SAAD;QAAA,OAAeD,mBAAmB,CAACC,SAAD,CAAlC;MAAA,CAApB,EAAmEgE,QAAnE,CAA4ElB,GAA5E,CAAZ;IAAA,CAJ0B,EAKjCzB,MALiC,CAK1B,UAACC,GAAD,EAAAiD,KAAA;MAAA,IAAAC,MAAA,GAAAT,cAAA,CAAAQ,KAAA;QAAOzB,GAAP,GAAA0B,MAAA;QAAYC,GAAZ,GAAAD,MAAA;MAAA,OAAA/C,aAAA,CAAAA,aAAA,KAA2BH,GAA3B,OAAAI,eAAA,KAAiCoB,GAAjC,EAAuC2B,GAAvC;IAAA,CAL0B,EAKqB,EALrB,CAApC;IAOA,IAAMC,aAAqB,GAAGC,+BAA+B,CAACzE,OAAD,CAA7D;IACA,IAAM0E,SAAS,GAAKF,aAAa,MAAAhF,MAAA,CAAMQ,OAAN,OAAAR,MAAA,CAAiBgF,aAAjB,IAAmCxE,OAApE;IAIA,oBACEiC,KAAA,CAAA0C,aAAA,CAACD,SAAD,EAAAE,QAAA;MACE9D,GAAG,EAAEA;IADP,GAEMW,YAFN,EAGMP,YAHN,EAIMsC,2BAJN;MAKE,SAAO/C,SALT;MAMEoE,KAAK,EAAEnE;IANT,IAQGgB,KARH,EASGf,QATH,CADF;EAaD,CAxGkC,CAAnC;EA0GAN,gBAAgB,CAACyE,WAAjB,uBAAAtF,MAAA,CAAmDQ,OAAnD;EAEA,OAAQK,gBAAR;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}