{"ast":null,"code":"import _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { supportTouch, getOS, getSystem } from '@ui5/webcomponents-base/dist/Device';\nexport { getBrowser, getOS, getSystem, isAndroid, isChrome, isDesktop, isEdge, isFF, isIE, isMobile, isPhone, isSafari, isTablet, supportTouch } from '@ui5/webcomponents-base/dist/Device';\nimport EventProvider from '@ui5/webcomponents-base/dist/EventProvider';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { Logger } from '@ui5/webcomponents-react-base/lib/Logger';\nvar supportPointerEvents = function supportPointerEvents() {\n  return 'onpointerdown' in window;\n};\nvar supportInputPlaceholder = function supportInputPlaceholder() {\n  return 'placeholder' in document.createElement('input') && 'placeholder' in document.createElement('textarea');\n};\nvar supportWebSocket = function supportWebSocket() {\n  var isSupported = false;\n  try {\n    isSupported = 'WebSocket' in window && window.WebSocket.CLOSING === 2;\n  } catch (e) {// do nothing\n  }\n  return isSupported;\n};\nvar supportMatchMedia = function supportMatchMedia() {\n  return 'matchMedia' in window;\n};\nvar supportMatchMediaListener = function supportMatchMediaListener() {\n  return !!(supportMatchMedia() && window.matchMedia('all and (max-width:0px)'));\n};\nvar supportOrientation = function supportOrientation() {\n  return 'DeviceOrientationEvent' in window;\n};\nvar supportRetina = function supportRetina() {\n  return window.retina || window.devicePixelRatio >= 2;\n};\nvar getWindowSize = function getWindowSize() {\n  return [window.innerWidth, window.innerHeight];\n};\nvar changeRootCSSClass = function changeRootCSSClass(sClassName, bRemove, sPrefix) {\n  var oRoot = document.documentElement;\n  if (oRoot.className.length === 0) {\n    if (!bRemove) {\n      oRoot.className = sClassName;\n    }\n  } else {\n    var aCurrentClasses = oRoot.className.split(' ');\n    var sNewClasses = '';\n    aCurrentClasses.forEach(function (currentClass) {\n      // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n      if (sPrefix && currentClass.indexOf(sPrefix) !== 0 || !sPrefix && currentClass !== sClassName) {\n        sNewClasses = \"\".concat(sNewClasses + currentClass, \" \");\n      }\n    });\n    if (!bRemove) {\n      sNewClasses += sClassName;\n    }\n    oRoot.className = sNewClasses;\n  }\n};\nvar getQuery = function getQuery(from, to) {\n  var unit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'px';\n  var q = 'all';\n  if (from > 0) {\n    q = \"\".concat(q, \" and (min-width:\").concat(from).concat(unit, \")\");\n  }\n  if (to > 0) {\n    q = \"\".concat(q, \" and (max-width:\").concat(to).concat(unit, \")\");\n  }\n  return q;\n};\nvar convertToPx = function convertToPx(val, unit) {\n  if (unit === 'em' || unit === 'rem') {\n    var _window$getComputedSt;\n    var s = (_window$getComputedSt = window.getComputedStyle) !== null && _window$getComputedSt !== void 0 ? _window$getComputedSt : function (element) {\n      return element.currentStyle;\n    };\n    var x = s(document.documentElement).fontSize;\n    var f = x && x.indexOf('px') >= 0 ? parseFloat(x) : 16;\n    return val * f;\n  }\n  return val;\n};\nvar matchLegacyBySize = function matchLegacyBySize(from, to, unit, size) {\n  from = convertToPx(from, unit);\n  to = convertToPx(to, unit);\n  var width = size[0];\n  var a = from < 0 || from <= width;\n  var b = to < 0 || width <= to;\n  return a && b;\n};\nvar isLandscape = function isLandscape(bFromOrientationChange, orientation, bKeyboardOpen) {\n  if (supportTouch() && supportOrientation() && getOS().android) {\n    // if on screen keyboard is open and the call of this method is from orientation change listener,\n    // reverse the last value. this is because when keyboard opens on android device, the height can be less\n    // than the width even in portrait mode.\n    if (bKeyboardOpen && bFromOrientationChange) {\n      return !orientation.landscape;\n    }\n    if (bKeyboardOpen) {\n      // when keyboard opens, the last orientation change value will be returned.\n      return orientation.landscape;\n    }\n  } else if (supportMatchMedia() && supportOrientation()) {\n    // most desktop browsers and windows phone/tablet which not support orientationchange\n    return !!window.matchMedia('(orientation: landscape)').matches;\n  } // otherwise compare the width and height of window\n\n  var size = getWindowSize();\n  return size[0] > size[1];\n};\nvar MediaEventProvider = new EventProvider();\nvar _DEFAULT_RANGESETS;\nvar eventProvider = MediaEventProvider; // private helpers\n\nvar initializedQuerySets = {};\nvar refreshCSSClasses = function refreshCSSClasses(sSetName, sRangeName, bRemove) {\n  var sClassPrefix = \"sapUiMedia-\".concat(sSetName, \"-\");\n  changeRootCSSClass(sClassPrefix + sRangeName, bRemove, sClassPrefix);\n};\nvar getRangeInfo = function getRangeInfo(sSetName, iRangeIdx) {\n  var q = initializedQuerySets[sSetName].queries[iRangeIdx];\n  var info = {\n    from: q.from,\n    unit: initializedQuerySets[sSetName].unit\n  };\n  if (q.to >= 0) {\n    info.to = q.to;\n  }\n  if (initializedQuerySets[sSetName].names) {\n    info.name = initializedQuerySets[sSetName].names[iRangeIdx];\n  }\n  return info;\n};\nvar matches = function matches(from, to, unit) {\n  var q = getQuery(from, to, unit);\n  var mm = window.matchMedia(q); // FF returns null when running within an iframe with display:none\n\n  return mm && mm.matches;\n};\nvar checkQueries = function checkQueries(name, infoOnly) {\n  var fnMatches = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : matches;\n  if (initializedQuerySets[name]) {\n    var aQueries = initializedQuerySets[name].queries;\n    var info = null;\n    for (var i = 0, len = aQueries.length; i < len; i++) {\n      var q = aQueries[i];\n      if ((q !== initializedQuerySets[name].currentquery || infoOnly) && fnMatches(q.from, q.to, initializedQuerySets[name].unit)) {\n        if (!infoOnly) {\n          initializedQuerySets[name].currentquery = q;\n        }\n        if (!initializedQuerySets[name].noClasses && initializedQuerySets[name].names && !infoOnly) {\n          refreshCSSClasses(name, initializedQuerySets[name].names[i]);\n        }\n        info = getRangeInfo(name, i);\n      }\n    }\n    return info;\n  }\n  Logger.warning(\"No queryset with name \".concat(name, \" found\"), 'DEVICE.MEDIA');\n  return null;\n};\nvar handleChange = function handleChange(name) {\n  if (initializedQuerySets[name].timer) {\n    clearTimeout(initializedQuerySets[name].timer);\n    initializedQuerySets[name].timer = null;\n  }\n  initializedQuerySets[name].timer = setTimeout(function () {\n    var mParams = checkQueries(name, false);\n    if (mParams) {\n      eventProvider.fireEvent(\"media_\".concat(name), mParams);\n    }\n  }, supportMatchMediaListener() ? 0 : 100);\n}; // public API\n\nvar RANGESETS;\n(function (RANGESETS) {\n  RANGESETS[\"SAP_3STEPS\"] = \"3Step\";\n  RANGESETS[\"SAP_4STEPS\"] = \"4Step\";\n  RANGESETS[\"SAP_6STEPS\"] = \"6Step\";\n  RANGESETS[\"SAP_STANDARD\"] = \"Std\";\n  RANGESETS[\"SAP_STANDARD_EXTENDED\"] = \"StdExt\";\n})(RANGESETS || (RANGESETS = {}));\nvar DEFAULT_RANGE_SET = RANGESETS.SAP_STANDARD;\nvar DEFAULT_RANGESETS = (_DEFAULT_RANGESETS = {}, _defineProperty(_DEFAULT_RANGESETS, RANGESETS.SAP_3STEPS, {\n  points: [520, 960],\n  unit: 'px',\n  name: RANGESETS.SAP_3STEPS,\n  names: ['S', 'M', 'L']\n}), _defineProperty(_DEFAULT_RANGESETS, RANGESETS.SAP_4STEPS, {\n  points: [520, 760, 960],\n  unit: 'px',\n  name: RANGESETS.SAP_4STEPS,\n  names: ['S', 'M', 'L', 'XL']\n}), _defineProperty(_DEFAULT_RANGESETS, RANGESETS.SAP_6STEPS, {\n  points: [241, 400, 541, 768, 960],\n  unit: 'px',\n  name: RANGESETS.SAP_6STEPS,\n  names: ['XS', 'S', 'M', 'L', 'XL', 'XXL']\n}), _defineProperty(_DEFAULT_RANGESETS, RANGESETS.SAP_STANDARD, {\n  points: [600, 1024],\n  unit: 'px',\n  name: RANGESETS.SAP_STANDARD,\n  names: ['Phone', 'Tablet', 'Desktop']\n}), _defineProperty(_DEFAULT_RANGESETS, RANGESETS.SAP_STANDARD_EXTENDED, {\n  points: [600, 1024, 1440],\n  unit: 'px',\n  name: RANGESETS.SAP_STANDARD_EXTENDED,\n  names: ['Phone', 'Tablet', 'Desktop', 'LargeDesktop']\n}), _DEFAULT_RANGESETS);\nvar hasRangeSet = function hasRangeSet(sName) {\n  return sName && !!initializedQuerySets[sName];\n};\nvar getCurrentRange = function getCurrentRange(rangeSetName, width) {\n  if (!initializedQuerySets[DEFAULT_RANGE_SET]) {\n    initRangeSet();\n  }\n  if (!initializedQuerySets[RANGESETS.SAP_STANDARD_EXTENDED]) {\n    initRangeSet(RANGESETS.SAP_STANDARD_EXTENDED);\n  }\n  if (!hasRangeSet(rangeSetName)) {\n    return null;\n  }\n  return checkQueries(rangeSetName, true, isNaN(width) ? null : function (from, to, unit) {\n    return matchLegacyBySize(from, to, unit, [width, 0]);\n  });\n};\nvar initRangeSet = function initRangeSet(sName, aRangeBorders, sUnit, aRangeNames, bSuppressClasses) {\n  var oConfig;\n  if (!sName) {\n    oConfig = DEFAULT_RANGESETS[DEFAULT_RANGE_SET];\n  } else if (sName && DEFAULT_RANGESETS[sName]) {\n    oConfig = DEFAULT_RANGESETS[sName];\n  } else {\n    oConfig = {\n      name: sName,\n      unit: (sUnit || 'px').toLowerCase(),\n      points: aRangeBorders || [],\n      names: aRangeNames,\n      noClasses: !!bSuppressClasses\n    };\n  }\n  if (hasRangeSet(oConfig.name)) {\n    return;\n  }\n  sName = oConfig.name;\n  oConfig.queries = [];\n  oConfig.timer = null;\n  oConfig.currentquery = null;\n  oConfig.listener = function () {\n    return handleChange(sName);\n  };\n  var aPoints = oConfig.points;\n  for (var i = 0, len = aPoints.length; i <= len; i++) {\n    var from = i === 0 ? 0 : aPoints[i - 1];\n    var to = i === aPoints.length ? -1 : aPoints[i];\n    var query = getQuery(from, to, oConfig.unit);\n    oConfig.queries.push({\n      query: query,\n      from: from,\n      to: to\n    });\n  }\n  if (oConfig.names && oConfig.names.length !== oConfig.queries.length) {\n    oConfig.names = null;\n  }\n  initializedQuerySets[oConfig.name] = oConfig;\n  var queries = oConfig.queries;\n  var _iterator = _createForOfIteratorHelper(queries),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var q = _step.value;\n      q.media = window.matchMedia(q.query);\n      q.media.addListener(oConfig.listener);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  oConfig.listener();\n};\nvar removeRangeSet = function removeRangeSet(rangeSetName) {\n  if (!hasRangeSet(rangeSetName)) {\n    Logger.info(\"RangeSet \".concat(rangeSetName, \" not found, thus could not be removed.\"), 'DEVICE.MEDIA');\n    return;\n  }\n  for (var x in RANGESETS) {\n    if (rangeSetName === RANGESETS[x]) {\n      Logger.warning('Cannot remove default rangeset - no action taken.', 'DEVICE.MEDIA');\n      return;\n    }\n  }\n  var oConfig = initializedQuerySets[rangeSetName]; // FF, Safari, Chrome, IE10?\n\n  var queries = oConfig.queries;\n  var _iterator2 = _createForOfIteratorHelper(queries),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var q = _step2.value;\n      q.media.removeListener(oConfig.listener);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  refreshCSSClasses(rangeSetName, '', true); // eslint-disable-next-line no-underscore-dangle\n\n  delete eventProvider._eventRegistry[\"media_\".concat(rangeSetName)];\n  delete initializedQuerySets[rangeSetName];\n};\nvar attachMediaHandler = function attachMediaHandler(fnFunction) {\n  var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_RANGE_SET;\n  eventProvider.attachEvent(\"media_\".concat(name), fnFunction);\n};\nvar detachMediaHandler = function detachMediaHandler(fnFunction) {\n  var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_RANGE_SET;\n  eventProvider.detachEvent(\"media_\".concat(name), fnFunction);\n};\nvar eventProvider$1 = new EventProvider();\nvar iResizeTimeout;\nvar bOrientationChange = false;\nvar bResize = false;\nvar iOrientationTimeout;\nvar iClearFlagTimeout;\nvar _Utils$getWindowSize = getWindowSize(),\n  _Utils$getWindowSize2 = _slicedToArray(_Utils$getWindowSize, 2),\n  iWindowWidthOld = _Utils$getWindowSize2[0],\n  iWindowHeightOld = _Utils$getWindowSize2[1];\nvar bKeyboardOpen = false;\nvar iLastResizeTime;\nvar rInputTagRegex = /INPUT|TEXTAREA|SELECT/;\nvar internalWindowSize = {\n  height: 0,\n  width: 0\n};\nvar internalOrientation = {\n  landscape: false,\n  portrait: false\n}; // PRIVATE API\n\nvar setResizeInfo = function setResizeInfo() {\n  internalWindowSize.width = getWindowSize()[0];\n  internalWindowSize.height = getWindowSize()[1];\n};\nvar setOrientationInfo = function setOrientationInfo() {\n  internalOrientation.landscape = isLandscape(true, internalOrientation, bKeyboardOpen);\n  internalOrientation.portrait = !internalOrientation.landscape;\n};\nvar clearFlags = function clearFlags() {\n  bOrientationChange = false;\n  bResize = false;\n  iClearFlagTimeout = null;\n};\nvar eventListenersInitialized = false;\nvar initEventListeners = function initEventListeners() {\n  // Add handler for orientationchange and resize after initialization of Device API\n  if (supportTouch() && supportOrientation()) {\n    // logic for mobile devices which support orientationchange (like ios, android)\n    window.addEventListener('resize', handleMobileOrientationResizeChange, false);\n    window.addEventListener('orientationchange', handleMobileOrientationResizeChange, false);\n  } else {\n    // desktop browsers and windows phone/tablet which not support orientationchange\n    window.addEventListener('resize', handleResizeEvent, false);\n  }\n  setResizeInfo();\n  setOrientationInfo();\n  eventListenersInitialized = true;\n}; // orientation change\n\nvar handleOrientationChange = function handleOrientationChange() {\n  setOrientationInfo();\n  eventProvider$1.fireEvent('orientation', {\n    landscape: internalOrientation.landscape,\n    portrait: internalOrientation.portrait\n  });\n};\nvar handleMobileTimeout = function handleMobileTimeout() {\n  // with ios split view, the browser fires only resize event and no orientationchange\n  // when changing the size of a split view\n  // therefore the following if needs to be adapted with additional check of iPad with version greater or equal 9\n  // (splitview was introduced with iOS 9)\n  if (bResize && (bOrientationChange || getSystem().tablet && getOS().ios && getOS().version >= 9)) {\n    handleOrientationChange();\n    handleResizeChange();\n    bOrientationChange = false;\n    bResize = false;\n    if (iClearFlagTimeout) {\n      window.clearTimeout(iClearFlagTimeout);\n      iClearFlagTimeout = null;\n    }\n  }\n  iOrientationTimeout = null;\n};\nvar handleMobileOrientationResizeChange = function handleMobileOrientationResizeChange(evt) {\n  if (evt.type === 'resize') {\n    if (rInputTagRegex.test(document.activeElement.tagName) && !bOrientationChange) {\n      return;\n    }\n    var _Utils$getWindowSize3 = getWindowSize(),\n      _Utils$getWindowSize4 = _slicedToArray(_Utils$getWindowSize3, 2),\n      iWindowWidthNew = _Utils$getWindowSize4[0],\n      iWindowHeightNew = _Utils$getWindowSize4[1];\n    var iTime = new Date().getTime(); // skip multiple resize events by only one orientationchange\n\n    if (iWindowHeightNew === iWindowHeightOld && iWindowWidthNew === iWindowWidthOld) {\n      return;\n    }\n    bResize = true; // on mobile devices opening the keyboard on some devices leads to a resize event\n    // in this case only the height changes, not the width\n\n    if (iWindowHeightOld !== iWindowHeightNew && iWindowWidthOld === iWindowWidthNew) {\n      // Asus Transformer tablet fires two resize events when orientation changes while keyboard is open.\n      // Between these two events, only the height changes. The check of if keyboard is open has to be skipped because\n      // it may be judged as keyboard closed but the keyboard is still\n      // open which will affect the orientation detection\n      if (!iLastResizeTime || iTime - iLastResizeTime > 300) {\n        bKeyboardOpen = iWindowHeightNew < iWindowHeightOld;\n      }\n      handleResizeChange();\n    } else {\n      iWindowWidthOld = iWindowWidthNew;\n    }\n    iLastResizeTime = iTime;\n    iWindowHeightOld = iWindowHeightNew;\n    if (iClearFlagTimeout) {\n      window.clearTimeout(iClearFlagTimeout);\n      iClearFlagTimeout = null;\n    } // Some Android build-in browser fires a resize event after the viewport is applied.\n    // This resize event has to be dismissed otherwise when the next orientationchange event happens,\n    // a UI5 resize event will be fired with the wrong window size.\n\n    iClearFlagTimeout = window.setTimeout(clearFlags, 1200);\n  } else if (evt.type === 'orientationchange') {\n    bOrientationChange = true;\n  }\n  if (iOrientationTimeout) {\n    clearTimeout(iOrientationTimeout);\n    iOrientationTimeout = null;\n  }\n  iOrientationTimeout = window.setTimeout(handleMobileTimeout, 50);\n}; // RESIZE ONLY WITHOUT ORIENTATION CHANGE\n\nvar handleResizeChange = function handleResizeChange() {\n  setResizeInfo();\n  eventProvider$1.fireEvent('resize', {\n    height: internalWindowSize.height,\n    width: internalWindowSize.width\n  });\n};\nvar handleResizeTimeout = function handleResizeTimeout() {\n  handleResizeChange();\n  iResizeTimeout = null;\n};\nvar handleResizeEvent = function handleResizeEvent() {\n  var wasL = internalOrientation.landscape;\n  var isL = isLandscape(false, internalOrientation, bKeyboardOpen);\n  if (wasL !== isL) {\n    handleOrientationChange();\n  } // throttle resize events because most browsers throw one or more resize events per pixel\n  // for every resize event inside the period from 150ms (starting from the first resize event),\n  // we only fire one resize event after this period\n\n  if (!iResizeTimeout) {\n    iResizeTimeout = window.setTimeout(handleResizeTimeout, 150);\n  }\n}; // re-export everything from the web components device\n\nvar getWindowSize$1 = function getWindowSize() {\n  return internalWindowSize;\n};\nvar attachResizeHandler = function attachResizeHandler(fnFunction) {\n  if (!eventListenersInitialized) {\n    initEventListeners();\n  }\n  eventProvider$1.attachEvent('resize', fnFunction);\n};\nvar detachResizeHandler = function detachResizeHandler(fnFunction) {\n  eventProvider$1.detachEvent('resize', fnFunction);\n}; // orientation change events\n\nvar getOrientation = function getOrientation() {\n  return internalOrientation;\n};\nvar attachOrientationChangeHandler = function attachOrientationChangeHandler(fnFunction) {\n  if (!eventListenersInitialized) {\n    initEventListeners();\n  }\n  eventProvider$1.attachEvent('orientation', fnFunction);\n};\nvar detachOrientationChangeHandler = function detachOrientationChangeHandler(fnFunction) {\n  eventProvider$1.detachEvent('orientation', fnFunction);\n};\nexport { DEFAULT_RANGESETS, DEFAULT_RANGE_SET, RANGESETS, attachMediaHandler, attachOrientationChangeHandler, attachResizeHandler, detachMediaHandler, detachOrientationChangeHandler, detachResizeHandler, getCurrentRange, getOrientation, getWindowSize$1 as getWindowSize, hasRangeSet, initRangeSet, removeRangeSet, supportInputPlaceholder, supportMatchMedia, supportMatchMediaListener, supportOrientation, supportPointerEvents, supportRetina, supportWebSocket };","map":{"version":3,"names":["supportPointerEvents","window","supportInputPlaceholder","document","createElement","supportWebSocket","isSupported","WebSocket","CLOSING","e","supportMatchMedia","supportMatchMediaListener","matchMedia","supportOrientation","supportRetina","retina","devicePixelRatio","getWindowSize","innerWidth","innerHeight","changeRootCSSClass","sClassName","bRemove","sPrefix","oRoot","documentElement","className","length","aCurrentClasses","split","sNewClasses","forEach","currentClass","indexOf","concat","getQuery","from","to","unit","arguments","undefined","q","convertToPx","val","_window$getComputedSt","s","getComputedStyle","element","currentStyle","x","fontSize","f","parseFloat","matchLegacyBySize","size","width","a","b","isLandscape","bFromOrientationChange","orientation","bKeyboardOpen","supportTouch","getOS","android","landscape","matches","MediaEventProvider","EventProvider","eventProvider","initializedQuerySets","refreshCSSClasses","sSetName","sRangeName","sClassPrefix","getRangeInfo","iRangeIdx","queries","info","names","name","mm","checkQueries","infoOnly","fnMatches","aQueries","i","len","currentquery","noClasses","Logger","warning","handleChange","timer","clearTimeout","setTimeout","mParams","fireEvent","RANGESETS","DEFAULT_RANGE_SET","SAP_STANDARD","DEFAULT_RANGESETS","_DEFAULT_RANGESETS","_defineProperty","SAP_3STEPS","points","SAP_4STEPS","SAP_6STEPS","SAP_STANDARD_EXTENDED","hasRangeSet","sName","getCurrentRange","rangeSetName","initRangeSet","isNaN","aRangeBorders","sUnit","aRangeNames","bSuppressClasses","oConfig","toLowerCase","listener","aPoints","query","push","_iterator","_createForOfIteratorHelper","_step","n","done","value","media","addListener","err","removeRangeSet","_iterator2","_step2","removeListener","_eventRegistry","attachMediaHandler","fnFunction","attachEvent","detachMediaHandler","detachEvent","eventProvider$1","iResizeTimeout","bOrientationChange","bResize","iOrientationTimeout","iClearFlagTimeout","iWindowWidthOld","_Utils$getWindowSize2","iWindowHeightOld","iLastResizeTime","rInputTagRegex","internalWindowSize","height","internalOrientation","portrait","setResizeInfo","setOrientationInfo","clearFlags","eventListenersInitialized","initEventListeners","addEventListener","handleMobileOrientationResizeChange","handleResizeEvent","handleOrientationChange","handleMobileTimeout","getSystem","tablet","ios","version","handleResizeChange","evt","type","test","activeElement","tagName","_Utils$getWindowSize3","_Utils$getWindowSize4","_slicedToArray","iWindowWidthNew","iWindowHeightNew","iTime","Date","getTime","handleResizeTimeout","wasL","isL","getWindowSize$1","attachResizeHandler","detachResizeHandler","getOrientation","attachOrientationChangeHandler","detachOrientationChangeHandler"],"sources":["/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react-base/src/Device/Support.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react-base/src/Device/utils.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react-base/src/Device/MediaEventProvider.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react-base/src/Device/Media.ts","/home/paris/projekty/haergi/feng/workspace/recipe-sharing-app/frontend/node_modules/@ui5/webcomponents-react-base/src/Device/index.ts"],"sourcesContent":["export const supportPointerEvents = () => {\n  return 'onpointerdown' in window;\n};\n\nexport const supportInputPlaceholder = () => {\n  return 'placeholder' in document.createElement('input') && 'placeholder' in document.createElement('textarea');\n};\n\nexport const supportWebSocket = () => {\n  let isSupported = false;\n  try {\n    isSupported = 'WebSocket' in window && window.WebSocket.CLOSING === 2;\n  } catch (e) {\n    // do nothing\n  }\n  return isSupported;\n};\n\nexport const supportMatchMedia = () => {\n  return 'matchMedia' in window;\n};\n\nexport const supportMatchMediaListener = () => {\n  return !!(supportMatchMedia() && window.matchMedia('all and (max-width:0px)'));\n};\n\nexport const supportOrientation = () => {\n  return 'DeviceOrientationEvent' in window;\n};\n\nexport const supportRetina = () => {\n  return (window as any).retina || window.devicePixelRatio >= 2;\n};\n","import { getOS, supportTouch } from '@ui5/webcomponents-base/dist/Device';\nimport { supportMatchMedia, supportOrientation } from './Support';\n\nexport const getWindowSize = () => {\n  return [window.innerWidth, window.innerHeight];\n};\n\nexport const changeRootCSSClass = (sClassName, bRemove, sPrefix?) => {\n  const oRoot = document.documentElement;\n  if (oRoot.className.length === 0) {\n    if (!bRemove) {\n      oRoot.className = sClassName;\n    }\n  } else {\n    const aCurrentClasses = oRoot.className.split(' ');\n    let sNewClasses = '';\n    aCurrentClasses.forEach((currentClass) => {\n      // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n      if ((sPrefix && currentClass.indexOf(sPrefix) !== 0) || (!sPrefix && currentClass !== sClassName)) {\n        sNewClasses = `${sNewClasses + currentClass} `;\n      }\n    });\n    if (!bRemove) {\n      sNewClasses += sClassName;\n    }\n    oRoot.className = sNewClasses;\n  }\n};\n\nexport const getQuery = (from: number, to: number, unit = 'px') => {\n  let q = 'all';\n  if (from > 0) {\n    q = `${q} and (min-width:${from}${unit})`;\n  }\n  if (to > 0) {\n    q = `${q} and (max-width:${to}${unit})`;\n  }\n  return q;\n};\n\nexport const convertToPx = (val, unit?) => {\n  if (unit === 'em' || unit === 'rem') {\n    const s = window.getComputedStyle ?? ((element: any) => element.currentStyle);\n    const x = s(document.documentElement).fontSize;\n    const f = x && x.indexOf('px') >= 0 ? parseFloat(x) : 16;\n    return val * f;\n  }\n  return val;\n};\n\nexport const matchLegacyBySize = (from, to, unit, size) => {\n  from = convertToPx(from, unit);\n  to = convertToPx(to, unit);\n\n  const width = size[0];\n  const a = from < 0 || from <= width;\n  const b = to < 0 || width <= to;\n  return a && b;\n};\n\nexport const isLandscape = (bFromOrientationChange: boolean, orientation, bKeyboardOpen: boolean) => {\n  if (supportTouch() && supportOrientation() && getOS().android) {\n    // if on screen keyboard is open and the call of this method is from orientation change listener,\n    // reverse the last value. this is because when keyboard opens on android device, the height can be less\n    // than the width even in portrait mode.\n    if (bKeyboardOpen && bFromOrientationChange) {\n      return !orientation.landscape;\n    }\n    if (bKeyboardOpen) {\n      // when keyboard opens, the last orientation change value will be returned.\n      return orientation.landscape;\n    }\n  } else if (supportMatchMedia() && supportOrientation()) {\n    // most desktop browsers and windows phone/tablet which not support orientationchange\n    return !!window.matchMedia('(orientation: landscape)').matches;\n  }\n  // otherwise compare the width and height of window\n  const size = getWindowSize();\n  return size[0] > size[1];\n};\n","import EventProvider from '@ui5/webcomponents-base/dist/EventProvider';\n\nexport const MediaEventProvider = new EventProvider();\n","import { Logger } from '@ui5/webcomponents-react-base/lib/Logger';\nimport { MediaEventProvider } from './MediaEventProvider';\nimport { supportMatchMediaListener } from './Support';\nimport { changeRootCSSClass, getQuery, matchLegacyBySize } from './utils';\n\ninterface Query {\n  media?: MediaQueryList;\n  query: string;\n  from: number;\n  to: number;\n}\n\ninterface RangeInfo {\n  from: number;\n  to: number;\n  name: string;\n  unit: string;\n}\n\ninterface RangeSet {\n  points: number[];\n  unit: string;\n  name: string;\n  names: string[];\n\n  noClasses?: boolean;\n  queries?: Query[];\n  timer?: number;\n  currentquery?: Query;\n  listener?: () => void;\n}\n\nconst eventProvider = MediaEventProvider;\n\n// private helpers\nconst initializedQuerySets: Record<string, RangeSet> = {};\n\nconst refreshCSSClasses = (sSetName: string, sRangeName: string, bRemove?: boolean) => {\n  const sClassPrefix = `sapUiMedia-${sSetName}-`;\n  changeRootCSSClass(sClassPrefix + sRangeName, bRemove, sClassPrefix);\n};\n\nconst getRangeInfo = (sSetName, iRangeIdx) => {\n  const q = initializedQuerySets[sSetName].queries[iRangeIdx];\n  const info = { from: q.from, unit: initializedQuerySets[sSetName].unit } as any;\n  if (q.to >= 0) {\n    info.to = q.to;\n  }\n  if (initializedQuerySets[sSetName].names) {\n    info.name = initializedQuerySets[sSetName].names[iRangeIdx];\n  }\n  return info;\n};\n\nconst matches = (from, to, unit) => {\n  const q = getQuery(from, to, unit);\n  const mm = window.matchMedia(q); // FF returns null when running within an iframe with display:none\n  return mm && mm.matches;\n};\n\nconst checkQueries = (name: string, infoOnly, fnMatches = matches): RangeInfo => {\n  if (initializedQuerySets[name]) {\n    const aQueries = initializedQuerySets[name].queries;\n    let info = null;\n    for (let i = 0, len = aQueries.length; i < len; i++) {\n      const q = aQueries[i];\n      if (\n        (q !== initializedQuerySets[name].currentquery || infoOnly) &&\n        fnMatches(q.from, q.to, initializedQuerySets[name].unit)\n      ) {\n        if (!infoOnly) {\n          initializedQuerySets[name].currentquery = q;\n        }\n        if (!initializedQuerySets[name].noClasses && initializedQuerySets[name].names && !infoOnly) {\n          refreshCSSClasses(name, initializedQuerySets[name].names[i]);\n        }\n        info = getRangeInfo(name, i);\n      }\n    }\n\n    return info;\n  }\n  Logger.warning(`No queryset with name ${name} found`, 'DEVICE.MEDIA');\n  return null;\n};\n\nconst handleChange = (name: string): void => {\n  if (initializedQuerySets[name].timer) {\n    clearTimeout(initializedQuerySets[name].timer);\n    initializedQuerySets[name].timer = null;\n  }\n\n  initializedQuerySets[name].timer = (setTimeout(\n    () => {\n      const mParams = checkQueries(name, false);\n      if (mParams) {\n        eventProvider.fireEvent(`media_${name}`, mParams);\n      }\n    },\n    supportMatchMediaListener() ? 0 : 100\n  ) as unknown) as number;\n};\n\n// public API\n\nexport enum RANGESETS {\n  SAP_3STEPS = '3Step',\n  SAP_4STEPS = '4Step',\n  SAP_6STEPS = '6Step',\n  SAP_STANDARD = 'Std',\n  SAP_STANDARD_EXTENDED = 'StdExt'\n}\n\nexport const DEFAULT_RANGE_SET = RANGESETS.SAP_STANDARD;\n\nexport const DEFAULT_RANGESETS: Record<string, RangeSet> = {\n  [RANGESETS.SAP_3STEPS]: {\n    points: [520, 960],\n    unit: 'px',\n    name: RANGESETS.SAP_3STEPS,\n    names: ['S', 'M', 'L']\n  },\n  [RANGESETS.SAP_4STEPS]: {\n    points: [520, 760, 960],\n    unit: 'px',\n    name: RANGESETS.SAP_4STEPS,\n    names: ['S', 'M', 'L', 'XL']\n  },\n  [RANGESETS.SAP_6STEPS]: {\n    points: [241, 400, 541, 768, 960],\n    unit: 'px',\n    name: RANGESETS.SAP_6STEPS,\n    names: ['XS', 'S', 'M', 'L', 'XL', 'XXL']\n  },\n  [RANGESETS.SAP_STANDARD]: {\n    points: [600, 1024],\n    unit: 'px',\n    name: RANGESETS.SAP_STANDARD,\n    names: ['Phone', 'Tablet', 'Desktop']\n  },\n  [RANGESETS.SAP_STANDARD_EXTENDED]: {\n    points: [600, 1024, 1440],\n    unit: 'px',\n    name: RANGESETS.SAP_STANDARD_EXTENDED,\n    names: ['Phone', 'Tablet', 'Desktop', 'LargeDesktop']\n  }\n};\n\nexport const hasRangeSet = (sName: string): boolean => {\n  return sName && !!initializedQuerySets[sName];\n};\n\nexport const getCurrentRange = (rangeSetName: string, width: number): RangeInfo => {\n  if (!initializedQuerySets[DEFAULT_RANGE_SET]) {\n    initRangeSet();\n  }\n  if (!initializedQuerySets[RANGESETS.SAP_STANDARD_EXTENDED]) {\n    initRangeSet(RANGESETS.SAP_STANDARD_EXTENDED);\n  }\n\n  if (!hasRangeSet(rangeSetName)) {\n    return null;\n  }\n  return checkQueries(\n    rangeSetName,\n    true,\n    isNaN(width) ? null : (from, to, unit) => matchLegacyBySize(from, to, unit, [width, 0])\n  );\n};\n\nexport const initRangeSet = (\n  sName?: string,\n  aRangeBorders?: number[],\n  sUnit?: string,\n  aRangeNames?: string[],\n  bSuppressClasses?: boolean\n): void => {\n  let oConfig: RangeSet;\n  if (!sName) {\n    oConfig = DEFAULT_RANGESETS[DEFAULT_RANGE_SET];\n  } else if (sName && DEFAULT_RANGESETS[sName]) {\n    oConfig = DEFAULT_RANGESETS[sName];\n  } else {\n    oConfig = {\n      name: sName,\n      unit: (sUnit || 'px').toLowerCase(),\n      points: aRangeBorders || [],\n      names: aRangeNames,\n      noClasses: !!bSuppressClasses\n    };\n  }\n\n  if (hasRangeSet(oConfig.name)) {\n    return;\n  }\n\n  sName = oConfig.name;\n  oConfig.queries = [];\n  oConfig.timer = null;\n  oConfig.currentquery = null;\n  oConfig.listener = () => handleChange(sName);\n\n  const aPoints = oConfig.points;\n  for (let i = 0, len = aPoints.length; i <= len; i++) {\n    const from = i === 0 ? 0 : aPoints[i - 1];\n    const to = i === aPoints.length ? -1 : aPoints[i];\n    const query = getQuery(from, to, oConfig.unit);\n    oConfig.queries.push({\n      query,\n      from,\n      to\n    });\n  }\n\n  if (oConfig.names && oConfig.names.length !== oConfig.queries.length) {\n    oConfig.names = null;\n  }\n\n  initializedQuerySets[oConfig.name] = oConfig;\n\n  const queries = oConfig.queries;\n  for (const q of queries) {\n    q.media = window.matchMedia(q.query);\n    q.media.addListener(oConfig.listener);\n  }\n\n  oConfig.listener();\n};\n\nexport const removeRangeSet = (rangeSetName: string): void => {\n  if (!hasRangeSet(rangeSetName)) {\n    Logger.info(`RangeSet ${rangeSetName} not found, thus could not be removed.`, 'DEVICE.MEDIA');\n    return;\n  }\n\n  for (const x in RANGESETS) {\n    if (rangeSetName === RANGESETS[x]) {\n      Logger.warning('Cannot remove default rangeset - no action taken.', 'DEVICE.MEDIA');\n      return;\n    }\n  }\n\n  const oConfig = initializedQuerySets[rangeSetName];\n  // FF, Safari, Chrome, IE10?\n  const queries = oConfig.queries;\n  for (const q of queries) {\n    q.media.removeListener(oConfig.listener);\n  }\n\n  refreshCSSClasses(rangeSetName, '', true);\n  // eslint-disable-next-line no-underscore-dangle\n  delete eventProvider._eventRegistry[`media_${rangeSetName}`];\n  delete initializedQuerySets[rangeSetName];\n};\n\nexport const attachMediaHandler = (fnFunction, name: string = DEFAULT_RANGE_SET): void => {\n  eventProvider.attachEvent(`media_${name}`, fnFunction);\n};\n\nexport const detachMediaHandler = (fnFunction, name: string = DEFAULT_RANGE_SET): void => {\n  eventProvider.detachEvent(`media_${name}`, fnFunction);\n};\n","import '@ui5/webcomponents-react-base/types/UI5Device.d.ts';\nimport { getOS, getSystem, supportTouch } from '@ui5/webcomponents-base/dist/Device';\nimport EventProvider from '@ui5/webcomponents-base/dist/EventProvider';\nimport { supportOrientation } from './Support';\nimport * as Utils from './utils';\n\nconst eventProvider = new EventProvider();\n\nlet iResizeTimeout;\nlet bOrientationChange = false;\nlet bResize = false;\nlet iOrientationTimeout;\nlet iClearFlagTimeout;\nlet [iWindowWidthOld, iWindowHeightOld] = Utils.getWindowSize();\nlet bKeyboardOpen = false;\nlet iLastResizeTime;\nconst rInputTagRegex = /INPUT|TEXTAREA|SELECT/;\n\ninterface IOrientation {\n  landscape: boolean;\n  portrait: boolean;\n}\n\ninterface IWindowSize {\n  height: number;\n  width: number;\n}\n\nconst internalWindowSize: IWindowSize = {\n  height: 0,\n  width: 0\n};\n\nconst internalOrientation: IOrientation = {\n  landscape: false,\n  portrait: false\n};\n\n// PRIVATE API\n\nconst setResizeInfo = () => {\n  internalWindowSize.width = Utils.getWindowSize()[0];\n  internalWindowSize.height = Utils.getWindowSize()[1];\n};\n\nconst setOrientationInfo = () => {\n  internalOrientation.landscape = Utils.isLandscape(true, internalOrientation, bKeyboardOpen);\n  internalOrientation.portrait = !internalOrientation.landscape;\n};\n\nconst clearFlags = () => {\n  bOrientationChange = false;\n  bResize = false;\n  iClearFlagTimeout = null;\n};\n\nlet eventListenersInitialized = false;\nconst initEventListeners = () => {\n  // Add handler for orientationchange and resize after initialization of Device API\n  if (supportTouch() && supportOrientation()) {\n    // logic for mobile devices which support orientationchange (like ios, android)\n    window.addEventListener('resize', handleMobileOrientationResizeChange, false);\n    window.addEventListener('orientationchange', handleMobileOrientationResizeChange, false);\n  } else {\n    // desktop browsers and windows phone/tablet which not support orientationchange\n    window.addEventListener('resize', handleResizeEvent, false);\n  }\n  setResizeInfo();\n  setOrientationInfo();\n  eventListenersInitialized = true;\n};\n\n// orientation change\nconst handleOrientationChange = () => {\n  setOrientationInfo();\n  eventProvider.fireEvent('orientation', {\n    landscape: internalOrientation.landscape,\n    portrait: internalOrientation.portrait\n  });\n};\n\nconst handleMobileTimeout = () => {\n  // with ios split view, the browser fires only resize event and no orientationchange\n  // when changing the size of a split view\n  // therefore the following if needs to be adapted with additional check of iPad with version greater or equal 9\n  // (splitview was introduced with iOS 9)\n  if (bResize && (bOrientationChange || (getSystem().tablet && getOS().ios && getOS().version >= 9))) {\n    handleOrientationChange();\n    handleResizeChange();\n    bOrientationChange = false;\n    bResize = false;\n    if (iClearFlagTimeout) {\n      window.clearTimeout(iClearFlagTimeout);\n      iClearFlagTimeout = null;\n    }\n  }\n  iOrientationTimeout = null;\n};\n\nconst handleMobileOrientationResizeChange = (evt) => {\n  if (evt.type === 'resize') {\n    if (rInputTagRegex.test(document.activeElement.tagName) && !bOrientationChange) {\n      return;\n    }\n\n    const [iWindowWidthNew, iWindowHeightNew] = Utils.getWindowSize();\n    const iTime = new Date().getTime();\n    // skip multiple resize events by only one orientationchange\n    if (iWindowHeightNew === iWindowHeightOld && iWindowWidthNew === iWindowWidthOld) {\n      return;\n    }\n    bResize = true;\n    // on mobile devices opening the keyboard on some devices leads to a resize event\n    // in this case only the height changes, not the width\n    if (iWindowHeightOld !== iWindowHeightNew && iWindowWidthOld === iWindowWidthNew) {\n      // Asus Transformer tablet fires two resize events when orientation changes while keyboard is open.\n      // Between these two events, only the height changes. The check of if keyboard is open has to be skipped because\n      // it may be judged as keyboard closed but the keyboard is still\n      // open which will affect the orientation detection\n      if (!iLastResizeTime || iTime - iLastResizeTime > 300) {\n        bKeyboardOpen = iWindowHeightNew < iWindowHeightOld;\n      }\n      handleResizeChange();\n    } else {\n      iWindowWidthOld = iWindowWidthNew;\n    }\n    iLastResizeTime = iTime;\n    iWindowHeightOld = iWindowHeightNew;\n\n    if (iClearFlagTimeout) {\n      window.clearTimeout(iClearFlagTimeout);\n      iClearFlagTimeout = null;\n    }\n    // Some Android build-in browser fires a resize event after the viewport is applied.\n    // This resize event has to be dismissed otherwise when the next orientationchange event happens,\n    // a UI5 resize event will be fired with the wrong window size.\n    iClearFlagTimeout = window.setTimeout(clearFlags, 1200);\n  } else if (evt.type === 'orientationchange') {\n    bOrientationChange = true;\n  }\n\n  if (iOrientationTimeout) {\n    clearTimeout(iOrientationTimeout);\n    iOrientationTimeout = null;\n  }\n  iOrientationTimeout = window.setTimeout(handleMobileTimeout, 50);\n};\n\n// RESIZE ONLY WITHOUT ORIENTATION CHANGE\nconst handleResizeChange = () => {\n  setResizeInfo();\n  eventProvider.fireEvent('resize', {\n    height: internalWindowSize.height,\n    width: internalWindowSize.width\n  });\n};\n\nconst handleResizeTimeout = () => {\n  handleResizeChange();\n  iResizeTimeout = null;\n};\n\nconst handleResizeEvent = () => {\n  const wasL = internalOrientation.landscape;\n  const isL = Utils.isLandscape(false, internalOrientation, bKeyboardOpen);\n  if (wasL !== isL) {\n    handleOrientationChange();\n  }\n  // throttle resize events because most browsers throw one or more resize events per pixel\n  // for every resize event inside the period from 150ms (starting from the first resize event),\n  // we only fire one resize event after this period\n  if (!iResizeTimeout) {\n    iResizeTimeout = window.setTimeout(handleResizeTimeout, 150);\n  }\n};\n\n// re-export everything from the web components device\nexport {\n  isIE,\n  isEdge,\n  isChrome,\n  isFF,\n  isSafari,\n  isMobile,\n  isDesktop,\n  isTablet,\n  isPhone,\n  isAndroid,\n  getOS,\n  getSystem,\n  getBrowser,\n  supportTouch\n} from '@ui5/webcomponents-base/dist/Device';\n// export all support methods\nexport * from './Support';\n// export all media methods\nexport * from './Media';\n// resize events\nexport const getWindowSize = () => {\n  return internalWindowSize;\n};\nexport const attachResizeHandler = (fnFunction: (windowSize: IWindowSize) => void): void => {\n  if (!eventListenersInitialized) {\n    initEventListeners();\n  }\n  eventProvider.attachEvent('resize', fnFunction);\n};\n\nexport const detachResizeHandler = (fnFunction: (windowSize: IWindowSize) => void) => {\n  eventProvider.detachEvent('resize', fnFunction);\n};\n\n// orientation change events\nexport const getOrientation = () => {\n  return internalOrientation;\n};\n\nexport const attachOrientationChangeHandler = (fnFunction: (orientation: IOrientation) => void): void => {\n  if (!eventListenersInitialized) {\n    initEventListeners();\n  }\n  eventProvider.attachEvent('orientation', fnFunction);\n};\n\nexport const detachOrientationChangeHandler = (fnFunction: (orientation: IOrientation) => void) => {\n  eventProvider.detachEvent('orientation', fnFunction);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}